guarantee_vassal_independence =  { 
	type = diplomacy
	relation_type = oneway
	annulled_by_peace_treaty = yes
    category = {
        offer = CATEGORY_HOSTILE_ACTIONS
        cancellation = CATEGORY_HOSTILE_ACTIONS
    }

    relation_type_for_ai = hostile

	visible = {
		scope:recipient = {
            is_rival_of = scope:actor
            any_subject = {
                subject_type = {
                    subject_can_be_annexed = yes
                }
            }
        }
	}

	request_visible = no
    break_visible = no

    use_with_enemies = yes

	offer_enabled = {
        scope:actor = {
            not = { has_blocked_treaties = scope:recipient }
        }
	}

    wants_to_keep = {
        if = {
            limit = {
                scope:recipient = {
                    any_subject = {
                    	subject_type = {
                        	subject_can_be_annexed = yes
                        }
                        is_neighbor_of = scope:actor
                    }
                }
            }
            add = {
                desc = "HAS_NEIGHBORING_SUBJECTS"
                value = 10
            }
        }
        else = {
            add = {
                desc = "HAS_NO_NEIGHBORING_SUBJECTS"
                value = -10
            }
        }
    }

    will_expire_trigger = {
        OR = {
            scope:recipient = {
               not = { is_rival_of = scope:actor }
            }
            scope:recipient = {
                NOT = {
                    any_subject = {
                        subject_type = {
                            subject_can_be_annexed = yes
                        }
                    }
                }
            }
        }
    }

}	
