#Check following files
#events/flavor_HUN.txt
#events/succession.txt
#common/heir_selections/monarchy.txt
union_of_crowns_pact =  { 
	type = diplomacy
	relation_type = mutual
	called_in_defensively = mutual
	disallow_war = yes
	break_on_war = yes
	category = {
		offer = CATEGORY_FRIENDLY_ACTIONS
		cancellation = CATEGORY_HOSTILE_ACTIONS
		break = CATEGORY_HOSTILE_ACTIONS
	}

	relation_type_for_ai = friendly

	visible = {
		scope:actor = {
			government_type = government_type:monarchy
			has_mutual_scripted_relation = {
				type = relation_type:union_of_crowns_pact
				target = scope:recipient
			}
		}
		scope:recipient = {
			government_type = government_type:monarchy
		}
	}
	
	request_visible = no

	offer_enabled = {
		always = no
	}

	offer_effect = {
		scope:actor = {
			change_heir_selection = heir_selection:union_of_crowns_succession
			set_variable = {
				name = union_of_crowns_partner
				value = scope:recipient
			}
			add_trust = {
				modifier = trust_union_of_crowns_pact
				target = scope:recipient
			}
			add_country_modifier = {
				modifier = union_of_crowns_pact_modifier
				mode = add_and_extend
				years = -1
			}
		}
		scope:recipient = {
			change_heir_selection = heir_selection:union_of_crowns_succession
			set_variable = {
				name = union_of_crowns_partner
				value = scope:actor
			}
			add_trust = {
				modifier = trust_union_of_crowns_pact
				target = scope:actor
			}
			add_country_modifier = {
				modifier = union_of_crowns_pact_modifier
				mode = add_and_extend
				years = -1
			}
		}
	}

	cancel_enabled = {
		scope:actor = {
			has_heir = yes
		}
	}

	cancel_effect = {
		scope:actor = {
			remove_trust = {
				modifier = trust_union_of_crowns_pact
				target = scope:recipient
			}
			remove_variable = union_of_crowns_partner
			remove_country_modifier = union_of_crowns_pact_modifier
		}
		scope:recipient = {
			remove_trust = {
				modifier = trust_union_of_crowns_pact
				target = scope:actor
			}
			remove_variable = union_of_crowns_partner
			remove_country_modifier = union_of_crowns_pact_modifier
		}
	}
	
	break_effect = {
		scope:actor = {
			remove_trust = {
				modifier = trust_union_of_crowns_pact
				target = scope:recipient
			}
			remove_variable = union_of_crowns_partner
			remove_country_modifier = union_of_crowns_pact_modifier
		}
		scope:recipient = {
			remove_trust = {
				modifier = trust_union_of_crowns_pact
				target = scope:actor
			}
			remove_variable = union_of_crowns_partner
			remove_country_modifier = union_of_crowns_pact_modifier
		}
	}
	
	will_expire_trigger = {
		OR = {
			scope:actor = { not = { government_type = government_type:monarchy } }
			scope:recipient = { not = { government_type = government_type:monarchy } }
			scope:actor = { in_union_with = scope:recipient }
		}
	}
}	
