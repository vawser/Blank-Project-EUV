clan_residence = {
	type = international_organization
	law_category = administrative
	
	potential = {
		international_organization_type = international_organization_type:japanese_shogunate
	}
	allow = {
		leader_country ?= { 
			at_war = no
			stability >= stability_extreme_bonus
		}
		situation:nanbokuchou = { situation_has_ended = yes }
	}
	locked = {
	}

	requires_vote = no

	appointed_posts_policy = {
		years = 2
		on_pay_price = {
			international_organization:japanese_shogunate.leader_country ?= {
				add_stability = stability_extreme_penalty
			}
		}
		country_modifier = {
			#emperor benefits
			potential_trigger = {
				is_leader_of_international_organization = international_organization:japanese_shogunate
			}
			monthly_legitimacy = 0.05
			change_policy_cost_modifier = -0.05
		}
		country_modifier = {
			#benefits for all members
			potential_trigger = {
				NOT = { is_leader_of_international_organization = international_organization:japanese_shogunate }
			}
			monthly_prestige = 0.05
			declaring_war_cost_modifier = 0.05
		}
		wants_this_policy_bias = {
			if = {
				limit = { scope:recipient = { international_organization_has_leader = yes } }
				#opinion of the leader country
				add = {
					desc = "POLICY_BIAS_OPINION_OF_IO_LEADER"
					value = "opinion(scope:recipient.leader_country)"
				}
				#diplomatic rep of the leader country
				add = {
					desc = "IO_LEADER_DIP_REP"
					value = scope:recipient.leader_country.modifier:diplomatic_reputation
				}
			}
			else = {
				add = {
					desc = "VOTE_BASE_VALUE"
					value = 20
				}
			}
			add = {
				desc = "BIAS_FROM_RULER_TRAITS"
				value = modifier:bias_for_diplomat_policies
			}
		}
		on_activate = {
			custom_tooltip = enable_grant_shugo_office_tt
			custom_tooltip = enable_revoke_shugo_office_tt
			custom_tooltip = enable_claim_shugo_office_tt
		}
	}

	established_domains_policy = {
		years = 2
		on_pay_price = {
			international_organization:japanese_shogunate.leader_country ?= {
				add_stability = stability_extreme_penalty
			}
		}
		country_modifier = {
			#emperor benefits
			potential_trigger = {
				is_leader_of_international_organization = international_organization:japanese_shogunate
			}
			court_spending_cost = -0.01
			global_monthly_development = 0.001
		}
		country_modifier = {
			#benefits for all members
			potential_trigger = {
				NOT = { is_leader_of_international_organization = international_organization:japanese_shogunate }
			}
			global_manpower_modifier = 0.05
			global_rgo_build_time = -0.05
		}
		wants_this_policy_bias = {
			if = {
				limit = { scope:recipient = { international_organization_has_leader = yes } }
				#opinion of the leader country
				add = {
					desc = "POLICY_BIAS_OPINION_OF_IO_LEADER"
					value = "opinion(scope:recipient.leader_country)"
				}
				#diplomatic rep of the leader country
				add = {
					desc = "IO_LEADER_DIP_REP"
					value = scope:recipient.leader_country.modifier:diplomatic_reputation
				}
			}
			else = {
				add = {
					desc = "VOTE_BASE_VALUE"
					value = 20
				}
			}
			add = {
				desc = "BIAS_FROM_RULER_TRAITS"
				value = modifier:bias_for_militarist_policies
			}
		}
		on_activate = {
			custom_tooltip = enable_claim_shugo_office_tt
		}
	}

	sankin_kotai_policy = {
		years = 2
		on_pay_price = {
			international_organization:japanese_shogunate.leader_country ?= {
				add_stability = stability_extreme_penalty
			}
		}
		potential = {
			NOT = { is_situation_active = situation:sengoku }
		}
		country_modifier = {
			#emperor benefits
			potential_trigger = {
				is_leader_of_international_organization = international_organization:japanese_shogunate
			}
			stability_investment = small_stability_investment
			global_monthly_development = 0.002
		}
		country_modifier = {
			#benefits for all members
			potential_trigger = {
				NOT = { is_leader_of_international_organization = international_organization:japanese_shogunate	}
			}
			court_spending_cost = 0.01
			global_monthly_development = 0.001
		}
		wants_this_policy_bias = {
			if = {
				limit = { scope:recipient = { international_organization_has_leader = yes } }
				#opinion of the leader country
				add = {
					desc = "POLICY_BIAS_OPINION_OF_IO_LEADER"
					value = "opinion(scope:recipient.leader_country)"
				}
				#diplomatic rep of the leader country
				add = {
					desc = "IO_LEADER_DIP_REP"
					value = scope:recipient.leader_country.modifier:diplomatic_reputation
				}
			}
			else = {
				add = {
					desc = "VOTE_BASE_VALUE"
					value = 20
				}
			}
			add = {
				desc = "BIAS_FROM_RULER_TRAITS"
				value = modifier:bias_for_balanced_policies
			}
		}
	}
}

jap_sakoku_law = {
	type = international_organization
	law_category = socioeconomic

	requires_vote = no
	
	potential = {
		international_organization_type = international_organization_type:japanese_shogunate
	}
	allow = {
		leader_country ?= { 
			at_war = no
			stability >= stability_extreme_bonus
		}
		situation:sengoku = { situation_has_ended = yes }
	}

	sakoku_enabled = {
		on_pay_price = {
			international_organization:japanese_shogunate.leader_country ?= {
				add_stability = stability_extreme_penalty
			}
		}
		country_modifier = {
			trade_isolation = yes
			stability_cost = -0.2
			monthly_towards_inward = societal_value_large_monthly_move
		}
		years = 2
		wants_this_policy_bias = {
			if = {
				limit = { scope:recipient = { international_organization_has_leader = yes } }
				#opinion of the leader country
				add = {
					desc = "POLICY_BIAS_OPINION_OF_IO_LEADER"
					value = "opinion(scope:recipient.leader_country)"
				}
				#diplomatic rep of the leader country
				add = {
					desc = "IO_LEADER_DIP_REP"
					value = scope:recipient.leader_country.modifier:diplomatic_reputation
				}
			}
			else = {
				add = {
					desc = "VOTE_BASE_VALUE"
					value = 20
				}
			}
			add = {
				desc = "BIAS_FROM_RULER_TRAITS"
				value = modifier:bias_for_administrative_policies
			}
			add = {
				desc = "OPPOSES_RULER_TRAITS"
				value = modifier:bias_for_capitalist_policies
				multiply = -1
			}
		}
	}
	sakoku_disabled = {
		on_pay_price = {
			international_organization:japanese_shogunate.leader_country ?= {
				add_stability = stability_extreme_penalty
			}
		}
		country_modifier = {
			stability_cost = 0.5
			research_speed_modifier = 0.05
		}
		years = 2
		wants_this_policy_bias = {
			if = {
				limit = { scope:recipient = { international_organization_has_leader = yes } }
				#opinion of the leader country
				add = {
					desc = "POLICY_BIAS_OPINION_OF_IO_LEADER"
					value = "opinion(scope:recipient.leader_country)"
				}
				#diplomatic rep of the leader country
				add = {
					desc = "IO_LEADER_DIP_REP"
					value = scope:recipient.leader_country.modifier:diplomatic_reputation
				}
			}
			else = {
				add = {
					desc = "VOTE_BASE_VALUE"
					value = 20
				}
			}
			add = {
				desc = "OPPOSES_RULER_TRAITS"
				value = modifier:bias_for_capitalist_policies
				multiply = -1
			}
		}
	}
}

jap_buke_shohatto = {
	type = international_organization
	law_category = military

	requires_vote = no
	
	potential = {
		international_organization_type = international_organization_type:japanese_shogunate
		international_organization_has_unlocked_law_trigger = { type = jap_buke_shohatto }
	}

	allow = {
		leader_country ?= { 
			at_war = no
			stability >= stability_extreme_bonus
		}
	}
	
	jap_buke_shohatto_enforced  = {
		on_pay_price = {
			international_organization:japanese_shogunate.leader_country ?= {
				add_stability = stability_extreme_penalty
			}
		}
		country_modifier = {
			monthly_towards_quality = societal_value_monthly_move
			monthly_towards_aristocracy = societal_value_monthly_move
			monthly_army_tradition = 0.1
			nobles_estate_target_satisfaction = medium_permanent_target_satisfaction_penalty
		}
		years = 2
		wants_this_policy_bias = {
			if = {
				limit = { scope:recipient = { international_organization_has_leader = yes } }
				#opinion of the leader country
				add = {
					desc = "POLICY_BIAS_OPINION_OF_IO_LEADER"
					value = "opinion(scope:recipient.leader_country)"
				}
				#diplomatic rep of the leader country
				add = {
					desc = "IO_LEADER_DIP_REP"
					value = scope:recipient.leader_country.modifier:diplomatic_reputation
				}
			}
			else = {
				add = {
					desc = "VOTE_BASE_VALUE"
					value = 20
				}
			}
			add = {
				desc = "BIAS_FROM_RULER_TRAITS"
				value = modifier:bias_for_militarist_policies
			}
		}
	}

	jap_buke_shohatto_guidelines  = {
		on_pay_price = {
			international_organization:japanese_shogunate.leader_country ?= {
				add_stability = stability_extreme_penalty
			}
		}
		country_modifier = {
			monthly_towards_humanist = societal_value_monthly_move
			monthly_towards_decentralization = societal_value_monthly_move
			cultural_tradition_modifier = 0.1
			peasants_estate_target_satisfaction = medium_permanent_target_satisfaction_penalty
		}
		years = 2
		wants_this_policy_bias = {
			if = {
				limit = { scope:recipient = { international_organization_has_leader = yes } }
				#opinion of the leader country
				add = {
					desc = "POLICY_BIAS_OPINION_OF_IO_LEADER"
					value = "opinion(scope:recipient.leader_country)"
				}
				#diplomatic rep of the leader country
				add = {
					desc = "IO_LEADER_DIP_REP"
					value = scope:recipient.leader_country.modifier:diplomatic_reputation
				}
			}
			else = {
				add = {
					desc = "VOTE_BASE_VALUE"
					value = 20
				}
			}
			add = {
				desc = "BIAS_FROM_RULER_TRAITS"
				value = modifier:bias_for_militarist_policies
			}
		}
	}
}
