mutual_defense_law = {
	type = international_organization
	law_category = military
	custom_tags = { forbids_no_policy }
	potential = {
        OR = {
            international_organization_type = international_organization_type:defensive_league
            international_organization_type = international_organization_type:foreign_league_france
            international_organization_type = international_organization_type:foreign_league_hre
            international_organization_type = international_organization_type:foreign_league_iberia
            international_organization_type = international_organization_type:italian_league_1
            international_organization_type = international_organization_type:italian_league_2
            international_organization_type = international_organization_type:italian_league_3
            international_organization_type = international_organization_type:jurchen_confederation
            international_organization_type = international_organization_type:tribal_confederation
            international_organization_type = international_organization_type:colonial_federation
        }
	}
	allow = {
		always = yes
	}
	locked = {
	}

	no_defense_policy = {
		potential = {
			NOT = { international_organization_type = international_organization_type:defensive_league }
		}
		wants_this_policy_bias = {
			add = {
				desc = "DIPLOREASON_BASE"
				value = 20
			}
		}
	}

	possible_defense_policy = {
		diplomatic_capacity_cost = possible_defence_upkeep_cost
		join_defensive_wars_can_call = {
			always = yes
		}
		wants_this_policy_bias = {
			add = io_members_and_potential_members_opinion_value
            add = {
                desc = "NEEDS_ALLIES_AGAINST_STRONG_RIVALS_AND_NEIGHBOURS"
                # Check if the country needs allies at all
                value = country_needs_allies_value
                max = 30
                min = { 0.05 0.5 }
            }
		}
		wants_propose_policy = {
			value = 1
			if = {
				limit = {
					scope:recipient = {
						OR = {
							international_organization_has_policy = policy:automatic_defense_policy
							international_organization_has_policy = policy:assured_defense_policy
						}
					}
				}
				multiply = {
					desc = "WE_ALREADY_HAVE_A_BETTER_POLICY"
					value = 0
				}
			}
		}
		policy_bias_towards_new_member = {
			if = {
				limit = {
					OR = {
						is_rival_of = scope:actor
						is_enemy_of = scope:actor
					}
				}
				add = {
					desc = "[rival_enemy|e]"
					value = -1000
				}
			}
			add = {
				desc = "game_concept_opinion"
				scope:actor = {
					value = prev_opinion_of_this
					multiply = 0.03
				}
			}
            add = {
                desc = "NEEDS_ALLIES_AGAINST_STRONG_RIVALS_AND_NEIGHBOURS"
                # Check if the country needs allies at all
                value = country_needs_allies_value
                max = 30
                min = { 0.05 0.5 }
            }
		}
	}

	automatic_defense_policy = {
		diplomatic_capacity_cost = automatic_defence_upkeep_cost
		join_defensive_wars_auto_call = {
			always = yes
		}
		wants_this_policy_bias = {
			add = {
				desc = "DIPLOREASON_BASE"
				value = -20
			}
			add = {
				desc = "OPINION_OF_OTHER_MEMBERS"
				value = io_members_and_potential_members_opinion_value
				multiply = 1.2
			}
            add = {
                desc = "NEEDS_ALLIES_AGAINST_STRONG_RIVALS_AND_NEIGHBOURS"
                # Check if the country needs allies at all
                value = country_needs_allies_value
				multiply = 1.2
                max = 30
                min = { 0.05 0.5 }
            }
			if = {
				limit = { exists = scope:recipient }
				add = {
					desc = "YEARS_OF_ORGANIZATION_EXISTENCE"
					value = -25
					add = {
						value = scope:recipient.international_organization_lifetime
						multiply = 5	#is 0 after 5 years
					}
					max = 25
				}
			}
		}
		wants_propose_policy = {
			value = 1
			if = {
				limit = {
					scope:recipient = {
						international_organization_has_policy = policy:assured_defense_policy
					}
				}
				multiply = {
					desc = "WE_ALREADY_HAVE_A_BETTER_POLICY"
					value = 0
				}
			}
		}
		policy_bias_towards_new_member = {
			add = {
				desc = "DIPLOREASON_BASE"
				value = -20
			}
			if = {
				limit = {
					OR = {
						is_rival_of = scope:actor
						is_enemy_of = scope:actor
					}
				}
				add = {
					desc = "[rival_enemy|e]"
					value = -1000
				}
			}
			add = {
				desc = "game_concept_opinion"
				scope:actor = {
					value = prev_opinion_of_this
					multiply = 0.05
				}
			}
            add = {
                desc = "NEEDS_ALLIES_AGAINST_STRONG_RIVALS_AND_NEIGHBOURS"
                # Check if the country needs allies at all
                value = country_needs_allies_value
				multiply = 1.2
                max = 30
                min = { 0.05 0.5 }
            }
		}
	}

	assured_defense_policy = {
		diplomatic_capacity_cost = assured_defence_upkeep_cost
		join_defensive_wars_always = {
			always = yes
		}
		wants_this_policy_bias = {
			add = {
				desc = "DIPLOREASON_BASE"
				value = -40
			}
			add = {
				desc = "OPINION_OF_OTHER_MEMBERS"
				value = io_members_and_potential_members_opinion_value
				multiply = 1.4
				min = -100
				max = 100
			}
            add = {
                desc = "NEEDS_ALLIES_AGAINST_STRONG_RIVALS_AND_NEIGHBOURS"
                # Check if the country needs allies at all
                value = country_needs_allies_value
				multiply = 1.4
                max = 30
                min = { 0.05 0.5 }
            }
			if = {
				limit = { exists = scope:recipient }
				add = {
					desc = "YEARS_OF_ORGANIZATION_EXISTENCE"
					value = -50
					add = {
						value = scope:recipient.international_organization_lifetime
						multiply = 5	#is 0 after 10 years
						min = { 0.05 0.5 }
					}
					max = 25
				}
			}
		}
		policy_bias_towards_new_member = {
			add = {
				desc = "DIPLOREASON_BASE"
				value = -40
			}
			if = {
				limit = {
					OR = {
						is_rival_of = scope:actor
						is_enemy_of = scope:actor
					}
				}
				add = {
					desc = "[rival_enemy|e]"
					value = -1000
				}
			}
			add = {
				desc = "game_concept_opinion"
				scope:actor = {
					value = prev_opinion_of_this
					multiply = 0.1
				}
			}
            add = {
                desc = "NEEDS_ALLIES_AGAINST_STRONG_RIVALS_AND_NEIGHBOURS"
                # Check if the country needs allies at all
                value = country_needs_allies_value
				multiply = 1.4
                max = 30
                min = { 0.05 0.5 }
            }
		}
	}
}

mutual_offense_law = {
	type = international_organization
	potential = { 
        OR = {
            international_organization_type = international_organization_type:foreign_league_france
            international_organization_type = international_organization_type:foreign_league_hre
            international_organization_type = international_organization_type:foreign_league_iberia
            international_organization_type = international_organization_type:italian_league_1
            international_organization_type = international_organization_type:italian_league_2
            international_organization_type = international_organization_type:italian_league_3
            international_organization_type = international_organization_type:jurchen_confederation
            international_organization_type = international_organization_type:tribal_confederation
            international_organization_type = international_organization_type:colonial_federation
        }
	}
	allow = {
		always = yes
	}
	locked = {
	}

	assured_offense_policy = {
		diplomatic_capacity_cost = assured_offence_upkeep_cost
		join_offensive_wars_always = {
			always = yes
		}
		wants_this_policy_bias = {
			add = {
				desc = "DIPLOREASON_BASE"
				value = -40
			}
			add = {
				desc = "OPINION_OF_OTHER_MEMBERS"
				value = io_members_and_potential_members_opinion_value
				multiply = 1.4
			}
            add = {
                desc = "NEEDS_ALLIES_AGAINST_STRONG_RIVALS_AND_NEIGHBOURS"
                # Check if the country needs allies at all
                value = country_needs_allies_value
				multiply = 1.4
                max = 30
                min = { 0.05 0.5 }
            }
		}
		policy_bias_towards_new_member = {
			add = {
				desc = "DIPLOREASON_BASE"
				value = -40
			}
			if = {
				limit = {
					OR = {
						is_rival_of = scope:actor
						is_enemy_of = scope:actor
					}
				}
				add = {
					desc = "[rival_enemy|e]"
					value = -1000
				}
			}
			add = {
				desc = "game_concept_opinion"
				scope:actor = {
					value = prev_opinion_of_this
					multiply = 0.03
				}
			}
            add = {
                desc = "NEEDS_ALLIES_AGAINST_STRONG_RIVALS_AND_NEIGHBOURS"
                # Check if the country needs allies at all
                value = country_needs_allies_value
				multiply = 1.4
                max = 30
                min = { 0.05 0.5 }
            }
		}
	}

	automatic_offense_policy = {
		diplomatic_capacity_cost = automatic_offence_upkeep_cost
		join_offensive_wars_auto_call = {
			always = yes
		}
		wants_this_policy_bias = {
			add = {
				desc = "DIPLOREASON_BASE"
				value = -20
			}
			add = {
				desc = "OPINION_OF_OTHER_MEMBERS"
				value = io_members_and_potential_members_opinion_value
				multiply = 1.2
			}
            add = {
                desc = "NEEDS_ALLIES_AGAINST_STRONG_RIVALS_AND_NEIGHBOURS"
                # Check if the country needs allies at all
                value = country_needs_allies_value
				multiply = 1.2
                max = 30
                min = { 0.05 0.5 }
            }
		}
		wants_propose_policy = {
			value = 1
			if = {
				limit = {
					scope:recipient = {
						international_organization_has_policy = policy:assured_offense_policy
					}
				}
				multiply = {
					desc = "WE_ALREADY_HAVE_A_BETTER_POLICY"
					value = 0
				}
			}
		}
		policy_bias_towards_new_member = {
			add = {
				desc = "DIPLOREASON_BASE"
				value = -20
			}
			if = {
				limit = {
					OR = {
						is_rival_of = scope:actor
						is_enemy_of = scope:actor
					}
				}
				add = {
					desc = "[rival_enemy|e]"
					value = -1000
				}
			}
			add = {
				desc = "game_concept_opinion"
				scope:actor = {
					value = prev_opinion_of_this
					multiply = 0.05
				}
			}
            add = {
                desc = "NEEDS_ALLIES_AGAINST_STRONG_RIVALS_AND_NEIGHBOURS"
                # Check if the country needs allies at all
                value = country_needs_allies_value
				multiply = 1.2
                max = 30
                min = { 0.05 0.5 }
            }
		}
	}

	possible_offense_policy = {
		diplomatic_capacity_cost = possible_offence_upkeep_cost
		join_offensive_wars_can_call = {
			always = yes
		}
		wants_this_policy_bias = {
			add = io_members_and_potential_members_opinion_value
            add = {
                desc = "NEEDS_ALLIES_AGAINST_STRONG_RIVALS_AND_NEIGHBOURS"
                # Check if the country needs allies at all
                value = country_needs_allies_value
                max = 30
                min = { 0.05 0.5 }
            }
		}
		wants_propose_policy = {
			value = 1
			if = {
				limit = {
					scope:recipient = {
						OR = {
							international_organization_has_policy = policy:automatic_offense_policy
							international_organization_has_policy = policy:assured_offense_policy
						}
					}
				}
				multiply = {
					desc = "WE_ALREADY_HAVE_A_BETTER_POLICY"
					value = 0
				}
			}
		}
		policy_bias_towards_new_member = {
			if = {
				limit = {
					OR = {
						is_rival_of = scope:actor
						is_enemy_of = scope:actor
					}
				}
				add = {
					desc = "[rival_enemy|e]"
					value = -1000
				}
			}
			add = {
				desc = "game_concept_opinion"
				scope:actor = {
					value = prev_opinion_of_this
					multiply = 0.1
				}
			}
            add = {
                desc = "NEEDS_ALLIES_AGAINST_STRONG_RIVALS_AND_NEIGHBOURS"
                # Check if the country needs allies at all
                value = country_needs_allies_value
                max = 30
                min = { 0.05 0.5 }
            }
		}
	}

	no_offense_policy = {
		wants_propose_policy = {
			value = 1
			if = {
				limit = {
					scope:recipient = {
						OR = {
							international_organization_has_policy = policy:automatic_offense_policy
							international_organization_has_policy = policy:assured_offense_policy
							international_organization_has_policy = policy:possible_offense_policy
						}
					}
				}
				multiply = {
					desc = "WE_ALREADY_HAVE_A_BETTER_POLICY"
					value = 0
				}
			}
		}
		wants_this_policy_bias = {
			add = {
				desc = "DIPLOREASON_BASE"
				value = 20
			}
		}
	}
}