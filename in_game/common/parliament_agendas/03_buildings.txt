#Building related Agendas
#remove Buildings of other estates
#Nobles
pa_remove_parish_church = {
	estate = nobles_estate
	potential = {
		total_effective_building_levels:parish_church > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = parish_church
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:parish_church
			}
			change_building_level_in_location = {
				building = building_type:parish_church
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_spiritual_retreat = {
	estate = nobles_estate
	potential = {
		total_effective_building_levels:spiritual_retreat > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = spiritual_retreat
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:spiritual_retreat
			}
			change_building_level_in_location = {
				building = building_type:spiritual_retreat
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_warrior_monks_training_grounds = {
	estate = nobles_estate
	potential = {
		total_effective_building_levels:warrior_monks_training_grounds > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = warrior_monks_training_grounds
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:warrior_monks_training_grounds
			}
			change_building_level_in_location = {
				building = building_type:warrior_monks_training_grounds
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_local_markets = {
	estate = nobles_estate
	potential = {
		total_effective_building_levels:local_markets > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = local_markets
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 5
				}
				max = root.total_effective_building_levels:local_markets
			}
			change_building_level_in_location = {
				building = building_type:local_markets
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_burgher_mansion = {
	estate = nobles_estate
	potential = {
		total_effective_building_levels:burgher_mansion > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = burgher_mansion
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 5
				}
				max = root.total_effective_building_levels:burgher_mansion
			}
			change_building_level_in_location = {
				building = building_type:burgher_mansion
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_peasants_training_grounds = {
	estate = nobles_estate
	potential = {
		total_effective_building_levels:peasants_training_grounds > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = peasants_training_grounds
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:peasants_training_grounds
			}
			change_building_level_in_location = {
				building = building_type:peasants_training_grounds
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_peasants_hunting_grounds = {
	estate = nobles_estate
	potential = {
		total_effective_building_levels:peasants_hunting_grounds > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = peasants_hunting_grounds
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:peasants_hunting_grounds
			}
			change_building_level_in_location = {
				building = building_type:peasants_hunting_grounds
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

#Clergy
pa_remove_local_assembly = {
	estate = clergy_estate
	potential = {
		total_effective_building_levels:local_assembly > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = local_assembly
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:local_assembly
			}
			change_building_level_in_location = {
				building = building_type:local_assembly
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_nobility_fortifications = {
	estate = clergy_estate
	potential = {
		total_effective_building_levels:nobility_fortifications > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = nobility_fortifications
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:nobility_fortifications
			}
			change_building_level_in_location = {
				building = building_type:nobility_fortifications
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:nobles_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_merchants_guild = {
	estate = clergy_estate
	potential = {
		total_effective_building_levels:merchants_guild > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = merchants_guild
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 5
				}
				max = root.total_effective_building_levels:merchants_guild
			}
			change_building_level_in_location = {
				building = building_type:merchants_guild
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_artisan_guilds = {
	estate = clergy_estate
	potential = {
		total_effective_building_levels:artisan_guilds > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = artisan_guilds
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 5
				}
				max = root.total_effective_building_levels:artisan_guilds
			}
			change_building_level_in_location = {
				building = building_type:artisan_guilds
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_festival_grounds = {
	estate = clergy_estate
	potential = {
		total_effective_building_levels:festival_grounds > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = festival_grounds
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:festival_grounds
			}
			change_building_level_in_location = {
				building = building_type:festival_grounds
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_local_schools = {
	estate = clergy_estate
	potential = {
		total_effective_building_levels:local_schools > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = local_schools
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:local_schools
			}
			change_building_level_in_location = {
				building = building_type:local_schools
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

#Burghers
pa_remove_toll_castle = {
	estate = burghers_estate
	potential = {
		total_effective_building_levels:toll_castle > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = toll_castle
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:toll_castle
			}
			change_building_level_in_location = {
				building = building_type:toll_castle
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:nobles_estate
			value = estate_satisfaction_mild_penalty
		}
		
	}
	chance = 10
}

pa_remove_rotten_borough = {
	estate = burghers_estate
	potential = {
		total_effective_building_levels:rotten_borough > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = rotten_borough
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:rotten_borough
			}
			change_building_level_in_location = {
				building = building_type:rotten_borough
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:nobles_estate
			value = estate_satisfaction_mild_penalty
		}
		
	}
	chance = 10
}

pa_remove_local_noble_delegation = {
	estate = burghers_estate
	potential = {
		total_effective_building_levels:local_noble_delegation > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = local_noble_delegation
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:local_noble_delegation
			}
			change_building_level_in_location = {
				building = building_type:local_noble_delegation
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:nobles_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_clerical_archives = {
	estate = burghers_estate
	potential = {
		total_effective_building_levels:clerical_archives > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = clerical_archives
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:clerical_archives
			}
			change_building_level_in_location = {
				building = building_type:clerical_archives
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_pirate_haven = {
	estate = burghers_estate
	potential = {
		total_effective_building_levels:pirate_haven > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = pirate_haven
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:pirate_haven
			}
			change_building_level_in_location = {
				building = building_type:pirate_haven
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_local_newspaper = {
	estate = burghers_estate
	potential = {
		total_effective_building_levels:local_newspaper > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = local_newspaper
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:local_newspaper
			}
			change_building_level_in_location = {
				building = building_type:local_newspaper
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:peasants_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

#Peasants
pa_remove_guild_hall = {
	estate = peasants_estate
	potential = {
		total_effective_building_levels:guild_hall > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = guild_hall
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 5
				}
				max = root.total_effective_building_levels:guild_hall
			}
			change_building_level_in_location = {
				building = building_type:guild_hall
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:burghers_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_bailiffs = {
	estate = peasants_estate
	potential = {
		total_effective_building_levels:bailiff > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = bailiff
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 5
				}
				max = root.total_effective_building_levels:bailiff
			}
			change_building_level_in_location = {
				building = building_type:bailiff
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:nobles_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_noble_villa = {
	estate = peasants_estate
	potential = {
		total_effective_building_levels:noble_villa > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = noble_villa
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:noble_villa
			}
			change_building_level_in_location = {
				building = building_type:noble_villa
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:nobles_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_nobles_recruitment_center = {
	estate = peasants_estate
	potential = {
		total_effective_building_levels:nobles_recruitment_center > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = nobles_recruitment_center
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:nobles_recruitment_center
			}
			change_building_level_in_location = {
				building = building_type:nobles_recruitment_center
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:nobles_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

pa_remove_local_shrine = {
	estate = peasants_estate
	potential = {
		total_effective_building_levels:local_shrine > 0
	}
	
	on_accept = {
		ordered_owned_location = {
			limit = {
				has_building_with_at_least_one_level = local_shrine
			}
			order_by = population
			max = {
				value = 1
				add = {
					value = num_provinces
					divide = 10
				}
				max = root.total_effective_building_levels:local_shrine
			}
			change_building_level_in_location = {
				building = building_type:local_shrine
				value = -1
			}
		}
		add_estate_satisfaction = { type = estate_type:clergy_estate
			value = estate_satisfaction_mild_penalty
		}
	}
	chance = 10
}

#construct buildings for estate
#Clergy
pa_construct_monastery = {
	estate = clergy_estate
	
	potential = {
		OR = {
			AND = {
				modifier:can_have_monasteries = yes
				any_owned_location = {
					is_city = no
					NOT = { has_building = building_type:monastery }
				}
			}
			AND = {
				religion = religion:orthodox
				any_owned_location = {
					is_city = no
					NOT = { has_building = building_type:orthodox_monastery }
				}
			}
			AND = {
				religion = religion:miaphysite
				any_owned_location = {
					is_city = no
					NOT = { has_building = building_type:miaphysite_monastery }
				}
			}
		}
	}
	
	on_accept = {
		random_owned_location = {
			limit = {
				is_city = no
				NOT = { has_building = building_type:monastery }
			}
			if = {
				limit = {
					ROOT.religion = religion:miaphysite
					is_city = no
					NOT = { has_building = building_type:miaphysite_monastery }
				}
				construct_building = {
					building_type = building_type:miaphysite_monastery
					cost_multiplier = 0.5
					cost_multiplier_reason = "game_concept_parliament_agenda"
					instant = yes
				}
			}
			else_if = {
				limit = {
					ROOT.religion = religion:orthodox
					is_city = no
					NOT = { has_building = building_type:orthodox_monastery }
				}
				construct_building = {
					building_type = building_type:orthodox_monastery
					cost_multiplier = 0.5
					cost_multiplier_reason = "game_concept_parliament_agenda"
					instant = yes
				}
			}
			else = {
				construct_building = {
					building_type = building_type:monastery
					cost_multiplier = 0.5
					cost_multiplier_reason = "game_concept_parliament_agenda"
					instant = yes
				}
			}
		}
	}
	chance = 10
}

pa_construct_market_village = {
	estate = burghers_estate
	estate = peasants_estate
	
	potential = {
		any_owned_rural_location = {
			NOT = { has_building = building_type:market_village }
		}
	}
	
	on_accept = {
		random_owned_location = {
			limit = {
				NOT = { has_building = building_type:market_village }
			}
			construct_building = {
				building_type = building_type:market_village
				cost_multiplier = 0.5
				cost_multiplier_reason = "game_concept_parliament_agenda"
				instant = yes
			}
		}
	}
	chance = 5
}