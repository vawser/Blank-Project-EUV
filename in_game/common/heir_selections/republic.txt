oligarchic_elective = {
	#allow_female = yes
	use_election = yes
	term_duration = 0	#0 = until ruler death
	max_possible_candidates = 3

	allowed_estates = { nobles_estate burghers_estate }
	heir_is_allowed = {
	}
	calc = {
		if = {
			limit = {
				exists = root
			}
			add = {
				desc = "HEIR_SELECTION_ADM_DESC"
				value = root.adm
			}
			add = {
				desc = "HEIR_SELECTION_DIP_DESC"
				value = root.dip
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = root.mil
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = character_age
			}
			if = { 
				limit = { modifier:blocked_from_being_ruler = yes }
				add = {
					desc = "HEIR_SELECTION_IS_UNSUITED_TO_RULE_DESC"
					value = -1000 
				}
			}
		}

		# Here it goes the description for explaining the lottery election
		if = {
			limit = {
				not = { exists = root }
			}
			add = {
				desc = "HEIR_SELECTION_ADM_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_DIP_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = 1
			}
		}
	}

	modifier = {
		care_about_producing_heirs = yes
	}
}


republic_4_year_terms = {

	#allow_female = yes
	use_election = yes
	term_duration = 48 # in months
	max_possible_candidates = 4

	allowed_estates = { nobles_estate burghers_estate }
	heir_is_allowed = {
	}
	calc = {
		if = {
			limit = {
				exists = root
			}
			add = {
				desc = "HEIR_SELECTION_ADM_DESC"
				value = root.adm
			}
			add = {
				desc = "HEIR_SELECTION_DIP_DESC"
				value = root.dip
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = root.mil
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = character_age
			}
			if = { 
				limit = { modifier:blocked_from_being_ruler = yes }
				add = {
					desc = "HEIR_SELECTION_IS_UNSUITED_TO_RULE_DESC"
					value = -1000 
				}
			}
		}

		# Here it goes the description for explaining the lottery election
		if = {
			limit = {
				not = { exists = root }
			}
			add = {
				desc = "HEIR_SELECTION_ADM_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_DIP_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = 1
			}
		}
	}

	modifier = {
		care_about_producing_heirs = yes
	}
}


republic_2_year_terms = {
	#allow_female = yes
	use_election = yes
	term_duration = 24 # in months
	max_possible_candidates = 4

	allowed_estates = { nobles_estate burghers_estate }
	heir_is_allowed = {
	}
	potential = {
		has_reform = government_reform:great_and_minor_councils_of_genoa
	}

	calc = {
		if = {
			limit = {
				exists = root
			}
			add = {
				desc = "HEIR_SELECTION_ADM_DESC"
				value = root.adm
			}
			add = {
				desc = "HEIR_SELECTION_DIP_DESC"
				value = root.dip
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = root.mil
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = root.age_in_years
			}
			if = { 
				limit = { modifier:blocked_from_being_ruler = yes }
				add = {
					desc = "HEIR_SELECTION_IS_UNSUITED_TO_RULE_DESC"
					value = -1000 
				}
			}
		}

		# Here it goes the description for explaining the lottery election
		if = {
			limit = {
				not = { exists = root }
			}
			add = {
				desc = "HEIR_SELECTION_ADM_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_DIP_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = 1
			}
		}
	}

	modifier = {
		care_about_producing_heirs = yes
	}
}

lottery_election = {

	#allow_female = yes
	use_election = yes
	term_duration = 0	#0 = until ruler death
	max_possible_candidates = 3
	show_candidates = no

	allowed_estates = { nobles_estate burghers_estate }
	heir_is_allowed = {
	}
	calc = {
		if = {
			limit = {
				exists = root
			}
			add = {
				desc = "HEIR_SELECTION_RANDOM_DESC"
				value = random_integer
				modulo = 200
				
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = character_age
			}
			if = { 
				limit = { modifier:blocked_from_being_ruler = yes }
				add = {
					desc = "HEIR_SELECTION_IS_UNSUITED_TO_RULE_DESC"
					value = -1000 
				}
			}
		}

		# Here it goes the description for explaining the lottery election
		if = {
			limit = {
				not = { exists = root }
			}
			add = {
				desc = "HEIR_SELECTION_RANDOM_DESC"
				format = "FORMAT_NO_VALUE"
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = 1
			}
		}
	}

	modifier = {
		care_about_producing_heirs = yes
	}
}

veche_selection = {
	#allow_female = yes
	use_election = no
	term_duration = 0	#0 = until ruler death
	max_possible_candidates = 0
	show_candidates = no
	potential = { has_advance = veche_advance }

	calc = {
		add = {
			desc = "VECHE_HAS_NO_HEIR"
			value = -1
		}
	}
	
	modifier = {
		care_about_producing_heirs = yes
	}

}

doge_election = {
	use_election = yes
	term_duration = 0	#0 = until ruler death
	max_possible_candidates = 3
	allowed_estates = { nobles_estate burghers_estate }
	heir_is_allowed = {
	}
	potential = {
		has_reform = government_reform:merchant_republic
	}
	locked = {
		has_reform = government_reform:merchant_republic
	}
	calc = {
		if = {
			limit = {
				exists = root
			}
			add = {
				desc = "HEIR_SELECTION_ADM_DESC"
				value = root.adm
			}
			add = {
				desc = "HEIR_SELECTION_DIP_DESC"
				value = root.dip
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = root.mil
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = root.age_in_years
			}
			if = {
				limit = {
					has_traits_of_type = { type = economical }
				}
				add = {
					desc = "HEIR_SELECTION_ECONOMICAL_TRAITS"
					value = 50
				}
			}
			if = {
				limit = {
					has_traits_of_type = { type = social }
				}
				add = {
					desc = "HEIR_SELECTION_SOCIAL_TRAITS"
					value = 50
				}
			}
			if = {
				limit = {
					has_traits_of_type = { type = tolerant }
				}
				add = {
					desc = "HEIR_SELECTION_TOLERANT_TRAITS"
					value = 50
				}
			}
			if = { 
				limit = { modifier:blocked_from_being_ruler = yes }
				add = {
					desc = "HEIR_SELECTION_IS_UNSUITED_TO_RULE_DESC"
					value = -1000 
				}
			}
		}

		# Here it goes the description for explaining the lottery election
		if = {
			limit = {
				not = { exists = root }
			}
			add = {
				desc = "HEIR_SELECTION_ADM_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_DIP_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_ECONOMICAL_TRAITS"
				value = 50
			}
			add = {
				desc = "HEIR_SELECTION_SOCIAL_TRAITS"
				value = 50
			}
			add = {
				desc = "HEIR_SELECTION_TOLERANT_TRAITS"
				value = 50
			}
		}
	}

	modifier = {
		care_about_producing_heirs = yes
	}
}

diarchic_election = {
	use_election = yes
	term_duration = 0	#0 = until ruler death
	max_possible_candidates = 5
	allowed_estates = { nobles_estate burghers_estate }
	heir_is_allowed = {
	}
	potential = {
		has_reform = government_reform:diarchy_republic
	}
	locked = {
		has_reform = government_reform:diarchy_republic
	}

	calc = {
		if = {
			limit = {
				exists = root
			}
			if = {
				limit = {
					root.dynasty ?= dynasty:spinola_dynasty
				}
				add = {
					desc = "SPINOLA_DYNASTY"
					value = 100
				}
			}
			if = {
				limit = {
					root.dynasty ?= dynasty:doria_dynasty
				}
				add = {
					desc = "DORIA_DYNASTY"
					value = 100
				}
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = character_age
			}
			add = {
				desc = "HEIR_SELECTION_ADM_DESC"
				value = root.adm
			}
			add = {
				desc = "HEIR_SELECTION_DIP_DESC"
				value = root.dip
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = root.mil
			}
			if = {
				limit = {
					has_variable = diarchy_coruler
				}
				add = {
					desc = "HEIR_SELECTION_WAS_PREVIOUS_CO_RULER"
					value = 200
				}
			}
			if = { 
				limit = { modifier:blocked_from_being_ruler = yes }
				add = {
					desc = "HEIR_SELECTION_IS_UNSUITED_TO_RULE_DESC"
					value = -1000 
				}
			}
		}
		if = {
			limit = {
				NOT = { exists = root }
			}
			add = {
				desc = "HEIR_SELECTION_MEMBER_OF_SPINOLA_DYNASTY"
				value = 100
			}
			add = {
				desc = "HEIR_SELECTION_MEMBER_OF_DORIA_DYNASTY"
				value = 100
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_ADM_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_DIP_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_WAS_PREVIOUS_CO_RULER"
				value = 200
			}
		}
	}

	modifier = {
		care_about_producing_heirs = yes
	}
}

bank_selection = {
	include_ruler_siblings = yes
	through_female = no
	allow_female = no

	allowed_estates = { nobles_estate burghers_estate }
	heir_is_allowed = {
	}
	potential = {
		has_reform = government_reform:banking_country
	}

	locked = {
		has_reform = government_reform:banking_country
	}
	calc = {
		if = {
			limit = {
				exists = root
			}
			add = {
				desc = "HEIR_SELECTION_ADM_DESC"
				value = root.adm
			}

			add = {
				desc = "BANK_OLDER_HEIR_DESC"
				value = character_age
			}
			if = { 
				limit = { modifier:blocked_from_being_ruler = yes }
				add = {
					desc = "HEIR_SELECTION_IS_UNSUITED_TO_RULE_DESC"
					value = -1000 
				}
			}
		}
	}

	modifier = {
		care_about_producing_heirs = yes
	}
}
	
pirate_elective = {
	#allow_female = yes
	use_election = yes
	term_duration = 0	#0 = until ruler death
	max_possible_candidates = 3

	allowed_estates = { nobles_estate burghers_estate peasants_estate }
	heir_is_allowed = {
	}
	potential = {
		has_reform = government_reform:pirate_brethren_reform
	}

	locked = {
		has_reform = government_reform:pirate_brethren_reform
	}
	calc = {
		if = {
			limit = {
				exists = root
			}
			add = {
				desc = "HEIR_SELECTION_DIP_DESC"
				value = root.dip
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = root.mil
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = character_age
			}
			if = {
				limit = {
					is_admiral = yes
				}
				desc = "HEIR_SELECTION_ADMIRAL_DESC"
				value = 100
			}
			if = {
				limit = {
					has_trait_category = admiral
				}
				desc = "HEIR_SELECTION_ADMIRAL_TRAIT_DESC"
				value = 100
			}
			if = { 
				limit = { modifier:blocked_from_being_ruler = yes }
				add = {
					desc = "HEIR_SELECTION_IS_UNSUITED_TO_RULE_DESC"
					value = -1000 
				}
			}
		}

		# Here it goes the description for explaining
		if = {
			limit = {
				not = { exists = root }
			}
			add = {
				desc = "HEIR_SELECTION_DIP_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_ADMIRAL_DESC"
				value = 100
			}
		}
	}
}

peasant_elective = {

	#allow_female = yes
	use_election = yes
	term_duration = 0	#0 = until ruler death
	max_possible_candidates = 3

	allowed_estates = { burghers_estate peasants_estate }
	heir_is_allowed = {
	}
	potential = {
		has_reform = government_reform:peasant_republic_reform
	}

	locked = {
		has_reform = government_reform:peasant_republic_reform
	}

	calc = {
		if = {
			limit = {
				exists = root
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = character_age
			}
			if = {
				limit = { has_dynasty = yes }
				desc = "HEIR_SELECTION_HAS_DYNASTY_DESC"
				value = -1000
			}
			if = { 
				limit = { modifier:blocked_from_being_ruler = yes }
				add = {
					desc = "HEIR_SELECTION_IS_UNSUITED_TO_RULE_DESC"
					value = -1000 
				}
			}
		}

		# Here it goes the description for explaining the lottery election
		if = {
			limit = {
				not = { exists = root }
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_HAS_DYNASTY_DESC"
				value = -1000
			}
		}
	}
}




military_dictatorship = {

	#allow_female = yes
	use_election = yes
	term_duration = 0	#0 = until ruler death
	max_possible_candidates = 3

	allowed_estates = { nobles_estate peasants_estate }
	heir_is_allowed = {
	}
	potential = {
		OR = {
			has_reform = government_reform:ambrosian_republic_reform
			has_reform = government_reform:revolutionary_autocracy
		}
	}

	locked = {
		OR = {
			has_reform = government_reform:ambrosian_republic_reform
			has_reform = government_reform:revolutionary_autocracy
		}
	}

	calc = {
		if = {
			limit = {
				exists = root
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = character_age
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = root.mil
			}
			add = {
				desc = "HEIR_SELECTION_GENERAL_OR_ADMIRAL_TRAIT_DESC"
				value = 20
			}
			if = { 
				limit = { modifier:blocked_from_being_ruler = yes }
				add = {
					desc = "HEIR_SELECTION_IS_UNSUITED_TO_RULE_DESC"
					value = -1000 
				}
			}
		}

		# Here it goes the description for explaining the lottery election
		if = {
			limit = {
				not = { exists = root }
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = 1
			}
			if = {
				limit = { 
					OR = {
						has_trait_category = general
						has_trait_category = admiral
					}
				}
				add = {
					desc = "HEIR_SELECTION_GENERAL_OR_ADMIRAL_TRAIT_DESC"
					value = 20
				}
			}
		}
	}

	modifier = {
		care_about_producing_heirs = yes
	}
}

signoria_selection = {

	use_election = no
	term_duration = 0	#0 = until ruler death
	include_ruler_siblings = yes
	all_in_country = no
	all_in_dynasty = yes
	through_female = yes
	ignore_ruler = yes


	allowed_estates = { nobles_estate clergy_estate burghers_estate }
	heir_is_allowed = {
	}
	potential = {
		has_reform = government_reform:dynastic_signoria_reform
	}

	locked = {
		has_reform = government_reform:dynastic_signoria_reform
	}

	calc = {
		add = {
			desc = "COGNATIC_PRIMOGENITURE_PARENT_IS_RULER_DESC"
			if = {
				limit = {
					OR = {
						not = { exists = root }
						and = {
							exists = father
							father = scope:target.last_valid_ruler
							father = { NOT = { has_estate = estate_type:clergy_estate } } #Discourage direct inheritance through bishops
						}
						and = {
							exists = mother
							mother = scope:target.last_valid_ruler 
							mother = { NOT = { has_estate = estate_type:clergy_estate } } #Discourage direct inheritance through bishops
						}
					}
				}
				value = 300
			}
		}
		add = {
			desc = "COGNATIC_PRIMOGENITURE_GRANDPARENT_IS_RULER_DESC"
			if = {
				limit = {
					OR = {
						not = { exists = root }
						and = {
							exists = father
							father = { NOT = { has_estate = estate_type:clergy_estate } } #Discourage direct inheritance through bishops
							OR = {
								father.father ?= scope:target.last_valid_ruler
								father.mother ?= scope:target.last_valid_ruler
							}
						}
						and = {
							exists = mother
							mother = { NOT = { has_estate = estate_type:clergy_estate } } #Discourage direct inheritance through bishops
							OR = {
								mother.father ?= scope:target.last_valid_ruler
								mother.mother ?= scope:target.last_valid_ruler
							}
						}
					}	
				}
				value = 200
			}
		}

		if = {
			limit = {
				exists = root
			}
	
			add = {
				desc = "HEIR_SELECTION_ADM_DESC"
				value = root.adm
			}
			add = {
				desc = "HEIR_SELECTION_DIP_DESC"
				value = root.dip
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = root.mil
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = root.age_in_years
			}
			if = { 
				limit = { modifier:blocked_from_being_ruler = yes }
				add = {
					desc = "HEIR_SELECTION_IS_UNSUITED_TO_RULE_DESC"
					value = -1000 
				}
			}
		}
		if = {
			limit = { 
				exists = root.father
				father = { NOT = { has_estate = estate_type:clergy_estate } } #Discourage direct inheritance through bishops
			}
			
			if = {
				limit = { 
					scope:target = { 
						any_ruler = { 
							is_alive = no
							root.father = this 
						} 
					}
				}
				add = {
					desc = "HEIR_SELECTION_FATHER_WAS_HISTORICAL_RULER_DESC"
					value = 100
				}
			}
					
			if = {
				limit = {
					exists = root.father.father
					scope:target = { 
						any_ruler = { 
							is_alive = no
							root.father.father = this 
						} 
					}
				}
				add = {
					desc = "HEIR_SELECTION_GRANDFATHER_WAS_HISTORICAL_RULER_DESC"
					value = 100
				}
			}

		}
	}

	modifier = {
		care_about_producing_heirs = yes
	}
}

podesta_elective = {
	allow_female = no
	use_election = yes
	term_duration = 0	#0 = until ruler death
	max_possible_candidates = 5

	candidate_country = {
		religion = religion:catholic
		has_presence_in = scope:target.capital.region
		prestige > 25
		total_population > 500
		OR = {
			government_type = government_type:monarchy
			government_type = government_type:republic
		}
	}

	potential = {
		has_reform = government_reform:signoria_reform
	}

	locked = {
		has_reform = government_reform:signoria_reform
	}

	allowed_estates = { nobles_estate burghers_estate }
	heir_is_allowed = {
	}
	calc = {
		if = {
			limit = {
				exists = root
			}
			add = {
				desc = "HEIR_SELECTION_ADM_DESC"
				value = root.adm
			}
			add = {
				desc = "HEIR_SELECTION_DIP_DESC"
				value = root.dip
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = root.mil
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = character_age
			}
			add = {
				desc = "HEIR_SELECTION_COUNTRY_PRESTIGE"
				value = root.owner.prestige
			}
			if = {
				limit = {
					culture = scope:target.dominant_culture
				}
				add = {
					desc = "HEIR_SELECTION_CULTURE"
					value = 20
				}
			}
			if = { 
				limit = { modifier:blocked_from_being_ruler = yes }
				add = {
					desc = "HEIR_SELECTION_IS_UNSUITED_TO_RULE_DESC"
					value = -1000 
				}
			}
		}

		# Here it goes the description for explaining the lottery election
		if = {
			limit = {
				not = { exists = root }
			}
			add = {
				desc = "HEIR_SELECTION_ADM_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_DIP_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_MIL_DESC"
				value = 1
			}
			add = {
				desc = "HEIR_SELECTION_OLDER_HEIR_DESC"
				value = 1
			}
		}
	}

	modifier = {
		care_about_producing_heirs = yes
	}
}
