#------------------
# Overview
#------------------
Generic action system - create an action entirely in script and place a GUI button for it entirely in script - no need for coders!

#------------------
# Entry
#------------------
<key> = {
    type = <type>           # Can be: owncountry/religious/religiousfaction/diplomacy/subject/character/location/internationalorganization/situation/internationalorganizationparliament
    sound = <key>           # The sound to use for the action
    message = <key>         # The message key for when sensing pop up messages to the user
    
    potential = {
        <triggers>
    }
    # Whether this action is visible. scope:actor is the country attempting to perform the action
    
    allow = {
        <triggers>
    }
    # Whether this action is usable. scope:actor is the country attempting to perform the action
    
    ai_prerequisite = {
        <triggers>
    }
    # Trigger to check if the AI should do this action, root is the country attempting to perform the action, no scopes or targets are available at this early stage
    
    price = <price>                 # Entry listed in \common\prices\ and referenced by name (like price:<price_id>) or as a result of a script (like scope:target.price)
    price_modifier = <value>        # Calculated value, multiplies the price; scope:actor is the country, scope:recipient, scope:target, scope:target_1, scope:target_2....etc
    payer = <scope>                 # Script to determine who is paying the price. By default, the actor
    payee = <scope>                 # Script to determine who gets paid. By default, nobody, the price disappears into the ether
    
    ai_tick = <type>                        # Use to ban the AI from using an action that is already handled in code OR to indicate how often to process. Can be never/daily/monthly
    ai_tick_frequency = <scripted value>    # How many ticks until next. script to determine how often this action should be checked for each country. root is the country. 
                                            # This is just a per-country check. So ai_tick = monthly and ai_tick_frequency = 6 means "check every 6 months"
                                            
    automation_tick = <type>                        # Use to ban the AI from using an action that is already handled in code OR to indicate how often to process. Used for the automation
                                                    # Can be: <never/daily/monthly>
    automation_tick_frequency = <scripted value>    # How many ticks until next. script to determine how often this action should be checked for each country. root is the country. 
                                                    # This is just a per-country check. So automation_tick = monthly and automation_tick_frequency = 6 means "check every 6 months". 
                                                    # Used for the automation process
                                                    
    show_message = no                       # Optional, to prevent messages showing
    show_message_to_target = no             # Optional, to prevent messages to show to the target
    should_execute_price = no               # Optional, to prevent the price of the action to be paid
    
    show_in_gui_list = no                   # Optional, to prevent the action to be listed automatically in the GUI. 
    
    player_automated_category = <type>  # If the human player activates the automation for the system then the action may be executed according to ai_will_do
                                        # Can be: finances/research/trade/productionmethods/laws/cabinet/parliament/estates/exploration/
                                        # colonies/cultureacceptance/religiousdoctrines/buildings/rgo/armybuilder/navybuilder
                 
    allow_multiple_targets = <bool>     # Allows ai to perform the same action multiple times per check
    
    ai_will_do = {
        <effects>
    }
    # Effect script for the AI to use, scope:actor is the country, scope:recipient, scope:target, scope:target_1, scope:target_2....etc
                           
    effect = {
        <effects>
    }
    # The effects to apply when the action is executed. scope:actor is the country, scope:recipient, scope:target, scope:target_1, scope:target_2....etc
    
    cooldown = { 
        type = <any tag> 
        days/weeks/months/years = <integer> 
    } 
    # Adds a cooldown for the action during which time it cannot be performed again
    
    # Can add multiple of these to allow selection of targets/parameters for the action. They get stored in scope:target, scope:target_1, scope:target_2....etc
    select_trigger = {
        looking_for_a = <type>              # Can be character/location/province/area/region/country/value/boolean
        target_flag = <key>                 # What you want to call this target in the scope (e.g. target, target_1, target_province etc.) 
                                            # Then later you'll use this name to reference what was selected here. If left out it will default to target, target_1, target_2, target_3 etc
                                    
        source = <type>                     # Can be actor/recipient/target/target_1/target_2/target_3/target_4/world
        source_ai_override = <type>         # Can be actor/recipient/target/target_1/target_2/target_3/target_4 (ai only)
        
        source_flags = <type>               # Options to improve game performance by narrowing down the choice:   
                                            # neighbor/possible_colonial_charters/include_dead/include_any_present/possible_exploration_areas/
                                            # adjacent_locations/vacant_adjacent_locations/adjacent_provinces/border/border_or_recipients_capital_area/
                                            provinces_ai_wants_to_give_away/only_actual_locations/only_defending_sieges/only_attacking_sieges/include_subjects
                                            
        source_flags_ai_override = <type>   # Options to improve game performance by narrowing down the choice:             
                                            # neighbor/possible_colonial_charters/include_dead/include_any_present/possible_exploration_areas/
                                            # adjacent_locations/vacant_adjacent_locations/adjacent_provinces/border/border_or_recipients_capital_area/
                                            # provinces_ai_wants_to_give_away/only_actual_locations/include_subjects)
                                             
        source_global_list = <key>          # Name of global variable list with the list of candidates in: if you have a pre calculated global list of who you want in the select_trigger, use this
         
        interaction_source_list = {
            <effects>
        }
        # Gives us a list of possible candidates to look at. 
        # scope:actor is the country, scope:recipient, scope:target, scope:target_1, scope:target_2....etc. 
        # Fill the list with add_to_list = source on the scope object
        
        ai_interaction_source_list = {
            <effects>
        }
        # Gives us a list of possible candidates to look at. Applies to AI countries only. 
        # scope:actor is the country, scope:recipient, scope:target, scope:target_1, scope:target_2....etc. 
        # Fill the list with add_to_list = source on the scope object
        
        pre_evaluation_sort_value = <script_value>          # Use this to sort the initial list of possible targets 
                                                            # that pass the trigger and select the top X to evaluate fully
                                                            # Use in conjunction with pre_evaluation_number_to_evaluate_fully
                                                            
        pre_evaluation_number_to_evaluate_fully = <int>     # Number of the top sorted pre-evaluated targets to pass on for full evaluation
                                                            # Use in conjunction with pre_evaluation_sort_value (AI only)
                                                            
        max_targets_for_ui = <int>                          # Number of the top sorted pre-evaluated targets to pass on to the UI for the user to choose from
        cache_targets = <bool>                              # If the list of targets will always be the same, i.e. doesn't depend on any other selection, then set this to yes to save processing
        cache_interaction_source_list = <bool>              # If the interaction source list will always be the same, i.e. doesn't depend on any other selection, then set this to yes to save processing
        cache_order = <bool>                                # If the list of targets will always be in the same order of how good they are at the task, set this to yes to save processing
        
        allow_null = <bool>                                 # Allow the selection of a null object, can be a trigger to check under what circumstances should null be included / excluded instead
        allow_self = <bool>                                 # Allow the actor to be added to the list (only works for countries)
        
        top_widget = <key>                                  # Links to a widget type in the gui files to show at the top of the list. 
        bottom_widget = <key>                               # Links to a widget type in the gui files to show at the bottom of the list. 
        
        column = { 
            data = <column_id> 
            width = <int> 
            icon = <path>
            show_icon_in_cells = <bool>
        } 
        # Adds a column to the UI to search with these can also be defaulted, see \common\attribute_columns
        
        default_sort = <key>                                # Key of the sort you want the selection to default to. 
                                                            # With nothing it will default to the first sort column. 
                                                            # The columns you have are specified in columns = above, the sort keys for the sorts are in \common\attribute_columns\
                                                            
        none_available_msg_key = <key>                      # Key of the localisation used when there are no available targets to choose from (optional)
        
        show_why_not_visible = <bool>                       # True to show why a target might not be visible if there are no targets
        show_why_not_enabled = <bool>                       # True to show why a target might not be enabled if there are no targets
        
        show_if = { 
            <triggers>
        }
        # Determines if the action is shown (root is source scope)
        
        visible = { 
            <trigger>
        }
        # Determines if the action is visible (root is source scope)
        
        enabled = { 
            <trigger>
        }
        # Determines if the action is enabled (root is source scope)
        
        selected = { 
            <trigger>
        }
        # Determines if the action is selected (root is source scope)
        
        min = <script value>                                # Minimum value for value types
        max = <script value>                                # Maximum value for value types
        step = <script value>                               # Step value for changing value types in the UI
        default = <script value>                            # Default value for value types
        
        
        ai_override_value = <script value>                  # sole value to test for the AI [optional, use for performance reasons]

        map_mode = <map mode tag>                           # Map mode the map will switch to while choosing this target (optional)
        map_color = <script color>                          # Map color for location (root = location, scope:actor/recipient etc)
        only_color_selectable = <bool>                      # Yes to only think about colouring selectable locations; no to be able to colour any location with the script above
        secondary_map_color = <script color>          
    }
}

#------------------
# GUI
#------------------
To use the action in GUI script, use this sort of thing:

action_button_default = {
    title = "<optional title for action tooltip>"
    description = "<optional description for action tooltip. By default, uses the generic action description>"
    effects = "<optional description of the effects for action tooltip. By default, uses the generic action effects but you can override>"
    conditions = "<optional description of the conditions for action tooltip. By default, uses the generic action trigger but you can override>"
    actor = "[GUI script to get the country that is performing the action]"
    recipient = "[<GUI script to get the recipient of the action>]"
    target = "[<GUI script to get the target of the action>]"
  target = ... (you can add as many targets as you want in case the action has several)
    left_action = "<id of the action to perform with a click of the left button>"
    left_click_and_hold_action = "<id of the action to perform with a click and hold of the left button>"
    right_action = "<id of the action to perform with a click of the right button>"
    right_click_and_hold_action = "<id of the action to perform with a click and hold of the right button>"
}

#------------------
# Message Types
#------------------
As for message types that get sent to the player, the format is as follows. At the very least, the generic version should be provided. If the more specific ones are available, they will be used.
Generic catch-all message: PERFORM_ + Key + _ACTION e.g. PERFORM_do_some_stuff_ACTION

These are added as message types in gui/messagetypes.txt.

The text for them needs to be added as localizations. There are plenty of examples, all the localizations use the stem of the action type as the basis for the localization key.

When the player does the action: WE_PERFORM_ + Key + _ACTION e.g. WE_PERFORM_throw_tomatoes_ACTION
When another country does it: OTHER_PERFORMS_ + Key + _ACTION e.g. OTHER_PERFORMS_rain_dance_ACTION
When another country does it to us: ACTION_ + Key + _PERFORMED_ON_US e.g. ACTION_declare_war_PERFORMED_ON_US

In the strings for these messages, in addition to being able to use the scope variables in the strings, you can use the following presets:
$ACTION$ - the name of the action
$EFFECT$ - the effect of the action
$DESC$ - the action description (<action_tag>_desc)

#------------------
# Localization
#------------------
<key>
<key>_desc
