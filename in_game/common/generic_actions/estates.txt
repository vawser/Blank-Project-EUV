bribe_estate = {
	type = owncountry
	sound = BRIBE_ESTATE
	potential = {
	}

	allow = {
	}

	ai_tick = daily
	ai_tick_frequency = 180
	automation_tick = monthly
	automation_tick_frequency = 6
	player_automated_category = estates
	

	select_trigger = {
		looking_for_a = estate
		source = actor
		target_flag = target
		name = "mission_select_estate"
		column = {
			data = name
		}
		enabled = {
			estate_tax_base > 0.01
			
			scope:actor = {
				gold >= {
					value = root.estate_tax_base
					multiply = 12
				}
			}
		}
	}

	effect = {
		scope:actor = {
			add_gold = {
				value = scope:target.estate_tax_base
				multiply = -12
			}

			add_estate_satisfaction = { 
				type = scope:target.estate_type
				value = estate_satisfaction_mild_bonus
			}
			add_gold_to_estate = {
				estate_type = scope:target.estate_type
				value = {
					value = scope:target.estate_tax_base
					multiply = 12
				}
			}
			hidden_effect = {

				if = {
					limit = { 
						active_mission ?= { this = mission:estate_cooperation }
						var:target_estate_var_bribery ?= scope:target.estate_type
					}
					set_variable = {
						name = recently_bribed_estate_variable
						years = 5
					}
				}
			}
		}
	}
	
	ai_will_do = {
		if = {
			limit = { 
				exists = scope:target
				scope:target = {
					target_satisfaction > satisfaction
				}
				save_temporary_scope_value_as = {
					name = cost
					value = {
						value = scope:target.estate_tax_base
						multiply = -12
					}
				}
			}

			# Add negative score based on the cost
			add = {
				desc = "Gold Cost"
				value = "scope:actor.currency_utility(gold|scope:cost)"
			}

			#Calculation on the basis of Estate Power 0 - 100
			#If it's too low, the AI will look to bribe

			add = {
				desc = "Willingness based on Estate Power"
				value = scope:target.power
				multiply = 90
			}

			#Bit less weight on the current satisfaction
			subtract = {
				desc = "Target Satisfaction"
				value = scope:target.satisfaction
				multiply = 100
			}

			#If Satisfaction is too low, add some weight just in case...
			if = {	#Failsafe!
				limit = { scope:target.satisfaction < 0.25 }
				add = {
					desc = "Low Satisfaction Failsafe"
					value = 10
				}
			}
			if = {	#Failsafe!
				limit = { scope:target.satisfaction > 0.6 }
				subtract = {
					desc = "High Satisfaction Failsafe"
					value = 100
				}
			}

			#Let's check we are not far below the target_satisfaction
			add = {
				desc = "Satisfaction - Target satisfaction"
				value = scope:target.satisfaction
				subtract = scope:target.target_satisfaction
				multiply = 20
			}
		}
	}
}

