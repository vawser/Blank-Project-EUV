#Excommunication Triggers
is_excommunicated = {
	custom_description = {
		text = is_excommunicated_text
		has_ruler = yes
		ruler ?= { has_character_modifier = excommunicated }
	}
}
excommunicate_allow_trigger = {
	OR = {
		current_age = age_1_traditions
		current_age = age_2_renaissance
	}
}
excommunicate_target_trigger = {
	religion ?= religion:catholic
	exists = ruler
	has_regent = no
	custom_tooltip = {
		text = tag_is_not_pope_tt
		NOT = { tag = PAP }
	}
	NOT = {
		is_excommunicated = yes
	}
}
was_recently_under_interdict = {
	custom_description = {
		text = was_recently_under_interdict_text
		has_variable = was_recently_under_interdict
	}
}

crusade_potential_trigger = {
	game_is_initialized = yes
	OR = {
		current_age = age_1_traditions
		current_age = age_2_renaissance
		religion:catholic = { has_religion_modifier = illius_qui_se_pro_divini }
	}
}

crusade_allow_trigger = {
	NOT = { unique_international_organization_type_exists = international_organization_type:crusade }
}

is_valid_target_for_jihad = {
	NOT = { religion.group = religion_group:muslim }
	OR = {
		country_rank = country_rank:rank_kingdom
		country_rank = country_rank:rank_empire
	}
	OR = {
		religion_group_percentage_in_country = {
			group = religion_group:muslim
			value > 0.05
		}
		any_neighbor_country = {
			religion.group = religion_group:muslim
		}
	}
}

is_valid_target_for_crusade = {
	exists = yes
	country_exists = this
	save_temporary_scope_as = this_country
	NOT = { religion.group = religion_group:christian }
	OR = {
		country_rank = country_rank:rank_kingdom
		country_rank = country_rank:rank_empire
	}
	trigger_if = {
		limit = { 
			country_exists = c:PAP
		}
		capital = {
			is_discovered_by = c:PAP
		}
		not = { is_subject_of = c:PAP }
		c:PAP = {
			not = { is_subject_of = scope:this_country }
		}
	}
	religion:catholic = {
		any_holy_site_in_religion = {
			location = {
				owner = scope:this_country
			}
		}
	}
}

is_location_buddhist = {
	OR = {
		dominant_religion = religion:theravada
		dominant_religion = religion:mahayana
		dominant_religion = religion:tibetan_buddhism
	}
}
is_country_buddhist = {
	OR = {
		religion = religion:theravada
		religion = religion:mahayana
		religion = religion:tibetan_buddhism
	}
}
is_protestant = {
	custom_description = {
		text = is_protestant_text
		religion ?= {
			is_protestant_religion = yes
		}
	}
}

is_protestant_religion = {
	has_tag = protestant
}

is_heretic = {
	custom_description = {
		text = is_heretic_text
		object = $religion$
		religion.group = $religion$.group
		NOT = { religion = $religion$ }
	}
}
is_heathen = {
	custom_description = {
		text = is_heathen_text
		object = $religion$
		NOT = { religion.group = $religion$.group }
	}
}

is_abrahamic = {
	custom_description = {
		text = is_abrahamic_text
		OR = {
			religion.group = religion_group:christian
			religion.group = religion_group:muslim
			religion.group = religion_group:israelite_group
		}
	}
}

controls_and_owns_pentarchy = {
	location:rome = {
		owner = prev
		controller = prev
		dominant_religion = prev.religion
	}
	location:constantinople = {
		owner = prev
		controller = prev
		dominant_religion = prev.religion
	}
	location:antioch = {
		owner = prev
		controller = prev
		dominant_religion = prev.religion
	}
	location:jerusalem = {
		owner = prev
		controller = prev
		dominant_religion = prev.religion
	}
	location:alexandria = {
		owner = prev
		controller = prev
		dominant_religion = prev.religion
	}
}

papacy_active = {
	religion:catholic = {
		modifier:papacy_blocked = no
	}
}

has_unlocked_religious_aspect_trigger = {
	custom_description = {
		text = has_unlocked_religious_aspect_trigger_text
		value = religious_aspect:$type$
		has_variable = unlocked_religious_aspect_$type$
	}
}

has_locked_religious_aspect_trigger = {
	custom_description = {
		text = has_locked_religious_aspect_trigger_text
		value = religious_aspect:$type$
		NOT = { has_variable = unlocked_religious_aspect_$type$ }
	}
}

is_peacetime_shakti_avatar = {
	custom_tooltip = {
		text = is_peacetime_shakti_avatar_tt
		OR = {
			this = avatar:parvati_avatar
			this = avatar:lakshmi_avatar
			this = avatar:saraswati_avatar
			this = avatar:tripura_sundari_avatar
			this = avatar:bhuvaneshvari_avatar
		}
	}
}

is_wartime_shakti_avatar = {
	custom_tooltip = {
		text = is_wartime_shakti_avatar_tt
		OR = {
			this = avatar:durga_avatar
			this = avatar:kali_avatar
			this = avatar:chhinnamasta_avatar
			this = avatar:chandi_avatar
			this = avatar:tara_avatar
		}
	}
}

has_access_to_god_holy_site = {
	custom_description = {
		text = has_access_to_god_holy_site_text
		object = god:$god$
		god:$god$ ?= {
			any_religion_for_god = {
				any_holy_site_in_religion = {
					god ?= god:$god$
					location.owner ?= {
						OR = {
							this = root
							is_allied_with = { target = root }
						}
					}			
				}
			}
		}
	}
}

smartism_balanced_gods = {
	custom_description = {
		text = smartism_balanced_gods_text
		OR = {
			NOR = {
				has_variable = favoring_ganesha_god
				has_variable = favoring_shiva_god
				has_variable = favoring_shakti_god
				has_variable = favoring_vishnu_god
				has_variable = favoring_surya_god
			}
			AND = {
				has_variable = favoring_ganesha_god
				has_variable = favoring_shiva_god
				has_variable = favoring_shakti_god
				has_variable = favoring_vishnu_god
				has_variable = favoring_surya_god
			}
		}
	}
}

is_favoring_god = {
	custom_description = {
		text = is_favoring_god_text
		object = god:$god$
		has_variable = favoring_$god$
	}
}

can_give_land_to_pope_trigger = {
	religion = religion:catholic
	government_type = government_type:theocracy
	NOT = { var:refused_papacy ?= yes }
	at_war = no
	trigger_if = {
		limit = {
			country_exists = c:TEU
		}
		NOT = { this ?= c:TEU }
	}
	trigger_if = {
		limit = {
			country_exists = c:LIV
		}
		NOT = { this ?= c:LIV }
	}
	num_locations > 1
	any_owned_location = {
		is_capital = no
		dominant_religion = religion:catholic
		continent = continent:europe
	}
}

country_can_pay_tithe = {
	#during the schism, there are two popes to pay tithes to
	trigger_if = {
		limit = {
			has_global_variable_list = western_schism_possible_votes
		}
		not = {
			is_target_in_global_variable_list = {
				name = western_schism_possible_votes
				target = this
			}
		}
		any_in_global_list = {
			variable = western_schism_possible_votes
			prev_opinion_of_this >= 0
		}
	}
	trigger_else = {
		limit = {
			exists = root.leader_country
		}
		not = { is_leader_of_international_organization = root }
		opinion = {
			target = root.leader_country
			value >= 0
		}
	}
	modifier:excluded_from_paying_tithe = no
}

is_location_dominant_religion_pagan = { #For Locations
	custom_tooltip = {
		text = is_religion_pagan_tt
		dominant_religion = {
			is_religion_pagan = yes
		}
	}
}

is_religion_folk_american = { #For Religons
	custom_tooltip = {
		text = is_religion_pagan_tt
		OR = {
			group = religion_group:folk_argentinian_group
			group = religion_group:folk_aridoamerica_group
			group = religion_group:folk_brazilian_group
			group = religion_group:folk_caribbean_group
			group = religion_group:folk_central_american_group
			group = religion_group:tonal_group
			group = religion_group:folk_north_american_group
			group = religion_group:folk_peruvian_group
			group = religion_group:folk_south_american_group
		}
	}
}

is_country_religion_folk_american = { #For Countries
	custom_tooltip = {
		text = is_religion_pagan_tt
		religion = {
			is_religion_folk_american = yes
		}
	}
}

is_location_dominant_religion_folk_american = { #For Locations
	custom_tooltip = {
		text = is_religion_pagan_tt
		dominant_religion = {
			is_religion_folk_american = yes
		}
	}
}

is_jurisprudence_school = { #religious_school
	OR = {
		this = religious_school:hanafi_school
		this = religious_school:hanbali_school
		this = religious_school:maliki_school
		this = religious_school:shafii_school
		this = religious_school:zahiri_school

		this = religious_school:ismaili_school
		this = religious_school:jafari_school
		this = religious_school:zaidi_school

		this = religious_school:ibadi_school
	}
}

is_sufi_school = { #religious_school
	OR = {
		this = religious_school:bektashi_school
		this = religious_school:chishti_school
		this = religious_school:khalwati_school
		this = religious_school:mevlevi_school
		this = religious_school:naqshbandi_school
		this = religious_school:qadiri_school
		this = religious_school:safavid_school
		this = religious_school:shadhili_school
		this = religious_school:suhrawardi_school
		this = religious_school:isawiyya_school
	}
}

country_has_sufism = { #Country scope
	custom_description = {
		text = country_has_sufism_text
		OR = {
			AND = {
				religion = { has_religious_schools = yes }
				religious_school ?= { is_sufi_school = yes }
			}
			any_invited_religious_figure ?= {
				religious_school = { is_sufi_school = yes }
			}
		}
	}
}

location_can_be_settled = { #location scope with scope:actor as the country
	dominant_culture = scope:actor.culture
	dominant_religion = scope:actor.religion
}