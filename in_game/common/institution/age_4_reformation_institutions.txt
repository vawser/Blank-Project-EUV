confessionalism = {
	age = age_4_reformation 
	
	
	can_spawn = {
		OR = {
			AND = {
				has_game_rule = institution_spawn_random_city
				location_rank = location_rank:city
			}
			AND = {
				has_game_rule = institution_spawn_fixed_historical
				this = location:augsburg
			}
			AND = {
				has_game_rule = institution_spawn_plausible
				OR = {
					continent = continent:europe
					sub_continent = sub_continent:north_africa
				}

				has_owner = yes
				has_building_with_at_least_one_level = printing_press_shop
				
				OR = {
					location_rank = location_rank:town
					location_rank = location_rank:city
				}
				
				dominant_religion = owner.religion
				dominant_religion = religion:catholic
				
				
						
				owner = {
					societal_value:spiritualist_vs_humanist < -25
				}
			}
		}
	
	
	}
	promote_chance = {
		add = {
			if = {
				limit = {
					num_pop_type:clergy > 10
				}
				value = average_location_literacy
				multiply = 10
			}
		}
		add = {
			value = num_pop_type:clergy
			multiply = 5
		}
	}
	
	#hardcoded spreads for optimisations..
	spread_from_friendly_coast_border_location = institution_base_spread_from_friendly_neighbor_with_mid
	spread_from_any_coast_border_location = institution_base_spread_from_neighbor_with_mid
	spread_from_any_import = institution_trade_spread_value_mid
	spread_from_was_possible_spawn = institution_spread_from_was_possible_spawn_mid
	spread_scale_on_control_if_owner_embraced = 2
	spread_embraced_to_capital = institution_total_embraced_to_capital_mid
	spread_to_market_member = institution_spread_to_market_member_mid	
}

global_trade = {
	age = age_4_reformation 
	
	can_spawn = {
		OR = {
			AND = {
				has_game_rule = institution_spawn_random_city
				location_rank = location_rank:city
			}
			AND = {
				has_game_rule = institution_spawn_fixed_historical
				this = location:lisbon
			}
			AND = {
				has_game_rule = institution_spawn_plausible
				has_institution = institution:banking
				has_institution = institution:new_world


				OR = {
					continent = continent:europe
					sub_continent = sub_continent:north_africa
				}

				is_market_center = yes
				location_rank = location_rank:city
				market = {
					total_goods_value_traded > 500
				}
			}
		}
	}
	

	promote_chance = {
		add = {
			value = average_location_literacy
		}

		add = {
			value = num_pop_type:burghers
			multiply = 5
		
		}
		add = {
			if = {
				limit = { is_port = yes }
				value = 5
			}
		}
	}
	
	#hardcoded spreads for optimisations..
	spread_from_friendly_coast_border_location = institution_base_spread_from_friendly_neighbor_with_mid
	spread_from_any_coast_border_location = institution_base_spread_from_neighbor_with_mid
	spread_from_any_import = institution_trade_spread_value_mid
	spread_from_was_possible_spawn = institution_spread_from_was_possible_spawn_mid
	spread_scale_on_control_if_owner_embraced = 2
	spread_embraced_to_capital = institution_total_embraced_to_capital_mid
	spread_to_market_member = institution_spread_to_market_member_mid	
}

artillery_institution = {
	age = age_4_reformation 
	
	can_spawn = {
		OR = {
			AND = {
				has_game_rule = institution_spawn_random_city
				location_rank = location_rank:city
			}
			AND = {
				has_game_rule = institution_spawn_fixed_historical
				this = location:constantinople
			}
			AND = {
				has_game_rule = institution_spawn_plausible
				has_institution = institution:professional_armies

				OR = {
					continent = continent:europe
					sub_continent = sub_continent:north_africa
				}

				has_building_with_at_least_one_level = gun_smith
				has_building_with_at_least_one_level = tools_guild
				
				owner = {
					societal_value:offensive_vs_defensive < -20
				}
			}
		}
	}
	
	promote_chance = {
		add = {
			value = average_location_literacy
		}
		add = {
			value = modifier:local_manpower
			multiply = 10
		}
	}
	
	#hardcoded spreads for optimisations..
	spread_from_friendly_coast_border_location = institution_base_spread_from_friendly_neighbor_with_mid
	spread_from_any_coast_border_location = institution_base_spread_from_neighbor_with_mid
	spread_from_any_import = institution_trade_spread_value_mid
	spread_from_was_possible_spawn = institution_spread_from_was_possible_spawn_mid
	spread_scale_on_control_if_owner_embraced = 2
	spread_embraced_to_capital = institution_total_embraced_to_capital_mid
	spread_to_market_member = institution_spread_to_market_member_mid
}





