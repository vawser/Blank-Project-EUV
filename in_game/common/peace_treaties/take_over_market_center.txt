peace_take_over_market_center = {
	cost = {
		add = {
			desc = "DIPLOREASON_BASE"
			value = 5
		}

		add = {
			desc = "game_concept_trade_income"
			value = scope:loser.monthly_trade_income
		}
		max = 100
	}

	potential = {
		scope:loser = {
			any_market_center_in_country = {
				any_location_in_market = { owner ?= scope:winner }
			}
		}
	}
	allow = {
	}

	effect = {
		scope:loser = {
			random_market_center_in_country = {
				limit = { 
					any_location_in_market = { owner ?= scope:winner }
				}
				if = {
					limit = {
						any_location_in_market = { this = scope:winner.capital }
					}
					relocate_market = scope:winner.capital
				}
				else = {
					ordered_location_in_market = {
						limit = { 
							has_owner = yes
							owner = scope:winner
						}
						order_by = population
						max = 1
	
						save_scope_as = target_location
					}
					relocate_market = scope:target_location
				}
			}
		}
	}

	ai_desire = {
		if = {
			limit = {
				scope:winner = {
					is_rival_of = scope:loser
				}
			}
			add = {
				desc = "game_concept_rival"
				value = 10
			}
		}
		if = {
			limit = {
				scope:winner.prestige < scope:loser.prestige
			}
			add = {
				desc = "game_concept_trade_income"
				value = scope:loser.monthly_trade_income
				subtract = scope:winner.monthly_trade_income
			}
		}
	}
}

