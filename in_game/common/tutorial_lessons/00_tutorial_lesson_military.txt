lesson_military = {
	chain = lesson_chain_basics
	start_automatically = no
	delay = 0
	gui_tag = "tutorial_military"

    #### MILITARY

    # Open Military panel
    lesson_military_0 = {
		text = "lesson_military_0_desc"
        highlight_widget = "military_tab_button"
		animation = center

		trigger_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_military_1
            
            trigger = {
                custom_tooltip = {
					text = "lesson_military_open_military"
					OR = {
                        is_widgetid_open = unit_overview
                        is_widgetid_open = military_objective_groups_view
                    }
				}
            }
		}

		effect = {
			hidden_effect = {
				set_tutorial_var = {
					name = tutorial_header
					value = red
				}
			}

			if = {
				limit = {
					OR = {
						is_player_playstyle = administrative
						is_player_playstyle = diplomatic
					}
				}
				capital = {
					create_sub_unit_of_category = sub_unit_category:army_infantry
				}
			}
		}
	}

	# If the player goes back, we don't want a trigger_transition,
    # instead, we want to show a version of the lesson with a
    # gui_transition so it doesn't automatically progress
    lesson_military_0b = {
		text = "lesson_military_0_desc"
        highlight_widget = "military_tab_button"
		
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_military_1
            
            enabled = {
                custom_tooltip = {
					text = "lesson_military_open_military"
				}
            }
		}
	}

    # Explain Military view
    lesson_military_1 = {
		text = "lesson_military_1_desc"
        highlight_widget = "military_tab_button"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_military_0b
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_military_2
		}
	}

    # Explain Manpower
    lesson_military_2 = {
		text = "lesson_military_2_desc"
		highlight_widget = "stat_manpower"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_military_1
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_military_war_0
		}
	}

    # # Explain Armies
    # lesson_military_3 = {
	# 	text = "lesson_military_3_desc"
    #     highlight_widget = "military_tab_button"

	# 	gui_transition = {
	# 		button_id = "back"
	# 		button_text = "tutorial_lesson_button_back"
	# 		target = lesson_military_2
	# 	}

	# 	gui_transition = {
	# 		button_id = "next"
	# 		button_text = "tutorial_lesson_button_next"
	# 		target = lesson_military_4
	# 	}
	# }

    # # Guide Player to Unit Specifics
    # lesson_military_4 = {
	# 	text = "lesson_military_4_desc"
    #     highlight_widget = "military_tab_button"
	# 	highlight_widget = "unit_header_button"

	# 	gui_transition = {
	# 		button_id = "back"
	# 		button_text = "tutorial_lesson_button_back"
	# 		target = lesson_military_3
	# 	}

	# 	trigger_transition = {
	# 		button_id = "next"
	# 		button_text = "tutorial_lesson_button_next"
	# 		target = lesson_military_5
            
    #         trigger = {
    #             custom_tooltip = {
	# 				text = "lesson_military_open_single_unit"
	# 				is_widgetid_open = single_unit_window
	# 			}
    #         }
	# 	}
	# }

	# # Guide Player to Unit Specifics
    # lesson_military_4b = {
	# 	text = "lesson_military_4_desc"
	# 	highlight_widget = "unit_header_button"
	# 	highlight_widget = "actions_tab"
	# 	highlight_widget = "unit_marker_for_army"

	# 	gui_transition = {
	# 		button_id = "back"
	# 		button_text = "tutorial_lesson_button_back"
	# 		target = lesson_military_3
	# 	}

	# 	gui_transition = {
	# 		button_id = "next"
	# 		button_text = "tutorial_lesson_button_next"
	# 		target = lesson_military_5
            
    #         enabled = {
    #             custom_tooltip = {
	# 				text = "lesson_military_open_single_unit"
	# 			}
    #         }
	# 	}
	# }

	# # Guide Player to Move Army
    # lesson_military_5 = {
	# 	text = "lesson_military_5_desc"
	# 	highlight_widget = "actions_tab"
	# 	highlight_widget = "unit_marker_for_army"

	# 	animation = far_right

	# 	gui_transition = {
	# 		button_id = "back"
	# 		button_text = "tutorial_lesson_button_back"
	# 		target = lesson_military_4b
	# 	}

	# 	trigger_transition = {
	# 		button_id = "next"
	# 		button_text = "tutorial_lesson_button_next"
	# 		target = lesson_military_6
            
    #         trigger = {
    #             custom_tooltip = {
	# 				text = "lesson_military_move_unit"
	# 				any_unit = {
	# 					is_moving = yes
	# 				}
	# 			}
    #         }
	# 	}
	# }

	# # Guide Player to Move Army fallback
	# lesson_military_5b = {
	# 	text = "lesson_military_5_desc"
	# 	highlight_widget = "actions_tab"
	# 	highlight_widget = "unit_marker_for_army"

	# 	gui_transition = {
	# 		button_id = "back"
	# 		button_text = "tutorial_lesson_button_back"
	# 		target = lesson_military_4b
	# 	}

	# 	gui_transition = {
	# 		button_id = "next"
	# 		button_text = "tutorial_lesson_button_next"
	# 		target = lesson_military_6
            
    #         enabled = {
    #             custom_tooltip = {
	# 				text = "lesson_military_move_unit"
	# 			}
    #         }
	# 	}
	# }

    # # Explain Panel
    # lesson_military_6 = {
	# 	text = "lesson_military_6_desc"
	# 	highlight_widget = "actions_tab"

	# 	gui_transition = {
	# 		button_id = "back"
	# 		button_text = "tutorial_lesson_button_back"
	# 		target = lesson_military_5b
	# 	}

	# 	gui_transition = {
	# 		button_id = "next"
	# 		button_text = "tutorial_lesson_button_next"
	# 		target = lesson_military_6b
	# 	}
	# }
    
    # # Explain Unit Stats
    # lesson_military_6b = {
	# 	text = "lesson_military_6b_desc"
	# 	highlight_widget = "unit_card_info"
	# 	highlight_widget = "actions_tab"

	# 	gui_transition = {
	# 		button_id = "back"
	# 		button_text = "tutorial_lesson_button_back"
	# 		target = lesson_military_6
	# 	}

	# 	gui_transition = {
	# 		button_id = "next"
	# 		button_text = "tutorial_lesson_button_next"
	# 		target = lesson_military_7
	# 	}
	# }

    # # Explain Actions & Objectives
    # lesson_military_7 = {
	# 	text = "lesson_military_7_desc"
	# 	highlight_widget = "actions_and_objectives"
	# 	highlight_widget = "actions_tab"
		
	# 	gui_transition = {
	# 		button_id = "back"
	# 		button_text = "tutorial_lesson_button_back"
	# 		target = lesson_military_6
	# 	}

	# 	gui_transition = {
	# 		button_id = "next"
	# 		button_text = "tutorial_lesson_button_next"
	# 		target = lesson_military_war_0
	# 	}
	# }

    # Explain Casus Belli
	lesson_military_war_0 = {
		text = "lesson_military_war_0_desc"
		animation = center

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_military_2
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_military_war_1
		}
	}

	lesson_military_war_1 = {
		text = "lesson_military_war_1_desc"
		
		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_military_war_0
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_military_war_2
		}
	}

	lesson_military_war_2 = {
		text = "lesson_military_war_2_desc"
		highlight_widget = "stat_exhaustion"
		
		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_military_war_1
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_military_war_3
		}
	}

	lesson_military_war_3 = {
		text = "lesson_military_war_3_desc"
		
		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_military_war_2
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_military_8
		}
	}

    # Guide Player to Geopolitics
    lesson_military_8 = {
		text = "lesson_military_8_desc"
		highlight_widget = "geopolitics_tab_button"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_military_war_3
		}

		trigger_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_military_9
            
            trigger = {
                custom_tooltip = {
					text = "lesson_military_open_geopolitics"
					OR = {
                        is_widgetid_open = expansion_lateralview
                        is_widgetid_open = diseases_lateralview
                        is_widgetid_open = maritime_lateralview
                    }
				}
            }
		}
	}

    # # Guide Player to Geopolitics Fallback
    # lesson_military_8b = {
	# 	text = "lesson_military_8_desc"
	# 	highlight_widget = "geopolitics_tab_button"
	# 	animation = center

	# 	gui_transition = {
	# 		button_id = "back"
	# 		button_text = "tutorial_lesson_button_back"
	# 		target = lesson_military_war_2
	# 	}

	# 	gui_transition = {
	# 		button_id = "next"
	# 		button_text = "tutorial_lesson_button_next"
	# 		target = lesson_military_9
            
    #         enabled = {
    #             custom_tooltip = {
	# 				text = "lesson_military_open_geopolitics"
	# 			}
    #         }
	# 	}
	# }

    # Explain Geopolitics
    lesson_military_9 = {
		text = "lesson_military_9_desc"
		highlight_widget = "geopolitics_tab_button"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_military_war_2
		}

		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_admin_27
		}
	}

	# Direct Player to Missions!
    lesson_admin_27 = {
        text = "lesson_admin_27_desc"
        highlight_widget = "government_tab_button"
        highlight_widget = "tab_missions"
		animation = center

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_military_9
		}

		trigger_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_admin_28
            trigger = {
                custom_tooltip = {
					text = "lesson_admin_open_government"
                    OR = {
                        is_widgetid_open = government_lateralview
                        is_widgetid_open = societal_values_lateralview
                        is_widgetid_open = mission_lateralview
                    }
				}
                custom_tooltip = {
                    text = "lesson_admin_open_missions"
					OR = {
						game_has_missions_enabled = no
                  	 	is_widgetid_open = mission_lateralview
					}
                }
            }
		}

		effect = {
			close_all_views = yes
		}
    }

	# Direct Player to Missions!
    lesson_admin_27b = {
        text = "lesson_admin_27_desc"
        highlight_widget = "government_tab_button"
        highlight_widget = "tab_missions"
		animation = center

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_military_9
		}
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_admin_28
            enabled = {
                custom_tooltip = {
					text = "lesson_admin_open_government"
				}
                custom_tooltip = {
                    text = "lesson_admin_open_missions"
                }
            }
		}
    }
	
	lesson_admin_28 = {
        text = "lesson_admin_28c_desc"
		highlight_widget = "button_conqueror_mission"

		gui_transition = {
			button_id = "back"
			button_text = "tutorial_lesson_button_back"
			target = lesson_admin_27b
		}
		trigger_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_next"
			target = lesson_admin_29
            trigger = {
                custom_tooltip = {
					text = "lesson_military_has_mission_active"
					OR = {
						has_any_mission_active = yes
						game_has_missions_enabled = no
					}
				}
            }
		}
    }

	lesson_admin_29 = {
        text = "lesson_admin_29_desc"
		gui_transition = {
			button_id = "next"
			button_text = "tutorial_lesson_button_complete_basics"
			target = lesson_finish
		}
    }
}