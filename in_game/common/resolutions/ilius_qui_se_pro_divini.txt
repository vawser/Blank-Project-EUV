illius_qui_se_pro_divini = {

	international_organization_type = catholic_church

	potential = {
		papacy_active = yes
	}

	allow = {
		scope:actor = {
			is_member_of_international_organization = international_organization:catholic_church
		}
		religion:catholic = {
			NOT = { has_religion_modifier = illius_qui_se_pro_divini }
			modifier:curia_actions_blocked = no
		}
	}

	can_vote = {
		international_organization:catholic_church = {
			country_has_special_status = {
				type = special_status:curia
				country = scope:actor
			}
		}
	}

	votes = {
		add = {
			desc = "[cardinal_s|e]"
			value = scope:actor.num_cardinals
		}
	}

	proposal_price = price:propose_curia_action

	months = 6

	select_trigger = {
		looking_for_a = international_organization
		target_flag = recipient
		name = "choose_international_organization"
		column = {
			data = name
		}
		visible = {
			international_organization_type = international_organization_type:catholic_church
		}
		enabled = {
		}
	}

	select_trigger = {
		looking_for_a = boolean
		target_flag = vote
		name = "select_vote"
		column = {
			data = name
		}
		visible = {
		}
		enabled = {
			trigger_if = {
				limit = {
					this = no
				}
				#can't select "no" when proposing something
				scope:recipient = {
					resolution_is_active = resolution:illius_qui_se_pro_divini
				}
			}
			trigger_else = {
				always = yes
			}
		}
	}

	effect = {
		religion:catholic = {
			add_religion_modifier = {
				modifier = illius_qui_se_pro_divini
				years = 10
				mode = replace
			}
		}
	}
	
	reject_effect = {
		scope:proposer = {
			add_prestige = prestige_extreme_penalty
		}
	}

	ai_will_do = {
		add = -20
		scope:actor = {
			if = {
				limit = { modifier:bias_for_militarist_policies > 0 }
				add = {
					desc = "PROVIDES_POWER_OPPORTUNITY"
					value = {
						value = modifier:bias_for_militarist_policies
						if = {
							limit = {
								modifier:aggressiveness_modifier > 0
								modifier:aggressiveness_modifier > modifier:carefulness_modifier
							}
							multiply = {
								value = modifier:aggressiveness_modifier
								subtract = modifier:carefulness_modifier
							}
						}
					}
				}
			}
		}
		#bias for the "no" vote, but only for votes, not for proposals.
		if = {
			limit = {
				exists = scope:proposer
			}
			if = {
				limit = {
					scope:vote = no
				}
				multiply = {
					desc = "BIAS_FOR_VOTE_AGAINST_IT"
					value = -1
				}
			}
		}
	}
	ai_proposer_risk = {
		value = "scope:actor.currency_utility(prestige|-20)"
	}
}
