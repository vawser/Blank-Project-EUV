dei_gratia_rex = {
	international_organization_type = catholic_church


	potential = {
		papacy_active = yes
	}

	allow = {
		scope:actor = {
			is_member_of_international_organization = international_organization:catholic_church
		}
		religion:catholic = {
			NOT = { has_religion_modifier = dei_gratia_rex }
			modifier:curia_actions_blocked = no
		}
	}

	votes = {
		add = {
			desc = "[cardinal_s|e]"
			value = scope:actor.num_cardinals
		}
	}

	can_vote = {
		international_organization:catholic_church = {
			country_has_special_status = {
				type = special_status:curia
				country = scope:actor
			}
		}
	}

	proposal_price = price:propose_curia_action

	months = 6

	select_trigger = {
		looking_for_a = international_organization
		target_flag = recipient
		name = "choose_international_organization"
		column = {
			data = name
		}
		visible = {
			international_organization_type = international_organization_type:catholic_church
		}
		enabled = {
		}
	}

	select_trigger = {
		looking_for_a = boolean
		target_flag = vote
		name = "select_vote"
		column = {
			data = name
		}
		visible = {
		}
		enabled = {
			trigger_if = {
				limit = {
					this = no
				}
				#can't select "no" when proposing something
				scope:recipient = {
					resolution_is_active = resolution:dei_gratia_rex
				}
			}
			trigger_else = {
				always = yes
			}
		}
	}


	effect = {
		religion:catholic = {
			add_religion_modifier = {
				modifier = dei_gratia_rex
				years = 10
				mode = replace
			}
		}
	}
	
	reject_effect = {
		scope:proposer = {
			add_prestige = prestige_extreme_penalty
		}
	}

	ai_will_do = {
		scope:actor = {
			add = {
				desc = "DIPLOREASON_REBELS"
				value = num_rebels
				add = 1
				multiply = 5
			}
		}
		#bias for the "no" vote, but only for votes, not for proposals.
		if = {
			limit = {
				exists = scope:proposer
			}
			if = {
				limit = {
					scope:vote = no
				}
				multiply = {
					desc = "BIAS_FOR_VOTE_AGAINST_IT"
					value = -1
				}
			}
		}
	}
	ai_proposer_risk = {
		value = "scope:actor.currency_utility(prestige|-20)"
	}
}
