apostolicae_servitutis = {
	international_organization_type = catholic_church

	potential = {
		papacy_active = yes
	}

	allow = {
		scope:actor ?= {
			is_member_of_international_organization = international_organization:catholic_church
		}
		religion:catholic = {
			NOT = { has_religion_modifier = apostolicae_servitutis }
			modifier:curia_actions_blocked = no
		}
	}

	votes = {
		add = {
			desc = "[cardinal_s|e]"
			value = scope:actor.num_cardinals
		}
	}

	can_vote = {
		international_organization:catholic_church = {
			country_has_special_status = {
				type = special_status:curia
				country = scope:actor
			}
		}
	}

	proposal_price = price:propose_curia_action

	months = 6

	select_trigger = {
		looking_for_a = international_organization
		target_flag = recipient
		name = "choose_international_organization"
		column = {
			data = name
		}
		visible = {
			international_organization_type = international_organization_type:catholic_church
		}
	}

	select_trigger = {
		looking_for_a = boolean
		target_flag = vote
		name = "select_vote"
		column = {
			data = name
		}
		visible = {
		}
		enabled = {
			trigger_if = {
				limit = {
					this = no
				}
				#can't select "no" when proposing something
				scope:recipient = {
					resolution_is_active = resolution:apostolicae_servitutis
				}
			}
			trigger_else = {
				always = yes
			}
		}
	}

	effect = {
		religion:catholic = {
			add_religion_modifier = {
				modifier = apostolicae_servitutis
				years = 10
				mode = replace
			}
		}
	}
	
	reject_effect = {
		scope:proposer = {
			add_prestige = prestige_extreme_penalty
		}
	}

	# ai_desire is how much an AI would like this action to pass.
	# It is evaluated in the scope of the AI. Proposing country is scope:actor
	ai_will_do = {
		#base
		add = {
			desc = "VOTE_BASE_VALUE"
			value = 50
		}

		scope:actor = {
			# multiply by 1-satisfaction
			multiply = {
				value = estate_satisfaction:clergy_estate
				multiply = -1
				add = 1
			}
			multiply = "estate_power(estate_type:clergy_estate)"
		}
		#bias for the "no" vote, but only for votes, not for proposals.
		if = {
			limit = {
				exists = scope:proposer
			}
			if = {
				limit = {
					scope:vote = no
				}
				multiply = {
					desc = "BIAS_FOR_VOTE_AGAINST_IT"
					value = -1
				}
			}
		}
	}

	# ai_proposer_risk will be multiplied by the estimated probability of rejection
	ai_proposer_risk = {
		value = "scope:actor.currency_utility(prestige|-20)"
	}

}
