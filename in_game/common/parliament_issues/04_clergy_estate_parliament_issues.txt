
sponsor_a_confucian_academy = {
	estate = clergy_estate

	modifier_when_in_debate = {
		research_speed_modifier = 0.05
		monthly_towards_innovative = societal_value_huge_monthly_move #moves value by 3 over the duration
	}

	allow = {
		OR = {
			parliament_type = parliament_type:council
			parliament_type = parliament_type:autocratic_parliament
			parliament_type = parliament_type:constitutional_parliament
		}
		has_advance = confucian_academy_advance
		any_owned_location = {
			NOT = { has_building = building_type:confucian_academy }
			OR = {
				location_rank = location_rank:town
				location_rank = location_rank:city
			}
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					societal_value:traditionalist_vs_innovative > 30
				}
				value = 2
			}
		}
		add = {
			if = {
				limit = {
					total_effective_building_levels:confucian_academy < 1
				}
				value = 4
			}
		}
		multiply = {
			if = {
				limit = {
					societal_value:traditionalist_vs_innovative < 0
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		ordered_owned_location = {
			order_by = {
				value = population
				if = {
					limit = { location_rank = location_rank:city }
					multiply = 5
				}
			}
			max = 1
			limit = {
				NOT = { has_building = building_type:confucian_academy }
				OR = {
					location_rank = location_rank:town
					location_rank = location_rank:city
				}
			}
			construct_building = {
				building_type = building_type:confucian_academy
				cost_multiplier = 0.5
				cost_multiplier_reason = "game_concept_parliament_issue"
			}
			
		}
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

sponsor_a_cathedral = {
	estate = clergy_estate

	modifier_when_in_debate = {
		monthly_towards_spiritualist = societal_value_huge_monthly_move #moves value by 3 over the duration
	}

	allow = {
		has_advance = cathedral_advance
		any_owned_location = {
			NOT = { has_building = building_type:cathedral }
			OR = {
				location_rank = location_rank:town
				location_rank = location_rank:city
			}
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					societal_value:spiritualist_vs_humanist < -30
				}
				value = 2
			}
		}
		
		add = {
			if = {
				limit = {
					total_effective_building_levels:cathedral < 1
				}
				value = 4
			}
		}
		multiply = {
			if = {
				limit = {
					societal_value:spiritualist_vs_humanist > 30
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		ordered_owned_location = {
			order_by = {
				value = population
				if = {
					limit = { location_rank = location_rank:city }
					multiply = 5
				}
			}
			max = 1
			limit = {
				NOT = { has_building = building_type:cathedral }
				OR = {
					location_rank = location_rank:town
					location_rank = location_rank:city
				}
			}
			construct_building = {
				building_type = building_type:cathedral
				cost_multiplier = 0.5
				cost_multiplier_reason = "game_concept_parliament_issue"
			}
			
		}
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}


expand_forestry_operations = {
	estate = clergy_estate

	modifier_when_in_debate = {
		expand_rgo_forestry_cost_modifier = -0.33
		global_rgo_build_time = -0.2
	}

	allow = {
		any_owned_location = {
			raw_material = {
				goods_method = forestry
			}
			is_full_expanded_rgo = no
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					societal_value:capital_economy_vs_traditional_economy > 30
				}
				value = 2
			}
		}
		multiply = {
			if = {
				limit = {
					societal_value:capital_economy_vs_traditional_economy < -60
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		ordered_owned_location = {
			limit = {
                raw_material = {
                    goods_method = forestry
                }
				is_full_expanded_rgo = no
			}
			order_by = population
			max = {
				value = num_provinces
				multiply = 0.05
				add = 1
			}
			change_max_raw_material_workers = 1
			change_prosperity = prosperity_mild_bonus
		}
	}

	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

support_clergy_cabinet = {
	estate = clergy_estate

	modifier_when_in_debate = {
		country_cabinet_efficiency = 0.2
		stability_decay = -0.001
	}

	allow = {
		OR = {
			parliament_type = parliament_type:council
			parliament_type = parliament_type:estate_parliament
			parliament_type = parliament_type:dutch_parliament
			parliament_type = parliament_type:plc_parliament
			parliament_type = parliament_type:autocratic_parliament
			parliament_type = parliament_type:constitutional_parliament
		}
		any_character = {
			in_cabinet = yes
			has_estate = estate_type:clergy_estate
		}
		NOR = {
			current_age = age_4_reformation
			current_age = age_5_absolutism
			current_age = age_6_revolutions
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					has_advance = government_size_renaissance
				}
				value = 2
			}
		}
		multiply = {
			if = {
				limit = {
					societal_value:spiritualist_vs_humanist > 0
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		random_cabinet_character = {
			limit = {
				has_estate = estate_type:clergy_estate
			}
			add_adm = 5
			add_dip = 5
			add_mil = 5
		}
		change_societal_value = {
			type = spiritualist_vs_humanist
			value = societal_value_move_to_left
		}
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

promote_state_religion = {
	estate = clergy_estate

	modifier_when_in_debate = {
		clergy_estate_target_satisfaction = huge_permanent_target_satisfaction
		clergy_estate_satisfaction_recovery = 0.025
	}

	allow = {
		religious_unity <= 0.9
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					religious_unity <= 0.5
				}
				value = 2
			}
		}
		multiply = {
			if = {
				limit = {
					religious_unity >= 0.8
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
		
	}
	
	on_debate_passed = {
		add_country_modifier = {
			modifier = missionary_zeal
			years = 10
			mode = add_and_extend
		}
		ordered_pop = {
			limit = {
				religion != root.religion
				NOT = {
					pop_type = pop_type:slaves
				}
				is_not_protected_from_conversion = yes
			}
			order_by = {
				value = pop_size
				multiply = location.proximity
			}
			max = 1
			check_range_bounds = no
			split_pop = {
				fraction = { 0.1 0.3 }
				religion = root.religion
			}
		}
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

expand_diplomatic_corps_religion = {
	estate = clergy_estate

	modifier_when_in_debate = {
		diplomatic_reputation = diplomatic_reputation_mild_bonus
	}

	allow = {
		OR = {
			current_age = age_3_discovery
			current_age = age_4_reformation
			current_age = age_5_absolutism
		}
        root.religion = {
            any_country_in_religion = {
                NOT = { has_target_casus_belli_on_us = ROOT }
                NOT = { is_subject_of = ROOT }
                NOT = { is_rival_of = ROOT }
                NOT = { is_enemy_of = ROOT }
            }
        }
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					num_of_diplomats <= 2
				}
				value = 2
			}
		}
		add = {
			if = {
				limit = {
					is_situation_active = situation:reformation
					can_see_situation = situation:reformation
				}
			}
		}
		multiply = {
			if = {
				limit = {
					num_of_diplomats >= 3
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}

	on_debate_passed = {
		add_diplomats = 5
        root.religion = {
            ordered_country_in_religion = {
                limit = {
                    NOT = {
                        has_target_casus_belli_on_us = ROOT
                    }
                    NOT = {
                        is_subject_of = ROOT
                    }
                    NOT = {
                        is_rival_of = ROOT
                    }
                    NOT = {
                        is_enemy_of = ROOT
                    }
                }
                max = 3
                check_range_bounds = no
                order_by = {
                    value = expected_army_size
                    multiply = 1
                }
                add_opinion = {
                    target =  ROOT
                    modifier = careful_diplomatic_manouvering
                }
            }
        }
	}
	
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

promote_clergy_member = {
	estate = clergy_estate

	modifier_when_in_debate = {
		clergy_estate_target_satisfaction = huge_permanent_target_satisfaction
	}

	allow = {
		"estate_power(estate_type:clergy_estate)" > 0
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					has_estate_privilege = estate_privilege:clergy_in_administration
				}
				value = 2
			}
		}
		add = {
			if = {
				limit = {
					has_estate_privilege = estate_privilege:clergy_religious_state
				}
				value = 2
			}
		}
		
	}
	
	on_debate_passed = {
		custom_tooltip = promote_clergy_member_passed.tt
		hidden_effect = {
			create_character = {
				estate = estate_type:clergy_estate
				adm = { 20 80 }
				dip = { 50 80 }
				mil = { 10 50 }
			}
		}
		
	}

	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

support_religious_art = {
	estate = clergy_estate

	modifier_when_in_debate = {
		cultural_tradition_modifier = 0.33
		monthly_towards_spiritualist = societal_value_huge_monthly_move #moves value by 3 over the duration
	}

	allow = {
		OR = {
			current_age = age_3_discovery
			current_age = age_4_reformation
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					has_advance = patron_of_art
				}
				value = 2
			}
		}
		multiply = {
			if = {
				limit = {
					societal_value:spiritualist_vs_humanist > 0
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		random_list = {
			1 = {
				create_character = {
					estate = estate_type:clergy_estate
					artist = iconographer
					artist_skill = { 0.2 0.9 }
				}
			}
			1 = {
				create_character = {
					estate = estate_type:clergy_estate
					artist = composer
					artist_skill = { 0.2 0.9 }
				}
			}
			1 = {
				create_character = {
					estate = estate_type:clergy_estate
					artist = writer
					artist_skill = { 0.2 0.9 }
				}
			}
		}
		
		change_societal_value = {
			type = spiritualist_vs_humanist
			value = societal_value_move_to_left
		}
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

support_religious_education = {
	estate = clergy_estate

	modifier_when_in_debate = {
		global_monthly_literacy = 0.05
		monthly_towards_innovative = societal_value_huge_monthly_move #moves value by 3 over the duration
	}

	allow = {
		OR = {
			parliament_type = parliament_type:council
			parliament_type = parliament_type:estate_parliament
			parliament_type = parliament_type:dutch_parliament
			parliament_type = parliament_type:plc_parliament
			parliament_type = parliament_type:autocratic_parliament
		}
		government_type = government_type:theocracy
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					has_advance = educated_bureaucrats
				}
				value = 2
			}
		}
		add = {
			if = {
				limit = {
					has_policy = pursuit_of_knowledge_policy
				}
				value = 2
			}
		}
		multiply = {
			if = {
				limit = {
					NOT = {
						OR = {
							has_advance = innovativeness
							has_advance = humanism
						}
					}
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		add_research_progress = research_progress_mild_bonus
		custom_tooltip = support_religious_education_passed.tt
		hidden_effect = {
			every_pop = {
				limit = {
					owner = root
					religion = root.religion
					OR = {
						pop_type = pop_type:clergy
						pop_type = pop_type:peasants
					}
				}
				add_pop_satisfaction = pop_satisfaction_mild_bonus
			}
		}
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}