
promote_castle_building = {
	estate = nobles_estate

	modifier_when_in_debate = {
		global_fort_build_buildings_cost = -0.5
		monthly_towards_defensive = societal_value_huge_monthly_move #moves value by 3 over the duration
	}

	allow = {
		has_advance = castle_advance
		NOR = {
			has_advance = bastion_advance
			has_advance = star_fort_advance
			has_advance = fortress_advance
		}
		NOT = {
			has_country_modifier = fortification_works_modifier
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					num_locations > 5
				}
				value = 2
			}
		}
		
		add = {
			if = {
				limit = {
					num_locations < 2
				}
				value = -10
			}
		}
		add = {
			if = {
				limit = {
					monthly_balance < 1
				}
				value = -10
			}
		}
		multiply = {
			if = {
				limit = {
					societal_value:offensive_vs_defensive < -30
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		add_country_modifier = {
			modifier = fortification_works_modifier
			years = 10
			mode = add_and_extend
		}
		
	}
	
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

promote_bastion_building = {
	estate = nobles_estate

	modifier_when_in_debate = {
		global_fort_build_buildings_cost = -0.5
		monthly_towards_defensive = societal_value_huge_monthly_move #moves value by 3 over the duration
	}

	allow = {
		has_advance = bastion_advance
		NOR = {
			has_advance = star_fort_advance
			has_advance = fortress_advance
		}
		NOT = {
			has_country_modifier = fortification_works_modifier
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					num_locations > 5
				}
				value = 2
			}
		}
		add = {
			if = {
				limit = {
					num_locations < 2
				}
				value = -10
			}
		}
		add = {
			if = {
				limit = {
					monthly_balance < 4
				}
				value = -10
			}
		}
		multiply = {
			if = {
				limit = {
					societal_value:offensive_vs_defensive < -30
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		add_country_modifier = {
			modifier = fortification_works_modifier
			years = 10
			mode = add_and_extend
		}
	}
	
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

promote_star_fort_building = {
	estate = nobles_estate

	modifier_when_in_debate = {
		global_fort_build_buildings_cost = -0.5
		monthly_towards_defensive = societal_value_huge_monthly_move #moves value by 3 over the duration
	}

	allow = {
		has_advance = star_fort_advance
		NOT = {
			has_advance = fortress_advance
		}
		NOT = {
			has_country_modifier = fortification_works_modifier
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					num_locations > 5
				}
				value = 2
			}
		}
		add = {
			if = {
				limit = {
					num_locations < 2
				}
				value = -10
			}
		}
		add = {
			if = {
				limit = {
					monthly_balance < 8
				}
				value = -10
			}
		}
		multiply = {
			if = {
				limit = {
					societal_value:offensive_vs_defensive < -30
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		add_country_modifier = {
			modifier = fortification_works_modifier
			years = 10
			mode = add_and_extend
		}
	}
	
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

promote_fortress_building = {
	estate = nobles_estate

	modifier_when_in_debate = {
		global_fort_build_buildings_cost = -0.5
		monthly_towards_defensive = societal_value_huge_monthly_move #moves value by 3 over the duration
	}

	allow = {
		has_advance = fortress_advance
		NOT = {
			has_country_modifier = fortification_works_modifier
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					num_locations > 5
				}
				value = 2
			}
		}
		add = {
			if = {
				limit = {
					num_locations < 2
				}
				value = -10
			}
		}
		add = {
			if = {
				limit = {
					monthly_balance < 12
				}
				value = -10
			}
		}
		multiply = {
			if = {
				limit = {
					societal_value:offensive_vs_defensive < -30
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		add_country_modifier = {
			modifier = fortification_works_modifier
			years = 10
			mode = add_and_extend
		}
	}
	
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

sponsor_a_opera_house = {
	estate = nobles_estate

	modifier_when_in_debate = {
			cultural_tradition_modifier = 0.33
			monthly_towards_aristocracy = societal_value_huge_monthly_move #moves value by 3 over the duration
	}

	allow = {
		OR = {
			parliament_type = parliament_type:estate_parliament
			parliament_type = parliament_type:dutch_parliament
			parliament_type = parliament_type:plc_parliament
			parliament_type = parliament_type:autocratic_parliament
			parliament_type = parliament_type:constitutional_parliament
		}
		has_advance = opera_house_advance
		any_owned_location = {
			NOT = { has_building = building_type:opera_house }
			OR = {
				location_rank = location_rank:town
				location_rank = location_rank:city
			}
		}
		NOT = {
			has_policy = strict_censorship
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					total_effective_building_levels:opera_house < 1
				}
				value = 2
			}
		}
		
		add = {
			if = {
				limit = {
					has_policy = limited_censorship
				}
				value = 1
			}
		}
		add = {
			if = {
				limit = {
					has_policy = no_censorship
				}
				value = 2
			}
		}
		multiply = {
			if = {
				limit = {
					culture = {
						cultural_tradition < 20
					}
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		ordered_owned_location = {
			order_by = {
				value = population
				if = {
					limit = { location_rank = location_rank:city }
					multiply = 5
				}
			}
			max = 1
			limit = {
				NOT = { has_building = building_type:opera_house }
				OR = {
					location_rank = location_rank:town
					location_rank = location_rank:city
				}
			}
			construct_building = {
				building_type = building_type:opera_house
				cost_multiplier = 0.5
				cost_multiplier_reason = "game_concept_parliament_issue"
			}
			
		}
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

gravel_road_development = {
	estate = nobles_estate

	modifier_when_in_debate = {
		global_road_building_time = -0.2
		build_gravel_road_cost_modifier = -0.2
	}

	allow = {
		OR = {
			parliament_type = parliament_type:assembly
			parliament_type = parliament_type:council
		}
		NOR = {
			has_advance = paved_road_advance
			has_advance = modern_road_advance
			has_advance = railroad_advance
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					num_locations > 5
				}
				value = 2
			}
		}
		
		add = {
			if = {
				limit = {
					num_locations < 2
				}
				value = -10
			}
		}
	}
	
	on_debate_passed = {
		change_societal_value = { 
			type = centralization_vs_decentralization
			value = societal_value_move_to_left
		}
		
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

paved_road_development = {
	estate = nobles_estate

	modifier_when_in_debate = {
		global_road_building_time = -0.2
		build_paved_road_cost_modifier = -0.2
	}

	allow = {
		OR = {
			parliament_type = parliament_type:estate_parliament
			parliament_type = parliament_type:dutch_parliament
			parliament_type = parliament_type:plc_parliament
			parliament_type = parliament_type:autocratic_parliament
			parliament_type = parliament_type:constitutional_parliament
		}
		has_advance = paved_road_advance
		NOR = {
			has_advance = modern_road_advance
			has_advance = railroad_advance
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					num_locations > 5
				}
				value = 2
			}
		}
		add = {
			if = {
				limit = {
					num_locations < 2
				}
				value = -10
			}
		}
	}
	
	on_debate_passed = {
		change_societal_value = { 
			type = centralization_vs_decentralization
			value = societal_value_minor_move_to_left
		}
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

expand_farming_operations = {
	estate = nobles_estate

	modifier_when_in_debate = {
		expand_rgo_farming_cost_modifier = -0.33
		global_rgo_build_time = -0.2
	}

	allow = {
		any_owned_location = {
			raw_material = {
				goods_method = farming
			}
			is_full_expanded_rgo = no
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					societal_value:capital_economy_vs_traditional_economy > 30
				}
				value = 2
			}
		}
		multiply = {
			if = {
				limit = {
					societal_value:capital_economy_vs_traditional_economy < -60
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		ordered_owned_location = {
			limit = {
				raw_material = {
					goods_method = farming
				}
				is_full_expanded_rgo = no
			}
			order_by = population
			max = {
				value = num_provinces
				multiply = 0.05
				add = 1
			}
			change_max_raw_material_workers = 1
			change_prosperity = prosperity_mild_bonus
		}
	}

	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

promote_integration = {
	estate = nobles_estate

	modifier_when_in_debate = {
		global_integration_speed_modifier = 0.2
	}

	allow = {
		OR = {
			parliament_type = parliament_type:council
			parliament_type = parliament_type:estate_parliament
			parliament_type = parliament_type:dutch_parliament
			parliament_type = parliament_type:plc_parliament
			parliament_type = parliament_type:autocratic_parliament
			parliament_type = parliament_type:constitutional_parliament
		}
		any_owned_location = {
			integration_level = conquered
			integration_progress > 0
			integration_progress <= 60
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					at_war = no
				}
				value = 2
			}
		}
		
		multiply = {
			if = {
				limit = {
					at_war = yes
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		ordered_owned_location = {
			order_by = population
			max = 1
			check_range_bounds = no
			limit = {
				integration_level = conquered
				integration_progress > 0
				integration_progress <= 75
			}
			change_integration_progress = 20
		}
		
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

back_the_war_effort = {
	estate = nobles_estate

	modifier_when_in_debate = {
		regiment_reinforcement_speed = 0.1
	}

	allow = {
		at_war = yes
	}
	chance = {
		add = 4
		add = {
			if = {
				limit = {
					war_exhaustion > 5
				}
				value = 5
			}
		}
		
		multiply = {
			if = {
				limit = {
					war_exhaustion <= 0.5
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		add_war_exhaustion = war_exhaustion_severe_bonus
		
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

finance_the_armory = {
	estate = nobles_estate

	modifier_when_in_debate = {
		global_manpower_modifier = 0.5
	}

	allow = {
		OR = {
			parliament_type = parliament_type:council
			parliament_type = parliament_type:estate_parliament
			parliament_type = parliament_type:dutch_parliament
			parliament_type = parliament_type:plc_parliament
			parliament_type = parliament_type:autocratic_parliament
			parliament_type = parliament_type:constitutional_parliament
		}
		has_advance = armory_advance
		NOT = {
			has_advance = barracks_advance
		}
		any_owned_non_rural_location = {
			owner = { has_primary_or_accepted_culture = prev.dominant_culture }
			NOT = { has_building = building_type:armory }
		}
	}
	chance = {
		add = 1
		add = {
			if = {
				limit = {
					total_effective_building_levels:armory < 6
				}
				value = 5
			}
		}
		
		add = {
			if = {
				limit = {
					max_manpower > 0.5
					manpower_percentage < 0.5
				}
				add = 2
			}
		}
		multiply = {
			if = {
				limit = {
					max_manpower > 0.5
					manpower_percentage >= 0.8
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		ordered_owned_location = {
			order_by = population
			max = {
				value = num_provinces
				multiply = 0.1
				add = 1
			}
			limit = {
				owner = { has_primary_or_accepted_culture = prev.dominant_culture }
				NOT = { has_building = building_type:armory }
				OR = {
					location_rank = location_rank:town
					location_rank = location_rank:city
				}
			}
			construct_building = {
				building_type = building_type:armory
				cost_multiplier = 0.5
				cost_multiplier_reason = "game_concept_parliament_issue"
			}
			
		}
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

expand_barracks = {
	estate = nobles_estate

	modifier_when_in_debate = {
		global_manpower_modifier = 0.5
	}

	allow = {
		OR = {
			parliament_type = parliament_type:council
			parliament_type = parliament_type:estate_parliament
			parliament_type = parliament_type:dutch_parliament
			parliament_type = parliament_type:plc_parliament
			parliament_type = parliament_type:autocratic_parliament
			parliament_type = parliament_type:constitutional_parliament
		}
		has_advance = barracks_advance
		any_owned_non_rural_location = {
			owner = { has_primary_or_accepted_culture = prev.dominant_culture }
			NOT = { has_building = building_type:barracks }
		}
	}
	chance = {
		add = 1
		add = {
			if = {
				limit = {
					total_effective_building_levels:barracks < 6
				}
				value = 5
			}
		}
		add = {
			if = {
				limit = {
					max_manpower > 0.5
					manpower_percentage < 0.5
				}
				add = 2
			}
		}
		multiply = {
			if = {
				limit = {
					max_manpower > 0.5
					manpower_percentage >= 0.8
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		ordered_owned_location = {
			order_by = population
			max = {
				value = num_provinces
				multiply = 0.1
				add = 1
			}
			limit = {
				owner = { has_primary_or_accepted_culture = prev.dominant_culture }
				NOT = { has_building = building_type:barracks }
				OR = {
					location_rank = location_rank:town
					location_rank = location_rank:city
				}
			}
			construct_building = {
				building_type = building_type:barracks
				cost_multiplier = 0.5
				cost_multiplier_reason = "game_concept_parliament_issue"
			}
		}
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

host_army_excercises = {
	estate = nobles_estate

	modifier_when_in_debate = {
		army_tradition_decay = -0.001
	}

	allow = {
		at_war = no
		OR = {
			parliament_type = parliament_type:estate_parliament
			parliament_type = parliament_type:dutch_parliament
			parliament_type = parliament_type:plc_parliament
			parliament_type = parliament_type:autocratic_parliament
			parliament_type = parliament_type:constitutional_parliament
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					has_advance = military_drill
				}
				value = 2
			}
		}
		
		multiply = {
			if = {
				limit = {
					NOT = {
						has_embraced_institution = institution:professional_armies
					}
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		add_army_tradition = army_tradition_extreme_bonus
		
	}
	
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

promote_noble_officers = {
	estate = nobles_estate

	modifier_when_in_debate = {
		nobles_estate_target_satisfaction = huge_permanent_target_satisfaction
	}

	allow = {
		OR = {
			parliament_type = parliament_type:estate_parliament
			parliament_type = parliament_type:dutch_parliament
			parliament_type = parliament_type:plc_parliament
			parliament_type = parliament_type:autocratic_parliament
		}
		has_estate_privilege = estate_privilege:noble_leaders_only
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					NOT = {
						any_character = {
							mil > 60
						}
					}
				}
				value = 2
			}
		}
		
		add = {
			if = {
				limit = {
					has_estate_privilege = estate_privilege:primacy_of_nobility
				}
				value = 2
			}
		}
	}
	
	on_debate_passed = {
		custom_tooltip = promote_noble_officers_passed.tt
		hidden_effect = {
			create_character = {
				estate = estate_type:nobles_estate
				adm = { 20 60 }
				dip = { 20 60 }
				mil = { 50 90 }
			}
		}
		
	}

	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}	
}

support_noble_cabinet = {
	estate = nobles_estate

	modifier_when_in_debate = {
		country_cabinet_efficiency = 0.2
		set_cabinet_member_cost_modifier = -0.5
	}

	allow = {
		OR = {
			parliament_type = parliament_type:council
			parliament_type = parliament_type:estate_parliament
			parliament_type = parliament_type:dutch_parliament
			parliament_type = parliament_type:plc_parliament
			parliament_type = parliament_type:autocratic_parliament
			parliament_type = parliament_type:constitutional_parliament
		}
		any_character = {
			in_cabinet = yes
			has_estate = estate_type:nobles_estate
		}
		NOR = {
			current_age = age_4_reformation
			current_age = age_5_absolutism
			current_age = age_6_revolutions
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					has_advance = government_size_renaissance
				}
				value = 2
			}
		}
		
		multiply = {
			if = {
				limit = {
					societal_value:aristocracy_vs_plutocracy > 0
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		random_cabinet_character = {
			limit = {
				has_estate = estate_type:nobles_estate
			}
			add_adm = 5
			add_dip = 5
			add_mil = 5
		}
		change_societal_value = {
			type = aristocracy_vs_plutocracy
			value = societal_value_move_to_left
		}
		
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

expand_diplomatic_corps_minors = {
	estate = nobles_estate

	modifier_when_in_debate = {
		diplomatic_reputation = diplomatic_reputation_mild_bonus
	}

	allow = {
		OR = {
			current_age = age_1_traditions
			current_age = age_2_renaissance
			current_age = age_3_discovery
		}
		any_neighbor_country = {
			NOT = { has_target_casus_belli_on_us = ROOT }
			NOT = { is_allied_with = { target = ROOT } }
			NOT = { is_subject_of = ROOT }
			NOT = { is_rival_of = ROOT }
			NOT = { is_enemy_of = ROOT }
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					num_of_diplomats <= 3
				}
				value = 4
			}
		}
		multiply = {
			if = {
				limit = {
					num_of_diplomats >= 5
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		add_diplomats = 5
		ordered_neighbor_country = {
			limit = {
				NOT = {
					has_target_casus_belli_on_us = ROOT
				}
				NOT = {
					is_allied_with = {
						target = ROOT
					}
				}
				NOT = {
					is_subject_of = ROOT
				}
				NOT = {
					is_rival_of = ROOT
				}
				NOT = {
					is_enemy_of = ROOT
				}
			}
			max = 3
			check_range_bounds = no
			order_by = {
				value = expected_army_size
				multiply = -1
			}
			add_opinion = {
				target =  ROOT
				modifier = careful_diplomatic_manouvering
			}
		}
		
	}
	
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

support_nobles_art = {
	estate = nobles_estate

	modifier_when_in_debate = {
		nobles_estate_target_satisfaction = huge_permanent_target_satisfaction
		nobles_estate_satisfaction_recovery = 0.025
	}

	allow = {
		OR = {
			current_age = age_2_renaissance
			current_age = age_3_discovery
			current_age = age_6_revolutions
		}
	}

	chance = {
		add = 1
		add = {
			if = {
				limit = {
					has_advance = patron_of_art
				}
				value = 2
			}
		}
		multiply = {
			if = {
				limit = {
					societal_value:aristocracy_vs_plutocracy > 0
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		random_list = {
			1 = {
				create_character = {
					artist = architect
					estate = estate_type:burghers_estate
					artist_skill = { 0.2 0.9 }
				}
			}
			1 = {
				create_character = {
					artist = composer
					estate = estate_type:burghers_estate
					artist_skill = { 0.2 0.9 }
				}
			}
			1 = {
				create_character = {
					artist = writer
					estate = estate_type:burghers_estate
					artist_skill = { 0.2 0.9 }
				}
			}
		}
		
		change_societal_value = {
			type = aristocracy_vs_plutocracy
			value = societal_value_move_to_left
		}
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}

support_noble_sponsored_armies = {
	estate = nobles_estate

	modifier_when_in_debate = {
		monthly_army_tradition = 0.2
		monthly_towards_belligerent = societal_value_huge_monthly_move #moves value by 3 over the duration
	}

	allow = {
		OR = {
			current_age = age_4_reformation
			current_age = age_5_absolutism
		}
		can_build_units_of_category = sub_unit_category:army_infantry #Check that the country can have infantry in the first place for the mercs
		can_build_units_of_category = sub_unit_category:army_cavalry #Check that the country can have cavalry in the first place for the mercs
		can_build_units_of_category = sub_unit_category:army_artillery #Check that the country can have artillery in the first place for the mercs
	}

	chance = {
		add = 2
		add = {
			if = {
				limit = {
					is_situation_active = situation:war_of_religions
				}
				value = 4
			}
		}
		multiply = {
			if = {
				limit = {
					societal_value:aristocracy_vs_plutocracy > 0
				}
				value = 0.5
			}
			else = {
				value = 1	#We need that else or otherwise the whole chance is multiplied with 0
			}
		}
	}
	
	on_debate_passed = {
		if = {
			limit = {
				expected_army_size < 10
			}
			create_mercenary = {
				home = root.capital
				categories = {
					army_infantry = 6
					army_cavalry = 2
				}
				save_scope_as = parliament_mercs
				months = 120
			}
		}
		else_if = {
			limit = {
				expected_army_size > 10
				expected_army_size < 20
			}
			create_mercenary = {
				home = root.capital
				categories = {
					army_infantry = 12
					army_cavalry = 4
					army_artillery = 4
				}
				save_scope_as = parliament_mercs
				months = 120
			}
		}
		else_if = {
			limit = {
				expected_army_size > 20
			}
			create_mercenary = {
				home = root.capital
				categories = {
					army_infantry = 16
					army_cavalry = 4
					army_artillery = 8
				}
				save_scope_as = parliament_mercs
				months = 120
			}
		}
		
		change_societal_value = {
			type = aristocracy_vs_plutocracy
			value = societal_value_move_to_left
		}

		if = {
			limit = {
				exists = scope:parliament_mercs
			}
			hire_mercenary = scope:parliament_mercs
		}
	}
	on_debate_failed = {
		parliament_debate_failed_effect = yes
	}
}