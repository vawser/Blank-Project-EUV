guild_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	add = {
		desc = "BUILDING_LEVEL_DEVELOPMENT"
		value = development
		multiply = 0.1
	}
	add = {
		desc = "BUILDING_LEVEL_POPULATION"
		value = population
		multiply = 0.05
	}
	if = {
		limit = {
			location_rank ?= location_rank:city
		}
		add = {
			desc = "BUILDING_LEVEL_IS_CITY"
			value = 5
		}
	}
	if = {
		limit = {
			location_rank ?= location_rank:rural_settlement
			has_variable = extra_levels_clothmaker_variable
		}
		add = {
			desc = "[ShowMissionTaskName('mission_cloth_makers')]"
			value = 2
		}
	}
}

hanseatic_kontor_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 3
	}
	if = {
		limit = {
			location_rank ?= location_rank:city
		}
		add = {
			desc = "BUILDING_LEVEL_IS_CITY"
			value = 2
		}
	}
}

workshop_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	add = {
		desc = "BUILDING_LEVEL_DEVELOPMENT"
		value = development
		multiply = 0.25
	}
	add = {
		desc = "BUILDING_LEVEL_POPULATION"
		value = population
		multiply = 0.05
	}
	if = {
		limit = {
			location_rank = location_rank:city
		}
		add = {
			desc = "BUILDING_LEVEL_IS_CITY"
			value = 10
		}
	}
}


manufactory_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 5
	}
	add = {
		desc = "BUILDING_LEVEL_DEVELOPMENT"
		value = development
		multiply = 0.5
	}
	add = {
		desc = "BUILDING_LEVEL_POPULATION"
		value = population
		multiply = 0.1
	}
	if = {
		limit = {
			location_rank = location_rank:city
		}
		add = {
			desc = "BUILDING_LEVEL_IS_CITY"
			value = 20
		}
	}
}


market_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	add = {
		desc = "BUILDING_LEVEL_DEVELOPMENT"
		value = development
		multiply = 0.1
	}
	add = {
		desc = "BUILDING_LEVEL_POPULATION"
		value = population
		multiply = 0.05
	}
	if = {
		limit = {
			location_rank ?= location_rank:city
		}
		add = {
			desc = "BUILDING_LEVEL_IS_CITY"
			value = 5
		}
	}
}



mills_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 5
	}
	add = {
		desc = "BUILDING_LEVEL_DEVELOPMENT"
		value = development
		multiply = 1
	}
	add = {
		desc = "BUILDING_LEVEL_POPULATION"
		value = population
		multiply = 0.25
	}
	if = {
		limit = {
			location_rank = location_rank:city
		}
		add = {
			desc = "BUILDING_LEVEL_IS_CITY"
			value = 25
		}
	}
}




market_warehouse_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	add = {
		desc = "BUILDING_LEVEL_DEVELOPMENT"
		value = development
		multiply = 0.025
	}

	if = {
		limit = {
			location_rank = location_rank:town
		}
		add = {
			desc = "BUILDING_LEVEL_IS_TOWN"
			value = 1
		}
	}
	if = {
		limit = {
			location_rank = location_rank:city
		}
		add = {
			desc = "BUILDING_LEVEL_IS_CITY"
			value = 2
		}
	}
}


polders_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 0
	}
	if = {
		limit = {
			owner = {
				has_variable = ned_buffed_polders_flag
			}
		}
		add = {
			desc = "BUILDING_LEVEL_DEVELOPMENT"
			value = development
			multiply = 0.2
		}
	}
	else = {
		add = {
			desc = "BUILDING_LEVEL_DEVELOPMENT"
			value = development
			multiply = 0.1
		}
	}
}

irrigant_cap = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 2
	}
	add = {
		desc = "BUILDING_LEVEL_DEVELOPMENT"
		value = development
		multiply = 0.2
	}
	if = {
		limit = {
			has_river = yes
		}
		add = {
			desc = "BUILDING_LEVEL_HAS_RIVER"
			value = 2
		}
	}
	add = {
		desc = "BUILDING_LEVEL_FROM_OWNER_MODIFIERS"
		add = owner.modifier:irrigant_cap_level
	}
}

bund_cap = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 2
	}
	add = {
		desc = "BUILDING_LEVEL_DEVELOPMENT"
		value = development
		multiply = 0.1
	}
}


manpower_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	add = {
		desc = "BUILDING_LEVEL_POPULATION"
		value = population
		multiply = 0.05
	}
}





plantation_cap = {
	add = {
		desc = "BUILDING_LEVEL_RGO_MAX"
		value = max_rgo_workers
		multiply = 2.0
	}
}






rural_building_cap = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	add = {
		desc = "BUILDING_LEVEL_DEVELOPMENT"
		value = development
		multiply = 0.1
	}
	add = {
		desc = "BUILDING_LEVEL_RGO_MAX"
		value = max_rgo_workers
		multiply = 0.5
	}
	if = {
		limit = {
			has_river = yes
		}
		add = {
			desc = "BUILDING_LEVEL_HAS_RIVER"
			value = 1
		}
	}
}


slave_market_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	add = {
		desc = "BUILDING_LEVEL_DEVELOPMENT"
		value = development
		multiply = 0.2
	}
	add = {
		desc = "BUILDING_LEVEL_FROM_OWNER_MODIFIERS"
		value = owner.modifier:slave_market_max_level
	}
	if = {
		limit = {
			has_variable = ben_more_levels_of_slaves_building_flag
		}
		multiply = {
			desc = "strengthened_african_slave_trade"
			value = 2
		}
	}
}

janissary_barracks_size = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	if = {
		limit = {
			current_age_or_later = { age = age_3_discovery }
		}
		add = {
			desc = "age_3_discovery"
			value = 1
		}
	}
	if = {
		limit = {
			current_age_or_later = { age = age_4_reformation }
		}
		add = {
			desc = "age_4_reformation"
			value = 1
		}
	}
	if = {
		limit = {
			current_age_or_later = { age = age_5_absolutism }
		}
		add = {
			desc = "age_5_absolutism"
			value = 1
		}
	}
}

chancery_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	add = {
		desc = "BUILDING_LEVEL_FROM_OWNER_MODIFIERS"
		value = owner.modifier:chancery_cap_level
	}
}

kremlin_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	if = {
		limit = {
			has_variable = kremlin_stone_upgrade
		}
		add = {
			desc = "kremlin_upgrade"
			value = 1
		}
	}
}

venetian_palaces_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 3
	}
	add = {
		desc = "BUILDING_LEVEL_DEVELOPMENT"
		value = development
		multiply = 0.05
	}
	if = {
		limit = {
			location_rank = location_rank:city
		}
		add = {
			desc = "BUILDING_LEVEL_IS_CITY"
			value = 2
		}
	}
}

bock_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	if = {
		limit = {
			owner = { has_advance = bastion_advance }
		}
		add = {
			desc = "bastion_advance"
			value = 1
		}
	}
	if = {
		limit = {
			owner = { has_advance = star_fort_advance }
		}
		add = {
			desc = "star_fort_advance"
			value = 1
		}
	}
	if = {
		limit = {
			owner = { has_advance = fortress_advance }
		}
		add = {
			desc = "fortress_advance"
			value = 1
		}
	}
}

mercury_patio_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	
	add = {
		desc = "BUILDING_LEVEL_FROM_OWNER_MODIFIERS"
		value = scope:owner.modifier:mercury_patio_max_level
	}
}

hanseatic_shipwright_guild_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	add = {
		desc = "BUILDING_LEVEL_FROM_OWNER_MODIFIERS"
		value = scope:owner.modifier:hanseatic_shipwright_guild_max_level
	}
}


construction_center_max_level  = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	add = {
		desc = "BUILDING_LEVEL_FROM_OWNER_MODIFIERS"
		value = scope:owner.modifier:construction_center_max_level 
	}
}

theodosian_walls_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	if = {
		limit = {
			has_variable = strengthened_theodosian_walls
		}
		add = {
			desc = "strengthened_theodosian_walls_desc"
			value = 1
		}
	}
}

italian_merchant_quarters_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	if = {
		limit = {
			has_variable = requested_aid_from_italian_merchants
		}
		add = {
			desc = "allowed_italian_merchants_desc"
			value = 1
		}
	}
}

fulani_cattle_rearing_pen_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 3
	}
	add = {
		desc = "BUILDING_LEVEL_DEVELOPMENT"
		value = development
		multiply = 0.1
	}
	if = {
		limit = {
			location_rank = location_rank:city
		}
		add = {
			desc = "BUILDING_LEVEL_IS_CITY"
			value = -2
		}
	}
}

kurmina_headquarter_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	add = {
		desc = "BUILDING_LEVEL_POPULATION"
		value = population
		multiply = 0.01
	}
	add = {
		desc = "BUILDING_LEVEL_DEVELOPMENT"
		value = development
		multiply = 0.05
	}
}

eghabho_nore_mansion_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	if = {
		limit = {
			location_rank = location_rank:city
		}
		add = {
			desc = "BUILDING_LEVEL_IS_CITY"
			value = 1
		}
	}
}

reformation_preachers_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	if = {
		limit = {
			distance_to_squared = {
				location = location:rome
				value >= 75000
				value < 85000
			}
		}
		add = {
			desc = "distance_to_rome"
			value = 1
		}
	}
	if = {
		limit = {
			distance_to_squared = {
				location = location:rome
				value >= 85000
				value < 100000
			}
		}
		add = {
			desc = "distance_to_rome"
			value = 2
		}
	}
	if = {
		limit = {
			distance_to_squared = {
				location = location:rome
				value >= 100000
			}
		}
		add = {
			desc = "distance_to_rome"
			value = 3
		}
	}
}

trade_company_headquarters_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 1
	}
	if = {
		limit = {
			scope:owner ?= {
				is_subject = yes
				overlord = {
					modifier:trade_company_headquarters_level > scope:owner.modifier:trade_company_headquarters_level
				}
			}
		}
		add = {
			desc = "BUILDING_LEVEL_BONUS_FROM_OVERLORD"
			value = scope:owner.overlord.modifier:trade_company_headquarters_level
		}
	}
	else = {
		add = {
			desc = "BUILDING_LEVEL_BONUS_FROM_MODIFIERS"
			value = scope:owner.modifier:trade_company_headquarters_level
		}
	}
}

trade_company_building_max_level = {
	add = {
		desc = "BUILDING_LEVEL_BASE"
		value = 2
	}
}