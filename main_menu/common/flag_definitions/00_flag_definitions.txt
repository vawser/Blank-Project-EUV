# FLAG_DEFINITION_LIST = {		# countries search for a list with the same name as their tag, the DEFAULT list is always included, if no flag definition is applicable for a country then its tag is used a COA_KEY
# 	includes = ANOTHER_LIST		# includes another list in this list, can be repeated
#
# 	flag_definition = {			# the flag definitions that make up this list, can be repeated
# 		coa = [list] COA_KEY	# main flag, optional list keyword denotes a coa template
# 		allow_overlord_canton = yes				# default no
# 		coa_with_overlord_canton = <[list] coa>	# flag where a canton can be placed, optional list keyword same as above, defaults to coa
# 		overlord_canton_offset = { x y }		# canton placement offset, default { 0 0 }
# 		overlord_canton_scale = { x y }			# canton placement scale, default { 0.5 0.5 }
# 		subject_canton = [list] COA_KEY	# canton applied to subjects by this country, optional list keyword same as above
#
# 		priority = value		# valid flag definition with the highest priority applies
# 		trigger = {}			# a trigger that determines if this flag definition is valid, see below for scope
#       allow_revolutionary_indicator = no      # Default = yes. If yes, a temporary revolutionary indicator will appear while the country is revolutionary
#       revolutionary_canton = [list] COA_KEY   # Optional. Default = default_revolutionary_canton. Defines which flag should be used as canton while this country is revolutionary
# 	}
# }
# revolutionary is not in use for the moment.

#            | existing country | releasing a country | country formation |
# |==========|==================|=====================|===================|
# |root      | definition       | definition          | definition        |
# |----------|------------------|---------------------|-------------------|
# |target    | country          | N/A                 | N/A               |
# |----------|------------------|---------------------|-------------------|
# |initiator | N/A              | player              | player            |
# |----------|------------------|---------------------|-------------------|
# |actor     | country          | player              | player            |
# |----------|------------------|---------------------|-------------------|
# |          | country's        |                     | player's          |
# |overlord  | direct overlord  | player              | direct overlord   |
# |          | if it exists     |                     | if it exists      |
# |----------|------------------|---------------------|-------------------|

# common variables
@coa_width = 768
@coa_height = 512
@canton_scale_cross_x = @[ ( 333 / coa_width ) + 0.001 ]
@canton_scale_cross_y = @[ ( 205 / coa_height ) + 0.001 ]
@canton_scale_sweden_x = @[ ( 255 / coa_width ) + 0.001 ]
@canton_scale_sweden_y = @[ ( 204 / coa_height ) + 0.001 ]
@canton_scale_norway_x = @[ ( 192 / coa_width ) + 0.001 ]
@canton_scale_norway_y = @[ ( 192 / coa_height ) + 0.001 ]
@canton_scale_denmark_x = @[ ( 220 / coa_width ) + 0.001 ]
@canton_scale_denmark_y = @[ ( 220 / coa_height ) + 0.001 ]
@third = @[1/3]
@usa_canton_width = 0.5
@usa_canton_height = @[ 1 / 13 * 7 ]

# Age triggers :
# 1342 - coa_def_renaissance_age_2_trigger
# 1437 - coa_def_discovery_age_3_trigger
# 1537 - coa_def_reformation_age_4_trigger
# 1637 - coa_def_absolutism_age_5_trigger
# 1737 - coa_def_revolutions_age_6_trigger

# Colour codes for tinctures in summary :
# A - Argent (White)
# O - Or (Yellow)
# B - Azure (Blue)
# G - Gules (Red)
# S - Sable (Black)
# V - Vert/Sinople (Green)
# P - Purple/Pourpre
# M - Brown/Maroon
# Z - Vair
# E - Ermine
# N - Orange

DEFAULT = {
	# Default colonial cantons (using only basic geometrical designs with a canton)
	# To add any other tag : make an ensign trigger & make sure that a subject_canton is specified under all of its entries
	# Also note that this overrule the priority of any prescripted tag (ie CAN, USA)
	flag_definition = {
		coa = list "template_british_colonial_early_list"
		allow_overlord_canton = yes
		priority = 500
		trigger = {
			coa_def_colonial_nation_trigger = yes
			OR = {
				coa_def_GBR_ensign_trigger = yes
				# coa_def_ENG_ensign_trigger = yes # Specific list below
				coa_def_SCO_ensign_trigger = yes
				coa_def_IRE_ensign_trigger = yes
				coa_def_WLS_ensign_trigger = yes
				coa_def_CRN_ensign_trigger = yes
				coa_def_NSE_ensign_trigger = yes
				coa_def_HEN_ensign_trigger = yes
				coa_def_CEL_ensign_trigger = yes
			}
			coa_def_date_after_1600 = no
		}
	}
	
	# Pirate Randoms
	flag_definition = {
		coa = list "template_pirates_list"
		allow_overlord_canton = no
		priority = 9500
		trigger = {
			coa_def_pirates_trigger = yes
			coa_def_japanese_trigger = no # Ryukyu pirates in japanese list
		}
	}	
	
	# Colonial early for England (mixed non standard types)
	flag_definition = {
		coa = list "template_english_colonial_list"
		allow_overlord_canton = no
		priority = 9000
		random_select_if_same_priority = yes
		trigger = {
			coa_def_colonial_nation_trigger = yes
			coa_def_ENG_ensign_trigger = yes
			coa_def_date_after_1600 = no
		}
	}	
	
	# Ensign types with standardized cantons
	flag_definition = {
		coa = list "template_british_colonial_ensigns_list"
		allow_overlord_canton = yes
		priority = 9000
		random_select_if_same_priority = yes
		trigger = {
			coa_def_colonial_nation_trigger = yes
			OR = {
				coa_def_GBR_ensign_trigger = yes
				coa_def_ENG_ensign_trigger = yes
				coa_def_SCO_ensign_trigger = yes
				coa_def_IRE_ensign_trigger = yes
				coa_def_WLS_ensign_trigger = yes
				coa_def_CRN_ensign_trigger = yes
				coa_def_NSE_ensign_trigger = yes
				coa_def_HEN_ensign_trigger = yes
				coa_def_CEL_ensign_trigger = yes
			}
			coa_def_date_after_1600 = yes
		}
	}
	flag_definition = {
		coa = list "template_british_colonial_cross_ensigns_list"
		allow_overlord_canton = yes
		priority = 9000
		random_select_if_same_priority = yes

		overlord_canton_offset = { 0 0 }
		overlord_canton_scale = { 0.461 0.445 }

		trigger = {
			coa_def_colonial_nation_trigger = yes
			OR = {
				coa_def_GBR_ensign_trigger = yes
				coa_def_ENG_ensign_trigger = yes
				coa_def_SCO_ensign_trigger = yes
				coa_def_IRE_ensign_trigger = yes
				coa_def_WLS_ensign_trigger = yes
				coa_def_CRN_ensign_trigger = yes
				coa_def_NSE_ensign_trigger = yes
				coa_def_HEN_ensign_trigger = yes
				coa_def_CEL_ensign_trigger = yes
			}
			# coa_def_date_after_1600 = yes # Mixes well with both early and late
		}
	}

	flag_definition = {
		coa = list "template_british_colonial_cross_ensigns_wide_list"
		allow_overlord_canton = yes
		priority = 9000
		random_select_if_same_priority = yes

		overlord_canton_offset = { 0 0 }
		overlord_canton_scale = { 0.418 0.375 }

		trigger = {
			coa_def_colonial_nation_trigger = yes
			OR = {
				coa_def_GBR_ensign_trigger = yes
				coa_def_ENG_ensign_trigger = yes
				coa_def_SCO_ensign_trigger = yes
				coa_def_IRE_ensign_trigger = yes
				coa_def_WLS_ensign_trigger = yes
				coa_def_CRN_ensign_trigger = yes
				coa_def_NSE_ensign_trigger = yes
				coa_def_HEN_ensign_trigger = yes
				coa_def_CEL_ensign_trigger = yes
			}
			coa_def_date_after_1600 = yes
		}
	}
	
	flag_definition = {
		coa = list "template_revolutionary_colonial_ensigns_list"
		allow_overlord_canton = yes
		priority = 9000
		trigger = {
			coa_def_colonial_nation_trigger = yes
			coa_def_FRA_ensign_trigger = yes
			coa_def_overlord_revolutionary_republic_trigger = yes
		}
	}	
}

ENG = { # England
	# NB: all subject cantons need to be defined for this tag
	flag_definition = {
		coa = ENG
		subject_canton = ENG
		coa_with_overlord_canton = ENG_subject
		allow_overlord_canton = yes
		priority = 1
	}
	flag_definition = {
		coa = ENG_nordic
		subject_canton = ENG
		allow_overlord_canton = yes
		priority = 2
		trigger = {
			coa_def_christian_trigger = yes
			coa_def_nordic_trigger = yes
		}
	}
	flag_definition = {
		coa = ENG_monarchy
		subject_canton = ENG
		allow_overlord_canton = yes
		priority = 110
		trigger = {
			coa_def_monarchy_trigger = yes
			NOT = { has_variable = has_had_war_of_the_roses_disaster }
		}
	}
	flag_definition = {
		coa = ENG_quarterly_france
		subject_canton = ENG
		allow_overlord_canton = yes
		priority = 111
		trigger = {
			coa_def_monarchy_trigger = yes
			coa_def_paris_ownership_trigger = yes
			NOT = { has_variable = has_had_war_of_the_roses_disaster }
			NOT = { coa_def_capetian_trigger = yes }
		}
	}
	flag_definition = {
		coa = ENG_capetian
		subject_canton = ENG
		allow_overlord_canton = no
		priority = 112
		trigger = {
			coa_def_monarchy_trigger = yes
			coa_def_capetian_trigger = yes
		}
	}
	flag_definition = {
		coa = ENG_tudor
		subject_canton = ENG
		allow_overlord_canton = no
		priority = 120
		trigger = {
			coa_def_monarchy_trigger = yes
			exists = dynasty:tudor_dynasty
			OR = {
				AND = {
					has_ruler = yes
					ruler.dynasty ?= dynasty:tudor_dynasty
				}
				AND = {
					has_ruler = no
					has_heir = yes
					heir.dynasty ?= dynasty:tudor_dynasty
				}
			}
		}
	}
	flag_definition = {
		coa = ENG_yorkist
		subject_canton = ENG
		allow_overlord_canton = no
		priority = 120
		trigger = {
			coa_def_monarchy_trigger = yes
			exists = dynasty:york_dynasty
			OR = {
				AND = {
					has_ruler = yes
					ruler.dynasty ?= dynasty:york_dynasty
				}
				AND = {
					has_ruler = no
					has_heir = yes
					heir.dynasty ?= dynasty:york_dynasty
				}
			}
		}
	}
	flag_definition = {
		coa = ENG_lancastrian
		subject_canton = ENG
		allow_overlord_canton = no
		priority = 120
		trigger = {
			coa_def_monarchy_trigger = yes
			exists = dynasty:lancaster_dynasty
			OR = {
				AND = {
					has_ruler = yes
					ruler.dynasty ?= dynasty:lancaster_dynasty
				}
				AND = {
					has_ruler = no
					has_heir = yes
					heir.dynasty ?= dynasty:lancaster_dynasty
				}
			}
		}
	}
	flag_definition = {
		coa = ENG_revolutionary_republic
		subject_canton = ENG
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

ABA = { # Alba
	# ABA - Civic : Cross (AG) & letters ALBA
	# ABA_revolutionary_republic - Napoleonic republic : tricolor GBO

	flag_definition = {
		coa = ABA
		priority = 1
	}
	flag_definition = {
		coa = ABA_revolutionary_republic
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

ACH = { # Achaea
	flag_definition = {
		coa = ACH
		priority = 1
	}
	flag_definition = {
		coa = ACH_savoy
		priority = 50
		trigger = {
			coa_def_savoy_dynasty_trigger = yes
		}
	}
}

ADU = { # Al Andalus
	flag_definition = {
		coa = ADU_ancient
		priority = 1
	}
	flag_definition = {
		coa = ADU
		priority = 10
		trigger = {
			coa_def_monarchy_trigger = yes
		}
	}	
	flag_definition = {
		coa = ADU_ancient_quarterly
		priority = 20
		trigger = {
			coa_def_christian_trigger = yes
		}
	}	
	flag_definition = {
		coa = ADU_republic
		priority = 21
		trigger = {
			coa_def_republic_trigger = yes
			coa_def_christian_trigger = yes
		}
	}	
}

ALB = { # Albania/Durres
	# ALB - Kastrioti principality : eagle dh GS & star in chief O
	# ALB_anjou - Anjou-Durazzo : France, label 3p G, border compony AG

	flag_definition = {
		coa = ALB
		priority = 1
	}
	flag_definition = {
		coa = ALB_Anjou
		priority = 100
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_angevine_regency_trigger = yes
			}
		}
	}
}

ALE = { # Alençon
	# ALE_ancient - bendy OB & canton G - Bellême
	# ALE - France w/ border roundelly GA
	# ALE_three_fleurs - Three fleurs 15th c.

	flag_definition = {
		coa = ALE_ancient
		priority = 1
	}
	flag_definition = {
		coa = ALE
		priority = 2
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = ALE_three_fleurs
		priority = 3
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

ANC = { # Ancona
	# ANC_republic : GO cross - Modern attribution
	# ANC - City/Rep. : Cross couped/patonce GO - Medieval republic
	# ANC_guelphs : arms ca 1500 with angevine chief
	# ANC_papal : GO per fess & keys of st peter
	# ANC_revolutionary_republic - Anconine Rep. : Tricolor BOG & legend

	flag_definition = {
		coa = ANC
		priority = 1
	}
	flag_definition = {
		coa = ANC_papal
		priority = 2
		trigger = {
			coa_def_PAP_ensign_trigger = yes
		}
	}
	flag_definition = {
		coa = ANC_guelphs
		priority = 3
		trigger = {
			coa_def_guelphs_trigger = yes
		}
	}
	flag_definition = {
		coa = ANC_revolutionary_republic
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

ANG = { # Angoulême - with the cadency mark if Orléans exists
	flag_definition = {
		coa = ANG
		priority = 1
	}
	flag_definition = {
		coa = ORL
		priority = 10
		trigger = {
			coa_def_capetian_trigger = yes
		}
	}
	flag_definition = {
		coa = ORL_three_fleurs
		priority = 11
		trigger = {
			coa_def_capetian_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}
	flag_definition = {
		coa = ANG_capetian
		priority = 50
		trigger = {
			country_exists = c:ORL
			coa_def_capetian_trigger = yes
		}
	}
	flag_definition = {
		coa = ANG_france
		priority = 60
		trigger = {
			country_exists = c:ORL
			coa_def_capetian_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

ANJ = { # Anjou
	flag_definition = {
		coa = ANJ
		priority = 1
	}
	flag_definition = {
		coa = ANJ_three_fleurs
		priority = 2
		trigger = {
			coa_def_discovery_age_3_trigger = yes
		}
	}
	flag_definition = {
		coa = ANJ_valois
		priority = 3
		trigger = {
			coa_def_valois_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = ANJ_valois_three_fleurs
		priority = 4
		trigger = {
			coa_def_valois_dynasty_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}
	flag_definition = {
		coa = VLS
		priority = 10
		trigger = {
			coa_def_valois_dynasty_trigger = yes
			NOT = { country_exists = c:VLS }
		}
	}
	flag_definition = {
		coa = VLS_three_fleurs
		priority = 11
		trigger = {
			coa_def_valois_dynasty_trigger = yes
			coa_def_discovery_age_3_trigger = yes
			NOT = { country_exists = c:VLS }
		}
	}
}

AQN = { # Aquitaine
	# AQN - GO lion passant guardant
	# AQN_capetian - Qtly w/ france modern (same principle as Berry-Aquitaine)
	# AQN_valois - 15th c. Qtly w/ Berry modern (as designed for Charles de Valois, duke of Berry & Aquitaine)

	flag_definition = {
		coa = AQN
		priority = 1
	}
	flag_definition = {
		coa = AQN_capetian
		priority = 2
		trigger = {
			coa_def_capetian_trigger = yes
		}
	}
	flag_definition = {
		coa = AQN_valois
		priority = 3
		trigger = {
			coa_def_valois_dynasty_trigger = yes
		}
	}
}

AOS = { # Aosta
	flag_definition = {
		coa = AOS
		priority = 1
	}
	flag_definition = {
		coa = AOS_duchy_savoy
		priority = 2
		trigger = {
			coa_def_duchy_or_higher_trigger = yes
		}
	}	
	flag_definition = {
		coa = AOS_challant
		priority = 10
		trigger = {
			coa_def_aleramici_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = AOS_duchy_savoy
		priority = 11
		trigger = {
			coa_def_duchy_or_higher_trigger = yes
			coa_def_savoy_dynasty_trigger = yes
		}
	}
}

ARA = { # Aragon
	flag_definition = {
		coa = ARA
		priority = 1
	}
	flag_definition = {
		coa = ARA_white
		priority = 8
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			OR = {
				coa_def_american_colonies_trigger = yes # TODO Check NEW
				coa_def_african_colonies_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = ARA_white_greater
		priority = 10
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
		}
	}
	flag_definition = {
		coa = ARA_republic
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = ARA_revolutionary
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

ARB = { # Arborea
	flag_definition = {
		coa = ARB
		priority = 1
	}
	flag_definition = {
		coa = ARB_ghibellines
		priority = 2
		trigger = {
			coa_def_ghibellines_trigger = yes
		}
	}
}

ARM = { # Armenia
	flag_definition = {
		coa = ARM
		priority = 1
	}
	flag_definition = {
		coa = ARM_kingdom
		priority = 10
		trigger = {
			coa_def_kingdom_or_higher_trigger = yes
		}
	}	
}

ARR = { # Riga (Bishopric)
	flag_definition = {
		coa = ARR
		priority = 1
	}
	flag_definition = { # Starting
		coa = ARR_TEU
		priority = 90
		trigger = {
			coa_def_teutonic_order_trigger = yes
		}
	}
}

ARS = { # Artois
	# ARS_ancient - GO lion - Ancient arms
	# ARS - Capetian semy & label castily GO
	# ARS_three_fleurs - France (modern) & label castily GO

	flag_definition = {
		coa = ARS_ancient
		priority = 1
	}
	flag_definition = {
		coa = ARS
		priority = 2
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = ARS_three_fleurs
		priority = 3
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

ASC = { # Ascoli   
	flag_definition = {
		coa = ASC
		priority = 1
	}
	flag_definition = {
		coa = ASC_PAP
		priority = 10
		trigger = {
			coa_def_PAP_ensign_trigger = yes
		}
	}		
}

ASD = { # Alessandria
	flag_definition = {
		coa = ASD
		priority = 1
	}
	flag_definition = {
		coa = ASD_ghibellines
		priority = 2
		trigger = {
			coa_def_ghibellines_trigger = yes
		}
	}
}

ATI = { # Asti
	flag_definition = {
		coa = ATI
		priority = 1
	}
	flag_definition = {
		coa = ATI_revolutionary
		priority = 100
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

ATR = { # Astrakhan
	flag_definition = {
		coa = ATR_crown
		priority = 1
	}
	flag_definition = {
		coa = ATR
		priority = 50
		trigger = {
			OR = {
				coa_def_tamgha_trigger = yes
				coa_def_muslim_trigger = yes # although possibly with a slightly different composition
			}
		}
	}
}

BAC = { # Bacan
	flag_definition = {
		coa = BAC
		priority = 1
	}
	flag_definition = {
		coa = BAC_sultanate
		priority = 50
		trigger = {
			coa_def_muslim_trigger = yes
		}
	}
}

BAV = { # Bavaria
	flag_definition = {
		coa = BAV
		priority = 1
	}
	flag_definition = {
		coa = BAV_emperor
		priority = 0 # Commented out for now
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}
}

BDE = { # Baden
	# BDE - Duchy : bend OG
	#x BDE_grand_duchy_early - Gd Duchy 19th c.  Tricolor OMO
	# BDE_grand_duchy - Gd Duchy tricolor OGO
	#x BDE_grand_duchy_barry - Gd Duchy barry OG

	flag_definition = {
		coa = BDE
		priority = 1
	}
	flag_definition = {
		coa = BDE_grand_duchy
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

BEL = { # Belgium
	flag_definition = {
		coa = BEL
		priority = 1
	}
	flag_definition = {
		coa = BEL_early
		priority = 2
		trigger = {
			OR = {
				coa_def_revolutionary_republic_trigger = yes
				coa_def_republic_trigger = yes
			}
		}
	}
}

BER = { # Berry
	flag_definition = {
		coa = BER
		priority = 1
	}
	flag_definition = {
		coa = BER_three_fleurs
		priority = 2
		trigger = {
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

BLG = { # Bologna
	flag_definition = {
		coa = BLG
		priority = 1
	}
	flag_definition = {
		coa = BLG_guelphs
		priority = 2
		trigger = {
			coa_def_ghibellines_trigger = yes
		}
	}
	flag_definition = {
		coa = BLG_pepoli
		priority = 3
		trigger = {
			coa_def_pepoli_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = BLG_revolutionary
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

BLI = { # Bali
	flag_definition = {
		coa = BLI
		priority = 1
	}
	flag_definition = {
		coa = BLI_tricolor
		priority = 50
		trigger = {
			coa_def_muslim_trigger = yes # TODO
		}
	}
}

BNE = { # Bone
	flag_definition = {
		coa = BNE
		priority = 1
	}
	flag_definition = {
		coa = BNE_sultanate
		priority = 50
		trigger = {
			coa_def_muslim_trigger = yes
		}
	}
}

BNO = { # Borneo
	flag_definition = {
		coa = BNO
		priority = 1
	}
	flag_definition = {
		coa = BNO_pagan
		priority = 10
		trigger = {
			coa_def_pagan_trigger = yes
		}
	}
	flag_definition = {
		coa = BNO_hindu
		priority = 20
		trigger = {
			coa_def_hindu_trigger = yes
		}
	}
}

BOH = { # Bohemia
	flag_definition = {
		coa = BOH
		priority = 1
	}
	flag_definition = {
		coa = BOH_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}	
	flag_definition = {
		coa = BOH_hussite
		priority = 150
		trigger = {
			coa_def_hussite_trigger = yes
		}
	}
}

BOS = { # Bosnia
	flag_definition = {
		coa = BOS
		priority = 1
	}
	flag_definition = {
		coa = BOS_late
		priority = 2
		trigger = {
			OR = {
				coa_def_kingdom_or_higher_trigger = yes
				coa_def_reformation_age_4_trigger = yes
			}
		}
	}
}

BOU = { # Bourbonnais
	flag_definition = {
		coa = BOU_ancient
		priority = 1
	}
	flag_definition = {
		coa = BOU
		priority = 2
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = BOU_three_fleurs
		priority = 3
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

BRA = { # Brandenburg
	flag_definition = {
		coa = BRA
		priority = 1
	}
	flag_definition = {
		coa = BRA_crown
		priority = 2
		trigger = {
			coa_def_duchy_or_higher_trigger = yes
		}
	}
	flag_definition = {
		coa = BRA_crown_scepter_sword
		priority = 5
		trigger = {
			coa_def_kingdom_or_higher_trigger = yes
		}
	}
	flag_definition = {
		coa = BRA_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}		
	flag_definition = {
		coa = BRA_merchant
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = BRA_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

BRB = { # Brabant
	flag_definition = {
		coa = BRB
		priority = 1
	}
	flag_definition = {
		coa = BRB_holland
		priority = 10
		trigger = {
			coa_def_holland_ownership_trigger = yes
		}
	}	
	flag_definition = {
		coa = BRB_flanders
		priority = 11
		trigger = {
			coa_def_flanders_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = BRB_limburg
		priority = 12
		trigger = {
			coa_def_limburg_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = BRB_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}	
	flag_definition = {
		coa = BRB_lower_lorraine
		priority = 21
		trigger = {
			coa_def_limburg_ownership_trigger = yes
			coa_def_flanders_ownership_trigger = yes
			OR = {
				coa_def_hainaut_ownership_trigger = yes
				coa_def_holland_ownership_trigger = yes
			}
			coa_def_kingdom_or_higher_trigger = yes
		}
	}	
}

BRG = { # Berg
	flag_definition = {
		coa = BRG
		priority = 1
	}
	flag_definition = {
		coa = BRG_julich
		priority = 10
		trigger = {
			coa_def_julich_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = BRG_grand_duchy
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
}

BRI = { # Brittany
	flag_definition = {
		coa = BRI
		priority = 1
	}
	flag_definition = {
		coa = BRI_border_england
		priority = 10
		trigger = {
			OR = {
				coa_def_GBR_ensign_trigger = yes
				coa_def_ENG_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = BRI_border_castles
		priority = 11
		trigger = {
			OR = {
				coa_def_CAS_ensign_trigger = yes
				coa_def_SPA_ensign_trigger = yes
				coa_def_POR_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = BRI_cross
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
}

BRM = { # Bremen
	flag_definition = {
		coa = BRM
		priority = 1
	}
	flag_definition = {
		coa = BRM_merchant
		priority = 100
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_republic_trigger = yes
		}
	}
}

BRU = { # Brunswick
	flag_definition = {
		coa = BRU
		priority = 1
	}
	flag_definition = {
		coa = BRU_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}	
	flag_definition = {
		coa = BRU_quarterly
		priority = 100
		trigger = {
			coa_def_duchy_or_higher_trigger = yes
			coa_def_luneburg_ownership_trigger = yes
		}
	}
}

BUL = { # Bulgaria
	flag_definition = {
		coa = BUL
		priority = 1
	}
	flag_definition = {
		coa = BUL_BYZ
		# allow_overlord_canton = yes
		priority = 10
		trigger = {
			coa_def_BYZ_ensign_trigger = yes
		}
	}
}

BUR = { # Burgundy
	# BUR - Ancient : Barry OB & border G
	# BUR_Valois - Younger (15th c.) Qtly Bourgogne & Touraine

	flag_definition = {
		coa = BUR
		priority = 1
	}
	flag_definition = {
		coa = BUR_habsburg
		priority = 40
		trigger = {
			coa_def_habsburg_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = BUR_Valois
		priority = 50
		trigger = {
			coa_def_valois_dynasty_trigger = yes
		}
	}
}

BYZ = { # Byzantium	
	flag_definition = {
		coa = BYZ_eagle
		priority = 1
	}
	flag_definition = {
		coa = BYZ_eagle_crowned
		priority = 2
		trigger = {
			coa_def_constantinople_ownership_trigger = no
			coa_def_kingdom_or_higher_trigger = yes
		}
	}	
	flag_definition = {
		coa = BYZ_eagle_imperial_crown
		priority = 3
		trigger = {
			coa_def_constantinople_ownership_trigger = no
			coa_def_empire_trigger = yes
		}
	}		
	flag_definition = {
		coa = BYZ
		priority = 10 # Starting
		trigger = {
			coa_def_constantinople_ownership_trigger = yes
			coa_def_empire_trigger = yes
		}
	}
	flag_definition = {
		coa = BYZ_cross_eagle
		priority = 20
		trigger = {
			coa_def_absolute_monarchy_trigger = yes
			coa_def_empire_trigger = yes
		}
	}		
	flag_definition = {
		coa = BYZ_cross_cypher
		priority = 21
		trigger = {
			coa_def_absolute_monarchy_trigger = yes
			coa_def_empire_trigger = yes
			coa_def_palaiologos_dynasty_trigger = yes
		}
	}		
	flag_definition = {
		coa = BYZ_cross_cypher_komnenos
		priority = 22
		trigger = {
			coa_def_absolute_monarchy_trigger = yes
			coa_def_empire_trigger = yes
			coa_def_komnenos_dynasty_trigger = yes # TODO a variant for earlier/more global contexts
		}
	}		
	flag_definition = {
		coa = BYZ_ottoman
		priority = 50
		trigger = {
			coa_def_TUR_ensign_trigger = yes
		}
	}
	flag_definition = {
		coa = BYZ_chi_rho
		priority = 80
		trigger = {
			coa_def_theocracy_trigger = yes
		}
	}	
	flag_definition = {
		coa = BYZ_cross_blue
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = BYZ_cross
		priority = 101
		trigger = {
			coa_def_republic_trigger = yes
			coa_def_constantinople_ownership_trigger = yes
		}
	}	
	flag_definition = {
		coa = BYZ_cross_quarterly
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

CAN = { # Canada
	flag_definition = {
		coa = CAN
		priority = 10001 # Needed to override default random def
	}
	flag_definition = {
		coa = CAN_subject
		allow_overlord_canton = yes
		priority = 10005
		trigger = {
			coa_def_colonial_nation_trigger = yes
			OR = {
				coa_def_GBR_ensign_trigger = yes
				coa_def_ENG_ensign_trigger = yes
				coa_def_SCO_ensign_trigger = yes		
			}
		}
	}	
}

CAS = { # Castile
	# CAS - Kingdom of Castile : Castle of three towers GO
	# CAS_castile_leon - Kingdom of Castile & León : qtd Castile GO & León AP
	# CAS_leon_castile - Kingdom of Castile & León : qtd León AP & Castile GO
	# CAS_white - White flag & CoA type (qtd Castile/León + royal crown)

	flag_definition = {
		coa = CAS_castile_leon
		priority = 1
	}
	flag_definition = {
		coa = CAS_white
		priority = 10
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
		}
	}
	flag_definition = {
		coa = CAS
		priority = 20
		
		trigger = {
			scope:actor = {
				any_overlord_or_above = { has_or_had_tag = LON }
			}
		}
	}
	flag_definition = {
		coa = CAS_republic
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = CAS_republic_revolutionary
		priority = 110
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_tricolor_purple
		priority = 150
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
			coa_def_leonese_primary_trigger = yes
		}
	}
}

CAT = { # Catalonia
	flag_definition = {
		coa = CAT
		priority = 1
	}
	flag_definition = {
		coa = ARA
		priority = 2
		trigger = {
			NOT = { country_exists = c:ARA }
		}
	}
	flag_definition = {
		coa = CAT_sitges
		priority = 3
		trigger = {
			scope:actor ?= {
				capital = location:sitges
			}
		}
	}
}

CDC = { # Citta di Castello
	flag_definition = {
		coa = CDC
		priority = 1
	}
	flag_definition = {
		coa = CDC_guelphs
		priority = 2
		trigger = {
			coa_def_guelphs_trigger = yes
		}
	}
	flag_definition = {
		coa = CDC_ghibellines
		priority = 3
		trigger = {
			coa_def_ghibellines_trigger = yes
		}
	}
}

CEL = { # Celtica
	flag_definition = {
		coa = CEL
		subject_canton = CEL
		priority = 1
	}
	flag_definition = {
		coa = CEL_white_black
		priority = 3
		trigger = {
			scope:actor ?= { gfx_culture_applicable = breton_gfx }
		}
	}
	flag_definition = {
		coa = CEL_black_yellow
		priority = 4
		trigger = {
			scope:actor ?= { gfx_culture_applicable = welsh_gfx }
		}
	}
	flag_definition = {
		coa = CEL_black_white
		priority = 10
		trigger = {
			scope:actor ?= { gfx_culture_applicable = cornish_gfx }
		}
	}
	flag_definition = {
		coa = CEL_yellow_red
		priority = 20
		trigger = {
			scope:actor ?= { gfx_culture_applicable = scottish_gfx }
		}
	}
}

CEP = { # Cephalonia
	flag_definition = {
		coa = CEP
		priority = 1
	}
	flag_definition = {
		coa = CEP_angevine
		priority = 100
		trigger = {
			coa_def_angevine_trigger = yes
		}
	}
}

CES = { # Cesena
	flag_definition = {
		coa = CES
		priority = 1
	}
	flag_definition = {
		coa = CES_guelphs
		priority = 2
		trigger = {
			coa_def_guelphs_trigger = yes
		}
	}
	flag_definition = {
		coa = CES_fess
		priority = 100
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

CHL = { # Kulm/Chelmno
	# CHL : Bishopric of Kulm, AG fess
	# CHL_VVD : Voivodeship of Chelmno, GS eagle armed with sword
	# CHL_TEU : Teutonic Order, AG crossed sword & crozier

	flag_definition = {
		coa = CHL
		priority = 1
	}
	flag_definition = { # Starting
		coa = CHL_TEU
		priority = 90
		trigger = {
			coa_def_teutonic_order_trigger = yes
		}
	}
	flag_definition = {
		coa = CHL_VVD
		priority = 100
		trigger = {
			coa_def_POL_ensign_trigger = yes
		}
	}
}

CHP = { # Champagne
	# CHP - Ancient design (bend cotised)
	# SAN - Bend cotised potenty, used by Counts of Sancerre since Champagne line extinct
	flag_definition = {
		coa = CHP
		priority = 1
	}
	flag_definition = {
		coa = SAN
		priority = 10
		trigger = {
			NOT = { country_exists = c:SAN } # TODO Check NEW
		}
	}
}

CIL = { # Armenia-Cilicia
	flag_definition = {
		coa = CIL_rampant
		priority = 1
	}	
	flag_definition = {
		coa = CIL_early
		priority = 10
		trigger = {
			coa_def_hetumids_dynasty_trigger = yes
		}		
	}		
	flag_definition = {
		coa = CIL
		priority = 11 # Starting variant
		trigger = {
			coa_def_hetumids_dynasty_trigger = yes
			coa_def_kingdom_or_higher_trigger = yes
		}		
	}	
}

CLI = { # Celje
	flag_definition = {
		coa = CLI
		priority = 1
	}
	flag_definition = {
		coa = CLI_late
		priority = 2
		trigger = {
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

CMR = { # Camerino                
	flag_definition = {
		coa = CMR
		priority = 1
	}
	flag_definition = {
		coa = CMR_ghibellines
		priority = 2
		trigger = {
			coa_def_ghibellines_trigger = yes
		}
	}
	flag_definition = {
		coa = CMR_PAP
		priority = 5
		trigger = {
			coa_def_PAP_ensign_trigger = yes
		}
	}	
}

CNN = { # Connacht
	flag_definition = {
		coa = CNN
		priority = 1
	}
	flag_definition = {
		coa = CNN_late
		priority = 2
		trigger = {
			coa_def_reformation_age_4_trigger = yes
			OR = {
				coa_def_obrien_dynasty_trigger = no
				coa_def_oconnor_dynasty_trigger = no
			}
		}
	}
}

COT = { # Cortona    
	flag_definition = {
		coa = COT_lion
		priority = 1
	}
	flag_definition = {
		coa = COT_lion_ghibellines
		priority = 2
		trigger = {
			coa_def_ghibellines_trigger = yes
		}
	}
	flag_definition = {
		coa = COT
		priority = 10
		trigger = {
			coa_def_casali_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = GUB_ghibellines
		priority = 11
		trigger = {
			coa_def_casali_dynasty_trigger = yes
			coa_def_ghibellines_trigger = yes
		}
	}
	flag_definition = {
		coa = COT_PAP
		priority = 15
		trigger = {
			coa_def_PAP_ensign_trigger = yes
		}
	}		
}

CRI = { # Crimea
	flag_definition = {
		coa = CRI_griffin
		priority = 1
	}
	flag_definition = {
		coa = CRI
		priority = 50
		trigger = {
			OR = {
				coa_def_tamgha_trigger = yes
				coa_def_muslim_trigger = yes
			}
		}
	}
}

CRN = { # Cornwall
	flag_definition = {
		coa = CRN
		subject_canton = CRN
		priority = 1
	}
	flag_definition = {
		coa = CRN_earldom
		subject_canton = CRN
		priority = 2
		trigger = {
			coa_def_monarchy_trigger = yes
		}
	}
	flag_definition = {
		coa = CRN_plantagenet
		subject_canton = CRN
		priority = 3
		trigger = {
			coa_def_plantagenet_trigger = yes
		}
	}
	flag_definition = {
		coa = CRN_kingdom
		subject_canton = CRN
		priority = 4
		trigger = {
			coa_def_celtic_trigger = yes
		}
	}
	flag_definition = {
		coa = CRN_tricolor
		subject_canton = CRN_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

CYP = { # Cyprus
	flag_definition = {
		coa = CYP
		priority = 1
	}
	flag_definition = {
		coa = CYP_crowned
		priority = 2
		trigger = {
			coa_def_duchy_or_higher_trigger = yes
		}
	}	
	flag_definition = {
		coa = CYP_lusignan # Starting design (qtly Jerusalem & Poitiers-Lusignan)
		priority = 10
		trigger = {
			coa_def_kingdom_or_higher_trigger = yes
		}
	}
	flag_definition = {
		coa = CYP_lusignan_armenia
		priority = 11
		trigger = {
			coa_def_kingdom_or_higher_trigger = yes
			coa_def_cilicia_ownership_trigger = yes
		}
	}	
}

CZK = { # Czersk
	flag_definition = {
		coa = CZK
		priority = 1
	}
	flag_definition = {
		coa = CZK_teutonic
		priority = 50
		trigger = {
			coa_def_teutonic_order_trigger = yes
		}
	}
}

DAN = { # Denmark
	flag_definition = {
		coa = DAN
		priority = 1
	}
	flag_definition = {
		coa = DAN_coa
		priority = 50
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
		}
	}
	# TODO
}

DAU = { # Viennois
	# DAU - dauphin OBG - Dauphins of Viennois
	# DAU_capetian - qtly France (semy) after 1349 Acte de Transport
	# DAU_france - qtly France modern mid. 15th c.

	flag_definition = {
		coa = DAU
		priority = 1
	}
	flag_definition = {
		coa = DAU_capetian
		priority = 2
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = DAU_france
		priority = 3
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

EPI = { # Epirus
	flag_definition = {
		coa = EPI
		priority = 1
	}
	flag_definition = {
		coa = BYZ_eagle
		priority = 10
		trigger = {
			NOT = { country_exists = c:BYZ }
			coa_def_kingdom_or_higher_trigger = yes
		}
	}
	flag_definition = {
		coa = BYZ_eagle_crowned
		priority = 10
		trigger = {
			NOT = { country_exists = c:BYZ }
			coa_def_empire_trigger = yes
		}
	}
}

ERM = { # Warmia
	flag_definition = {
		coa = ERM
		priority = 1
	}
	flag_definition = {
		coa = ERM_red
		priority = 5
		trigger = {
			OR = {
				coa_def_POL_ensign_trigger = yes
				coa_def_PLC_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = ERM_hansa
		priority = 10
		trigger = {
			coa_def_republic_trigger = yes
		}
	}	
}

ETA = { # Etampes
	flag_definition = {
		coa = ETA
		priority = 1
	}
	flag_definition = {
		coa = ETA_three_fleurs
		priority = 2
		trigger = {
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

EVR = { # Evreux
	# EVR_ancient - AG pilly-barry (Montfort)
	# EVR - France & bend compony AG
	# EVR - France modern & bend compony AG

	flag_definition = {
		coa = EVR_ancient
		priority = 1
	}
	flag_definition = {
		coa = EVR
		priority = 2
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = EVR_three_fleurs
		priority = 3
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

FAE = { # Faenza
	flag_definition = {
		coa = FAE
		priority = 1
	}
	flag_definition = {
		coa = FAE_guelphs
		priority = 2
		trigger = {
			coa_def_guelphs_trigger = yes
		}
	}
	flag_definition = {
		coa = FAE_ghibellines
		priority = 3
		trigger = {
			coa_def_ghibellines_trigger = yes
		}
	}
}

FER = { # Ferrara
	flag_definition = {
		coa = FER
		priority = 1
	}
	flag_definition = {
		coa = FER_este
		priority = 2
		trigger = {
			OR = {
				coa_def_monarchy_trigger = yes
				coa_def_este_dynasty_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = FER_quarterly
		priority = 3
		trigger = {
			coa_def_monarchy_trigger = yes
			coa_def_este_dynasty_trigger = yes
			coa_def_duchy_or_higher_trigger = yes
		}
	}
	flag_definition = {
		coa = FER_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

FLO = { # Florence
	# FLO - Guelph starting flag AG
	# FLO_red - Ghibelline flag GA

	flag_definition = {
		coa = FLO
		priority = 1
	}
	flag_definition = {
		coa = FLO_red
		priority = 100
		trigger = {
			coa_def_ghibellines_trigger = yes
		}
	}
}

FRA = { # France
	flag_definition = {
		coa = FRA
		subject_canton = FRA
		priority = 1
	}
	flag_definition = {
		coa = FRA_renaissance
		subject_canton = FRA_renaissance
		priority = 2
		trigger = {
			coa_def_discovery_age_3_trigger = yes
		}
	}
	flag_definition = {
		coa = FRA_white
		subject_canton = FRA_white
		priority = 3
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
		}
	}
	flag_definition = {
		coa = FRA_absolute_monarchy
		subject_canton = FRA_white
		priority = 10
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
		}
	}
	flag_definition = {
		coa = FRA_merchant
		subject_canton = FRA_republic
		priority = 99
		trigger = {
			coa_def_republic_trigger = yes
			# TODO
		}
	}	
	flag_definition = {
		coa = FRA_republic
		subject_canton = FRA_republic
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = FRA_revolutionary_republic
		subject_canton = FRA_revolutionary_republic
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

FCB = { # Palatinate of Burgundy
	flag_definition = {
		coa = FCB
		priority = 1
	}
	flag_definition = {
		coa = FCB_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}		
}

FRM = { # Fermo
	flag_definition = {
		coa = FRM
		priority = 1
	}
	flag_definition = {
		coa = FRM_guelphs
		priority = 2
		trigger = {
			coa_def_guelphs_trigger = yes
		}
	}
}

GAZ = { # Gazaria
	flag_definition = {
		coa = GAZ_castle
		priority = 1
	}
	flag_definition = {
		coa = GAZ
		priority = 10
		trigger = {
			coa_def_christian_trigger = yes
		}
	}
}

GBH = { # Grubenhagen
	flag_definition = {
		coa = GBH
		priority = 1
	}
	flag_definition = {
		coa = BRU_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}	
}

GBR = { # Great Britain
	# NB: all subject cantons need to be defined for this tag
	flag_definition = {
		coa = GBR_1603
		subject_canton = sub_GBR_union_jack_1606
		priority = 1
	}
	flag_definition = {
		coa = GBR_1603_SCO
		subject_canton = GBR_scottish
		priority = 2
		trigger = {
			coa_def_scottish_trigger = yes
		}
	}
	flag_definition = {
		coa = GBR_1603_no_ireland
		subject_canton = GBR_scottish
		priority = 3
		trigger = {
			coa_def_GBR_ireland_trigger = no
		}
	}
	flag_definition = {
		coa = GBR_1603_SCO_no_ireland
		subject_canton = GBR_scottish
		priority = 4
		trigger = {
			coa_def_scottish_trigger = yes
			coa_def_GBR_ireland_trigger = no
		}
	}
	flag_definition = {
		coa = GBR_fleurs_scotland_no_ireland
		subject_canton = sub_GBR_union_jack_1606
		priority = 7
		trigger = {
			coa_def_scottish_trigger = yes
			coa_def_paris_ownership_trigger = yes
			coa_def_GBR_ireland_trigger = yes
		}
	}
	flag_definition = {
		coa = GBR_fleurs_scotland
		subject_canton = sub_GBR_union_jack_1606
		priority = 8
		trigger = {
			coa_def_scottish_trigger = yes
			coa_def_paris_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = GBR_fleurs_no_ireland
		subject_canton = sub_GBR_union_jack_1606
		priority = 9
		trigger = {
			coa_def_paris_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = GBR_fleurs
		subject_canton = sub_GBR_union_jack_1606
		priority = 10
		trigger = {
			coa_def_paris_ownership_trigger = yes
			coa_def_GBR_ireland_trigger = yes
		}
	}
	flag_definition = {
		coa = GBR_no_fleurs
		subject_canton = sub_GBR_union_jack_1606
		priority = 11
		trigger = {
			coa_def_lost_french_possessions_trigger = yes
		}
	}
	flag_definition = {
		coa = GBR_no_fleurs_ireland
		subject_canton = sub_GBR_union_jack_1606
		priority = 12
		trigger = {
			coa_def_GBR_ireland_trigger = yes
			coa_def_lost_french_possessions_trigger = yes
		}
	}
	flag_definition = {
		coa = GBR_no_fleurs_scottish
		subject_canton = GBR_scottish
		priority = 13
		trigger = {
			coa_def_lost_french_possessions_trigger = yes
			coa_def_scottish_trigger = yes
		}
	}
	flag_definition = {
		coa = GBR_no_fleurs_scottish_ireland
		subject_canton = GBR_scottish
		priority = 14
		trigger = {
			coa_def_lost_french_possessions_trigger = yes
			coa_def_scottish_trigger = yes
			coa_def_GBR_ireland_trigger = yes
		}
	}
	flag_definition = {
		coa = GBR_welsh
		subject_canton = GBR_black
		priority = 30
		trigger = {
			OR = {
				coa_def_welsh_trigger = yes
				coa_def_GBR_WLS_trigger = yes
			}
			coa_def_lost_french_possessions_trigger = no
		}
	}
	flag_definition = {
		coa = GBR_welsh_no_fleurs 
		subject_canton = GBR_black
		priority = 31
		trigger = {
			OR = {
				coa_def_welsh_trigger = yes
				coa_def_GBR_WLS_trigger = yes
			}
			coa_def_lost_french_possessions_trigger = yes
		}
	}	
	flag_definition = {
		coa = GBR_welsh_ireland
		subject_canton = GBR_black
		priority = 32
		trigger = {
			OR = {
				coa_def_welsh_trigger = yes
				coa_def_GBR_WLS_trigger = yes	
			}
			coa_def_GBR_ireland_trigger = yes
			coa_def_lost_french_possessions_trigger = no
		}
	}	
	flag_definition = {
		coa = GBR_welsh_no_fleurs_ireland
		subject_canton = GBR_black
		priority = 33
		trigger = {
			OR = {
				coa_def_welsh_trigger = yes
				coa_def_GBR_WLS_trigger = yes
			}
			coa_def_GBR_ireland_trigger = yes
			coa_def_lost_french_possessions_trigger = yes
		}
	}
	flag_definition = {
		coa = GBR_irish
		subject_canton = GBR_irish_union
		priority = 40
		trigger = {
			OR = {
				coa_def_irish_trigger = yes
				coa_def_GBR_IRE_trigger = yes
			}
			coa_def_lost_french_possessions_trigger = no
		}
	}		
	flag_definition = {
		coa = GBR_irish_no_fleurs
		subject_canton = GBR_irish_union
		priority = 41
		trigger = {
			OR = {
				coa_def_irish_trigger = yes
				coa_def_GBR_IRE_trigger = yes
			}
			coa_def_lost_french_possessions_trigger = yes
		}
	}	
	flag_definition = {
		coa = GBR_cornish
		subject_canton = GBR_black
		priority = 42
		trigger = {
			OR = {
				coa_def_cornish_trigger = yes
				coa_def_GBR_CRN_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = GBR_cornish_ireland
		subject_canton = GBR_black
		priority = 43
		trigger = {
			OR = {
				coa_def_cornish_trigger = yes
				coa_def_GBR_CRN_trigger = yes
			}
			coa_def_GBR_ireland_trigger = yes
		}
	}	
	
	# Union Jack (from age 5)
	flag_definition = {
		coa = GBR
		subject_canton = sub_GBR_union_jack_1606
		priority = 50
		trigger = {
			coa_def_date_after_1600 = yes
		}
	}
	flag_definition = {
		coa = GBR_uk
		subject_canton = GBR_uk
		priority = 51
		trigger = {
			coa_def_GBR_uk_trigger = yes
			coa_def_date_after_1600 = yes
		}
	}
	flag_definition = {
		coa = GBR_black
		subject_canton = GBR_black
		priority = 52
		trigger = {
			coa_def_celtic_group_trigger = yes # Welsh or Cornish
			coa_def_date_after_1600 = yes
		}
	}
	flag_definition = {
		coa = GBR_uk_black
		subject_canton = GBR_uk_black
		priority = 53
		trigger = {
			coa_def_celtic_group_trigger = yes # Welsh or Cornish
			coa_def_date_after_1600 = yes
			coa_def_GBR_uk_trigger = yes
		}
	}
	flag_definition = {
		coa = GBR_scottish
		subject_canton = GBR_scottish
		priority = 54
		trigger = {
			coa_def_scottish_trigger = yes
			coa_def_date_after_1600 = yes
		}
	}
	flag_definition = {
		coa = GBR_irish_union
		subject_canton = GBR_irish_union
		priority = 55
		trigger = {			
			OR = {
				coa_def_irish_trigger = yes
				coa_def_GBR_IRE_trigger = yes
			}
			coa_def_date_after_1600 = yes
		}
	}
	# France added to union
	flag_definition = {
		coa = GBR_union_jack_fleurs
		subject_canton = GBR_union_jack_fleurs
		priority = 60
		trigger = {
			coa_def_paris_ownership_trigger = yes
			coa_def_date_after_1600 = yes
		}
	}	
	flag_definition = {
		coa = GBR_union_jack_fleurs_uk
		subject_canton = GBR_union_jack_fleurs_uk
		priority = 61
		trigger = {
			coa_def_paris_ownership_trigger = yes
			coa_def_date_after_1600 = yes
			coa_def_GBR_uk_trigger = yes
		}
	}		
	
	# Republics
	
	flag_definition = {
		coa = GBR_republic
		subject_canton = ENG # Simple cantons
		priority = 200
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = GBR_republic_ireland
		subject_canton = ENG
		priority = 201
		trigger = {
			coa_def_republic_trigger = yes
			coa_def_GBR_ireland_trigger = yes
		}
	}
	flag_definition = {
		coa = GBR_republic_scottish
		subject_canton = SCO_saltire
		priority = 202
		trigger = {
			coa_def_republic_trigger = yes
			coa_def_scottish_trigger = yes
		}
	}
	flag_definition = {
		coa = GBR_republic_scottish_ireland
		subject_canton = SCO_saltire
		priority = 203
		trigger = {
			coa_def_republic_trigger = yes
			coa_def_scottish_trigger = yes
			coa_def_GBR_ireland_trigger = yes
		}
	}
	flag_definition = {
		coa = GBR_republic_welsh
		subject_canton = sub_WLS_cross
		priority = 204
		trigger = {
			coa_def_republic_trigger = yes
			OR = {
				coa_def_welsh_trigger = yes
				coa_def_GBR_WLS_trigger = yes
			}
		}
	}	
	flag_definition = {
		coa = GBR_republic_welsh_ireland
		subject_canton = sub_WLS_cross
		priority = 205
		trigger = {
			coa_def_republic_trigger = yes
			OR = {
				coa_def_welsh_trigger = yes
				coa_def_GBR_WLS_trigger = yes
				coa_def_GBR_ireland_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = GBR_republic_irish
		subject_canton = sub_IRE_saltire
		priority = 206
		trigger = {
			coa_def_republic_trigger = yes
			OR = {
				coa_def_irish_trigger = yes
				coa_def_GBR_IRE_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = GBR_republic_cornish
		subject_canton = sub_CRN_cross
		priority = 207
		trigger = {
			coa_def_republic_trigger = yes
			OR = {
				coa_def_cornish_trigger = yes
				coa_def_GBR_CRN_trigger = yes
			}
		}
	}	
	flag_definition = {
		coa = GBR_republic_cornish_ireland
		subject_canton = sub_CRN_cross
		priority = 208
		trigger = {
			coa_def_republic_trigger = yes
			OR = {
				coa_def_cornish_trigger = yes
				coa_def_GBR_CRN_trigger = yes
				coa_def_GBR_ireland_trigger = yes
			}
		}
	}		
	
	# Revolutionary
	flag_definition = {
		coa = GBR_revolutionary_republic
		subject_canton = GBR_revolutionary_republic
		priority = 300
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

GBS = { # Gabes
	flag_definition = {
		coa = GBS
		priority = 1
	}
	flag_definition = {
		coa = GBS_border
		priority = 10
		trigger = {
			coa_def_MOR_ensign_trigger = yes
		}
	}
}

GEN = { # Genoa
	flag_definition = {
		coa = GEN
		priority = 1
	}
	flag_definition = {
		coa = GEN_checky
		priority = 10
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

GER = { # Germany  
	flag_definition = {
		coa = GER_cross
		priority = 1
	}	
	flag_definition = {
		coa = GER_eagle
		priority = 2
		trigger = {
			coa_def_monarchy_trigger = yes
		}		
	}
	flag_definition = {
		coa = GER
		priority = 50
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
		}
	}	
	flag_definition = {
		coa = GER_tricolor_escutcheon
		priority = 51
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_monarchy_trigger = yes
		}
	}
	flag_definition = {
		coa = GER_tricolor_revolutionary
		priority = 100
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

GNV = { # Geneva
	flag_definition = {
		coa = GNV
		priority = 1
	}
	flag_definition = {
		coa = GNV_savoy
		priority = 50
		trigger = {
			coa_def_savoy_dynasty_trigger = yes
		}
	}
}

GRA = { # Granada
	# GRA - Nasrid emirate
	# GRA_spanish - Spanish kingdom after 1492

	flag_definition = {
		coa = GRA
		priority = 1
	}
	flag_definition = {
		coa = GRA_spanish
		priority = 10
		trigger = {
			coa_def_christian_trigger = yes
		}
	}
	flag_definition = {
		coa = GRA_border_aragon
		priority = 11
		trigger = {
			coa_def_christian_trigger = yes
			coa_def_ARA_ensign_trigger = yes
		}
	}
	flag_definition = {
		coa = GRA_spanish_border
		priority = 12
		trigger = {
			coa_def_christian_trigger = yes
			OR = {
				coa_def_CAS_ensign_trigger = yes
				coa_def_SPA_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = GRA_spanish_border_castles
		priority = 13
		trigger = {
			coa_def_christian_trigger = yes
			coa_def_POR_ensign_trigger = yes
		}
	}
}

GRL = { # Greenland
	flag_definition = {
		coa = GRL
		priority = 1
	}
	flag_definition = {
		coa = GRL_cross
		priority = 10
		trigger = {
			coa_def_christian_trigger = yes
			coa_def_republic_trigger = yes
		}
	}
}

GUB = { # Gubbio
	flag_definition = {
		coa = GUB
		priority = 1
	}
	flag_definition = {
		coa = GUB_guelphs
		priority = 2
		trigger = {
			coa_def_guelphs_trigger = yes
		}
	}
	flag_definition = {
		coa = GUB_ghibellines
		priority = 3
		trigger = {
			coa_def_ghibellines_trigger = yes
		}
	}
}

# GUY TODO

HAB = { # Austria TODO
	flag_definition = {
		coa = HAB
		priority = 1
	}
	flag_definition = {
		coa = HAB_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}	
	flag_definition = {
		coa = HAB_IMPERIAL
		priority = 50
		trigger = {
			has_variable = hab_imperial_flag # Monarchy, empire rank, revo era
		}
	}
}

HAC = { # Hachberg
	flag_definition = {
		coa = HAC_bend_chief
		priority = 1
	}
	flag_definition = {
		coa = HAC
		priority = 2
		trigger = {
			OR = {
				coa_def_discovery_age_3_trigger = yes
				coa_def_duchy_or_higher_trigger = yes
			}
		}
	}
}

HAI = { # Hainaut
	flag_definition = {
		coa = HAI
		priority = 1
	}
	flag_definition = {
		coa = HAI_ancient
		priority = 50
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
}

HAN = { # Hannover
	flag_definition = {
		coa = HAN
		priority = 1
	}
	flag_definition = {
		coa = HAN_bicolor_escutcheon
		priority = 2
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
		}
	}
	flag_definition = {
		coa = HAN_bicolor
		priority = 100
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

HDA = { # Nara Hada
	flag_definition = {
		coa = HDA
		priority = 1
	}
	flag_definition = {
		coa = HDA_blue_banner
		priority = 10
		trigger = {
			coa_def_CHI_ensign_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

HEN = { # Old North
	flag_definition = {
		coa = HEN
		subject_canton = HEN
		priority = 1
	}
}

HES = { # Hessen
	flag_definition = {
		coa = HES
		priority = 1
	}
	flag_definition = {
		coa = HES_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}		
	flag_definition = {
		coa = HES_grand_duchy
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

HIN = { #Hindustan
	flag_definition = {
		coa = HIN
		priority = 1
	}
	flag_definition = {
		coa = HIN_bharat
		priority = 100
		trigger = {
			coa_def_hindu_trigger = yes
		}
	}
}

HOI = { # Nara Hoifa
	flag_definition = {
		coa = HOI
		priority = 1
	}
	flag_definition = {
		coa = HOI_blue_banner
		priority = 10
		trigger = {
			coa_def_CHI_ensign_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

HPL = { # Holstein-Plon/Wagria
	flag_definition = {
		coa = HPL_wagria
		priority = 1
	}
	flag_definition = {
		coa = HPL # Starting
		priority = 10
		trigger = {
			coa_def_schauenburg_dynasty_trigger = yes
		}
	}	
	flag_definition = {
		coa = HPL_oldenburg
		priority = 11
		trigger = {
			coa_def_oldenburg_dynasty_trigger = yes
		}
	}
}

HSP = { # Holstein-Pinneberg
	flag_definition = {
		coa = HSP
		priority = 1
	}
	flag_definition = {
		coa = HSP_quarterly
		priority = 10
		trigger = {
			coa_def_schauenburg_dynasty_trigger = yes
			coa_def_duchy_or_higher_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}	
}

# HTR = { # Holstein-Rendsburg TODO

HUN = { # Hungary
	flag_definition = {
		coa = HUN
		priority = 1
	}
	flag_definition = {
		coa = HUN_quarterly
		priority = 2
		trigger = {
			coa_def_discovery_age_3_trigger = yes
		}
	}	
	
	# Dynasties
	
	flag_definition = {
		coa = HUN_luxembourg
		priority = 5
		trigger = {
			OR = {
				coa_def_luxembourg_dynasty_trigger = yes
				coa_def_BOH_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = HUN_Anjou
		priority = 6
		trigger = {
			coa_def_capetian_trigger = yes
		}
	}
	flag_definition = {
		coa = HUN_anjou_quarterly
		priority = 7
		trigger = {
			coa_def_capetian_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}
	flag_definition = {
		coa = HUN_quarterly_hunyadi
		priority = 8
		trigger = {
			coa_def_hunyadi_dynasty_trigger = yes
		}
	}
	
	# Bohemia

	flag_definition = { # Early per pale design
		coa = HUN_bohemia_per_pale
		priority = 40
		trigger = {
			coa_def_bohemia_ownership_trigger = yes
		}
	}	
	flag_definition = {
		coa = HUN_bohemia_habsburg_per_pale
		priority = 41
		trigger = {
			coa_def_bohemia_ownership_trigger = yes
			coa_def_habsburg_dynasty_trigger = yes
		}
	}		
	flag_definition = { # Quartering in other cases
		coa = HUN_bohemia
		priority = 50
		trigger = {
			coa_def_bohemia_ownership_trigger = yes
			coa_def_discovery_age_3_trigger = yes # otherwise per pale above
		}
	}
	flag_definition = {
		coa = HUN_bohemia_angevine
		priority = 51
		trigger = {
			coa_def_bohemia_ownership_trigger = yes
			coa_def_capetian_trigger = yes
		}
	}
	flag_definition = {
		coa = HUN_bohemia_habsburg
		priority = 52
		trigger = {
			coa_def_bohemia_ownership_trigger = yes
			coa_def_habsburg_dynasty_trigger = yes
			coa_def_discovery_age_3_trigger = yes # otherwise per pale above
		}
	}	
	flag_definition = {
		coa = HUN_quarterly_bohemia_hunyadi
		priority = 53
		trigger = {
			coa_def_bohemia_ownership_trigger = yes
			coa_def_hunyadi_dynasty_trigger = yes
		}
	}		
	
	# Poland
	
	flag_definition = {
		coa = HUN_poland
		priority = 55
		trigger = {
			coa_def_poland_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = HUN_poland_angevine
		priority = 56
		trigger = {
			coa_def_poland_ownership_trigger = yes
			coa_def_capetian_trigger = yes
		}
	}
	flag_definition = {
		coa = HUN_poland_habsburg
		priority = 57
		trigger = {
			coa_def_poland_ownership_trigger = yes
			coa_def_habsburg_dynasty_trigger = yes
		}
	}	
	
	# Austria
	
	flag_definition = {
		coa = HUN_austria
		priority = 60
		trigger = {
			coa_def_austria_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = HUN_austria_angevine
		priority = 61
		trigger = {
			coa_def_austria_ownership_trigger = yes
			coa_def_capetian_trigger = yes
		}
	}		
	
	# BOH POL
	flag_definition = {
		coa = HUN_bohemia_poland
		priority = 70
		trigger = {
			coa_def_bohemia_ownership_trigger = yes
			coa_def_poland_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = HUN_bohemia_poland_angevine
		priority = 71
		trigger = {
			coa_def_bohemia_ownership_trigger = yes
			coa_def_poland_ownership_trigger = yes
			coa_def_capetian_trigger = yes
		}
	}
	flag_definition = {
		coa = HUN_bohemia_poland_habsburg
		priority = 72
		trigger = {
			coa_def_bohemia_ownership_trigger = yes
			coa_def_poland_ownership_trigger = yes
			coa_def_habsburg_dynasty_trigger = yes
		}
	}	
	
	# BOH HAB
	flag_definition = {
		coa = HUN_austria_bohemia
		priority = 75
		trigger = {
			coa_def_austria_ownership_trigger = yes
			coa_def_bohemia_ownership_trigger = yes
		}
	}	
	flag_definition = {
		coa = HUN_austria_bohemia_angevine
		priority = 76
		trigger = {
			coa_def_austria_ownership_trigger = yes
			coa_def_capetian_trigger = yes
		}
	}		
	
	flag_definition = {
		coa = HUN_revolutionary_republic
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

ICE = { # Iceland
	flag_definition = {
		coa = ICE
		priority = 1
	}
	flag_definition = {
		coa = ICE_lion
		priority = 10
		trigger = {
			coa_def_NOR_ensign_trigger = yes
		}
	}
	# TODO danish vassal stockfish design
}

IMO = { # Imola
	flag_definition = {
		coa = IMO
		priority = 1
	}
	flag_definition = {
		coa = IMO_guelphs
		priority = 2
		trigger = {
			coa_def_guelphs_trigger = yes
		}
	}		
	flag_definition = { # Starting
		coa = IMO_alidosi
		priority = 10
		trigger = {
			coa_def_alidosi_dynasty_trigger = yes
		}
	}	
}

INO = { # Inowroclaw
	flag_definition = {
		coa = INO
		priority = 1
	}
	flag_definition = {
		coa = INO_TEU
		priority = 50
		trigger = {
			coa_def_teutonic_order_trigger = yes
		}
	}
}

IRE = { # Ireland
	flag_definition = {
		coa = IRE
		subject_canton = sub_IRE_saltire
		priority = 1
	}
	flag_definition = {
		coa = IRE_tressure
		subject_canton = sub_IRE_saltire
		priority = 2
		trigger = {
			coa_def_SCO_ensign_trigger = yes
		}
	}
	flag_definition = {
		coa = IRE_green
		subject_canton = sub_IRE_saltire
		priority = 10
		trigger = {
			coa_def_celtic_group_trigger = yes
		}
	}
	flag_definition = {
		coa = sub_IRE_saltire
		subject_canton = sub_IRE_saltire
		priority = 20
		trigger = {
			scope:actor ?= {
				religion ?= { this = religion:anglican }
			}
		}
	}
	flag_definition = {
		coa = IRE_revolutionary_republic
		subject_canton = IRE_revolutionary_republic
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = IRE_revolutionary_republic_protestant
		subject_canton = IRE_revolutionary_republic_protestant		
		priority = 201
		trigger = {
			scope:actor ?= {
				gfx_culture_applicable = protestant_gfx
			}
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

ITA = { # Italy
	# Default
	flag_definition = {
		coa = ITA_guelph
		priority = 1
	}
	flag_definition = {
		coa = ITA
		priority = 2
		trigger = {
			coa_def_ghibellines_trigger = yes
		}
	}
	
	# Naples
	
	flag_definition = {
		coa = ITA_naples
		priority = 10
		trigger = {
			coa_def_ITA_naples_trigger = yes
		}
	}	
	
	# Sicily
	
	flag_definition = {
		coa = ITA_sicily
		priority = 10
		trigger = {
			coa_def_ITA_sicily_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_sicily_ghibelline
		priority = 11
		trigger = {
			coa_def_ITA_sicily_trigger = yes
			coa_def_ghibellines_trigger = yes
		}
	}	
	
	# Verona
	
	flag_definition = {
		coa = ITA_verona
		priority = 10
		trigger = {
			coa_def_ITA_verona_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_verona_ghibelline
		priority = 11
		trigger = {
			coa_def_ITA_verona_trigger = yes
			coa_def_ghibellines_trigger = yes
		}
	}		
	
	# Milano
	
	flag_definition = {
		coa = ITA_milano
		priority = 10
		trigger = {
			coa_def_ITA_milano_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_milano_verona
		priority = 11
		trigger = {
			coa_def_ITA_milano_trigger = yes
			coa_def_verona_ownership_trigger = yes
		}
	}	
	flag_definition = {
		coa = ITA_milano_ghibelline
		priority = 12
		trigger = {
			coa_def_ITA_milano_trigger = yes
			coa_def_ghibellines_trigger = yes
		}
	}		
	flag_definition = {
		coa = ITA_milano_ghibelline_verona
		priority = 13
		trigger = {
			coa_def_ITA_milano_trigger = yes
			coa_def_ghibellines_trigger = yes
			coa_def_verona_ownership_trigger = yes			
		}
	}
	
	# Venice
	
	flag_definition = {
		coa = ITA_venice
		priority = 10
		trigger = {
			coa_def_ITA_venice_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_venice_ghibelline
		priority = 11
		trigger = {
			coa_def_ITA_venice_trigger = yes
			coa_def_ghibellines_trigger = yes
		}
	}		
	
	# Florence
	
	flag_definition = {
		coa = ITA_florence
		priority = 10
		trigger = {
			coa_def_ITA_florence_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_florence_verona
		priority = 11
		trigger = {
			coa_def_ITA_florence_trigger = yes
			coa_def_verona_ownership_trigger = yes
		}
	}	
	flag_definition = {
		coa = ITA_florence_ghibelline
		priority = 12
		trigger = {
			coa_def_ITA_florence_trigger = yes
			coa_def_ghibellines_trigger = yes
		}
	}		
	flag_definition = {
		coa = ITA_florence_ghibelline_verona
		priority = 13
		trigger = {
			coa_def_ITA_florence_trigger = yes
			coa_def_ghibellines_trigger = yes
			coa_def_verona_ownership_trigger = yes			
		}
	}	

	# Pisa
	
	flag_definition = {
		coa = ITA_pisa
		priority = 10
		trigger = {
			coa_def_ITA_pisa_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_pisa_ghibelline
		priority = 11
		trigger = {
			coa_def_ITA_pisa_trigger = yes
			coa_def_ghibellines_trigger = yes
		}
	}
	
	# Genoa
	
	flag_definition = {
		coa = ITA_genoa
		priority = 10
		trigger = {
			coa_def_ITA_genoa_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_genoa_ghibelline
		priority = 11
		trigger = {
			coa_def_ITA_genoa_trigger = yes
			coa_def_ghibellines_trigger = yes
		}
	}	
	flag_definition = {
		coa = ITA_genoa_ghibelline_pisa_milano
		priority = 12
		trigger = {
			coa_def_ITA_genoa_trigger = yes
			coa_def_pisa_ownership_trigger = yes
			coa_def_milano_ownership_trigger = yes
			coa_def_ghibellines_trigger = yes
		}
	}
	
	# Tricolor
	
	flag_definition = {
		coa = ITA_tricolor
		priority = 100
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
		}
	}
	# Plausible Variants
	flag_definition = {
		coa = ITA_tricolor_savoy
		priority = 101
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			OR = {
				coa_def_ITA_savoy_trigger = yes
				coa_def_ITA_pavia_trigger = yes
				coa_def_ghibellines_trigger = yes
				coa_def_ITA_asti_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = ITA_tricolor_genoa
		priority = 102
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			OR = {
				coa_def_ITA_genoa_trigger = yes
				coa_def_ITA_milano_trigger = yes
				coa_def_ITA_bologna_trigger = yes
				coa_def_ITA_alessandria_trigger = yes
				coa_def_guelphs_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = ITA_tricolor_verona
		priority = 103
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_ITA_verona_trigger = yes
		}
	}	
	flag_definition = {
		coa = ITA_tricolor_pisa
		priority = 104
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_ITA_pisa_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_tricolor_venice
		priority = 105
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_ITA_venice_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_tricolor_florence
		priority = 106
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_ITA_florence_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_tricolor_parma
		priority = 107
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_ITA_parma_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_tricolor_sardinia
		priority = 110
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_ITA_sardinia_trigger = yes
		}
	}
	# Historical Piedmont-Sardinia
	flag_definition = {
		coa = ITA_tricolor_savoy_sardinia
		priority = 120
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			OR = {
				AND = {
					coa_def_ITA_sardinia_trigger = yes
					coa_def_savoy_dynasty_trigger = yes	
				}
				coa_def_ITA_piedmont_trigger = yes
			}
		}
	}	
	
	# Dynasties - Crowned design, priority over country variant
	flag_definition = {
		coa = ITA_tricolor_medici
		priority = 130
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_medici_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_tricolor_este
		priority = 131
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_este_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_tricolor_scaglieri
		priority = 132
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_scaglieri_dynasty_trigger = yes
		}
	}	
	flag_definition = {
		coa = ITA_tricolor_visconti
		priority = 133
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_visconti_dynasty_trigger = yes
		}
	}
	# Carraresi & Aleramici
	
	flag_definition = {
		coa = ITA_tricolor_capetian
		priority = 140
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_capetian_semy_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_tricolor_angevine
		priority = 141
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_angevine_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_tricolor_aragon
		priority = 142
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_aragon_dynasty_trigger = yes
		}
	}	
	flag_definition = {
		coa = ITA_tricolor_castile
		priority = 143
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_castile_dynasty_trigger = yes
		}
	}	
	flag_definition = {
		coa = ITA_tricolor_habsburg
		priority = 144
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_habsburg_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_tricolor_palaiologos
		priority = 145
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_palaiologos_dynasty_trigger = yes
		}
	}		
	flag_definition = {
		coa = ITA_tricolor_savoie
		priority = 150
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
			coa_def_savoy_dynasty_trigger = yes
		}
	}	
	flag_definition = {
		coa = ITA_revolutionary
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
			coa_def_revolutions_age_6_trigger = yes
		}
	}	
}

JAP = { # Japan
	flag_definition = {
		coa = JAP
		# allow_overlord_canton = yes
		priority = 1
	}
	flag_definition = {
		coa = JAP_monarchy
		priority = 110
		trigger = {
			coa_def_monarchy_trigger = yes
		}
	}
}

JUL = { # Juliers
	flag_definition = {
		coa = JUL
		priority = 1
	}
	flag_definition = {
		coa = JUL_heimbach
		priority = 5
		trigger = {
			coa_def_monarchy_trigger = yes
		}
	}
	flag_definition = {
		coa = JUL_heimbach_quarterly
		priority = 6
		trigger = {
			coa_def_monarchy_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}	
	flag_definition = {
		coa = JUL_berg
		priority = 10
		trigger = {
			coa_def_berg_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = JUL_late
		priority = 20
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			coa_def_duchy_or_higher_trigger = yes
		}
	}	
}

KIE = { # Kiev
	flag_definition = {
		coa = KIE
		priority = 1
	}
	flag_definition = {
		coa = KIE_PLC
		priority = 2
		trigger = {
			OR = {
				coa_def_LIT_ensign_trigger = yes
				coa_def_POL_ensign_trigger = yes
				coa_def_PLC_ensign_trigger = yes
			}
		}
	}		
}

KOL = { # Cologne
	flag_definition = {
		coa = KOL_civic
		priority = 1
	}
	flag_definition = {
		coa = KOL_cross
		priority = 10
		trigger = {
			coa_def_theocracy_trigger = yes
		}
	}
	flag_definition = {
		coa = KOL
		priority = 20 # Starting
		trigger = {
			coa_def_theocracy_trigger = yes
			coa_def_hre_archbishop_elector_trigger = yes
		}
	}
	flag_definition = {
		coa = KOL_revolutionary
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}		
}

KTG = { # Kengtung
	flag_definition = {
		coa = KTG
		priority = 1
	}
	flag_definition = {
		coa = KTG_buddhist
		priority = 50
		trigger = {
			coa_def_buddhist_trigger = yes
		}
	}
}

LAU = { # Saxony-Lauenburg
	flag_definition = {
		coa = LAU_horse
		priority = 1
	}
	flag_definition = {
		coa = SAX
		priority = 2
		trigger = {
			NOT = { country_exists = c:SAX }
		}
	}	
	flag_definition = {
		coa = LAU
		priority = 5
		trigger = {
			coa_def_askanier_dynasty_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}
	flag_definition = {
		coa = LAU_oldenburg
		priority = 10
		trigger = {
			coa_def_oldenburg_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = SAX_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}		
	flag_definition = {
		coa = LAU_bicolor
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}	
}

LBV = { # Lower Bavaria
	flag_definition = {
		coa = LBV
		priority = 1
	}
	flag_definition = {
		coa = BAV_emperor
		priority = 0 # Commented out for now
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}
}

LCA = { # Bellinzona
	flag_definition = {
		coa = LCA
		priority = 1
	}
	flag_definition = {
		coa = LCA_ghibellines
		priority = 2
		trigger = {
			coa_def_ghibellines_trigger = yes
		}
	}
	flag_definition = {
		coa = LCA_milanese
		priority = 3
		trigger = {
			OR = {
				coa_def_MLO_ensign_trigger = yes
				coa_def_visconti_dynasty_trigger = yes
			}
		}
	}
}

LCZ = { # Leczyca
	flag_definition = {
		coa = LCZ
		priority = 1
	}
	flag_definition = {
		coa = LCZ_TEU
		priority = 50
		trigger = {
			coa_def_teutonic_order_trigger = yes
		}
	}
}

LIE = { # Liège
	flag_definition = {
		coa = LIE
		priority = 1
	}
	flag_definition = {
		coa = LIE_bicolor
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
}

LIT = { # Lithuania
	flag_definition = {
		coa = LIT
		priority = 1
	}
	flag_definition = {
		coa = LIT_jagiellon
		priority = 10
		trigger = {
			OR = {
				coa_def_christian_trigger = yes
				coa_def_jagiellon_dynasty_trigger = yes
			}
		}
	}
}

LON = { # Leon

	flag_definition = {
		coa = LON
		priority = 1
	}
	flag_definition = {
		coa = CAS_leon_castile
		priority = 3
		trigger = {
			NOR = { 
				country_exists = c:CAS
				country_exists = c:SPA
			}
		}
	}
	flag_definition = {
		coa = LON_tricolor
		priority = 150
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

LOR = { # Lorraine
	flag_definition = {
		coa = LOR
		priority = 1
	}
	flag_definition = {
		coa = LOR_capetian
		priority = 40
		trigger = {
			coa_def_capetian_trigger = yes
		}
	}
	flag_definition = {
		coa = LOR_burgundian
		priority = 41
		trigger = {
			OR = {
				coa_def_burgundy_dynasty_trigger = yes
				coa_def_BUR_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = LOR_habsburg
		priority = 50
		trigger = {
			OR = {
				coa_def_habsburg_dynasty_trigger = yes
				coa_def_HAB_ensign_trigger = yes
			}
		}
	}
}

LUB = { # Lübeck
	flag_definition = {
		coa = LUB
		priority = 1
	}
	flag_definition = {
		coa = LUB_barry
		priority = 2
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
		}
	}
	flag_definition = {
		coa = LUB_eagle
		priority = 5
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			coa_def_duchy_or_higher_trigger = yes
		}
	}	
}

LUC = { # Lucca
	flag_definition = {
		coa = LUC
		priority = 1
	}
	flag_definition = {
		coa = LUC_revolutionary
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

LUN = { # Luneburg
	flag_definition = {
		coa = LUN
		priority = 1
	}
	flag_definition = {
		coa = LUN_quarterly
		priority = 100
		trigger = {
			coa_def_duchy_or_higher_trigger = yes
			coa_def_brunswick_ownership_trigger = yes
		}
	}
}

LUX = { # Luxembourg
	flag_definition = {
		coa = LUX
		priority = 1
	}
	flag_definition = {
		coa = LUX_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}		
	flag_definition = {
		coa = LUX_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
	# TODO
}

MAK = { # Makuria
	flag_definition = {
		coa = MAK
		priority = 1
	}
	flag_definition = {
		coa = MAK_cross
		priority = 2
		trigger = {
			coa_def_christian_trigger = yes
		}
	}
}

MAN = { # Mantua
	flag_definition = {
		coa = MAN
		priority = 1
	}
	flag_definition = {
		coa = MAN_duchy
		priority = 2
		trigger = {
			# age 3 possibly
			coa_def_duchy_or_higher_trigger = yes
		}
	}
}

MDM = { # Marsan
	flag_definition = {
		coa = MDM_red
		priority = 1
	}
	flag_definition = {
		coa = MDM
		priority = 2
		trigger = {
			coa_def_capetian_trigger = yes
		}
	}
}

MEI = { # Meissen
	flag_definition = {
		coa = MEI
		priority = 1
	}
	flag_definition = {
		coa = MEI_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}		
	# TODO
}

MFA = { # Montferrat
	flag_definition = {
		coa = MFA
		priority = 1
	}
	flag_definition = {
		coa = MFA_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

MGE = { # Mongolia
	flag_definition = {
		coa = MGE
		priority = 1
	}
	flag_definition = {
		coa = MGE_soyombo
		priority = 100
		trigger = {
			coa_def_buddhist_trigger = yes
		}
	}
}

MIE = { # Maine
	flag_definition = {
		coa = MIE_ancient
		priority = 1
	}
	flag_definition = {
		coa = MIE
		priority = 2
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = MIE_three_fleurs
		priority = 3
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

MIS = { # Minsk
	flag_definition = {
		coa = MIS
		priority = 1
	}
	flag_definition = {
		coa = MIS_gediminas
		priority = 10
		trigger = {
			coa_def_gediminid_dynasty_trigger = yes
		}
	}	
}

MKL = { # Mecklenburg
	flag_definition = {
		coa = MKL
		priority = 1
	}
	flag_definition = {
		coa = MKL_schwerin
		priority = 10
		trigger = {
			coa_def_duchy_or_higher_trigger = yes
			coa_def_schwerin_ownership_trigger = yes
		}
	}	
	flag_definition = {
		coa = MKL_schwerin_gustrow
		priority = 11
		trigger = {
			coa_def_duchy_or_higher_trigger = yes
			coa_def_schwerin_ownership_trigger = yes
			coa_def_gustrow_ownership_trigger = yes
		}
	}		
	flag_definition = {
		coa = MKL_pomerania
		priority = 12
		trigger = {
			coa_def_duchy_or_higher_trigger = yes
			coa_def_schwerin_ownership_trigger = yes
			coa_def_gustrow_ownership_trigger = yes
			coa_def_stettin_ownership_trigger = yes # a bit looser than entire pomerania
			coa_def_wolgast_ownership_trigger = yes
		}
	}			
	flag_definition = {
		coa = MKL_kingdom
		priority = 13
		trigger = {
			coa_def_kingdom_or_higher_trigger = yes
			coa_def_schwerin_ownership_trigger = yes
			coa_def_gustrow_ownership_trigger = yes
			coa_def_stettin_ownership_trigger = yes
			coa_def_wolgast_ownership_trigger = yes
			coa_def_brandenburg_ownership_trigger = yes
		}
	}	
	flag_definition = {
		coa = MKL_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}	
	flag_definition = {
		coa = MKL_barry_bull_head
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = MKL_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

MLL = { # Mallorca
	flag_definition = {
		coa = MLL_castle
		priority = 1
	}
	flag_definition = {
		coa = MLL
		priority = 50
		trigger = {
			coa_def_aragon_dynasty_trigger = yes
		}
	}
}

MLO = { # Milan
	flag_definition = {
		coa = MLO
		priority = 1
	}
	flag_definition = {
		coa = MLO_duchy
		priority = 2
		trigger = {
			coa_def_duchy_or_higher_trigger = yes
		}
	}
	flag_definition = {
		coa = MLO_duchy_france
		priority = 50
		trigger = {
			coa_def_capetian_trigger = yes
			coa_def_duchy_or_higher_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}	
	flag_definition = {
		coa = MLO_revolutionary_republic
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

MNI = { # Mong Nai
	flag_definition = {
		coa = MNI
		priority = 1
	}
	flag_definition = {
		coa = MNI_buddhist
		priority = 50
		trigger = {
			coa_def_buddhist_trigger = yes
		}
	}
}

MOY = { # Moray
	flag_definition = {
		coa = MOY
		subject_canton = MOY
		priority = 1
	}
	flag_definition = {
		coa = MOY_earldom
		subject_canton = MOY_earldom
		priority = 2
		trigger = {
			coa_def_SCO_ensign_trigger = yes
		}
	}
}

MRC = { # La Marche
	# MRC_ancient - Barruly AB - Lusignan
	# MRC - France & bend ch. 3 lions GA - Bourbon-La Marche
	# MRC_three_fleurs - France modern & bend ch. 3 lions GA

	flag_definition = {
		coa = MRC_ancient
		priority = 1
	}
	flag_definition = {
		coa = MRC
		priority = 2
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = MRC_three_fleurs
		priority = 3
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

MRT = { # Mortain
	flag_definition = {
		coa = MRT
		priority = 1
	}
	flag_definition = {
		coa = MRT_english
		priority = 10
		trigger = {
			OR = {
				coa_def_GBR_ensign_trigger = yes
				coa_def_ENG_ensign_trigger = yes
			}
		}
	}
}

MUN = { # Munster
	flag_definition = {
		coa = MUN_red
		priority = 1
	}
	flag_definition = {
		coa = MUN
		priority = 2
		trigger = {
			coa_def_theocracy_trigger = yes
		}
	}
	flag_definition = {
		coa = MUN_blue
		priority = 10
		trigger = {
			coa_def_theocracy_trigger = yes
			coa_def_FRA_ensign_trigger = yes
		}
	}
	flag_definition = {
		coa = MUN_keys
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = MUN_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

MSP = { # Malaspina
	flag_definition = {
		coa = MSP
		priority = 1
	}
	flag_definition = {
		coa = MSP_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

MSV = { # Mstislavl
	flag_definition = {
		coa = MSV
		priority = 1
	}
	flag_definition = {
		coa = MSV_polish
		priority = 10
		trigger = {
			OR = {
				coa_def_POL_ensign_trigger = yes
				coa_def_PLC_ensign_trigger = yes
				coa_def_jagiellon_dynasty_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = MSV_lithuanian
		priority = 11
		trigger = {
			coa_def_gediminid_dynasty_trigger = yes
		}
	}	
}

MZB = { # Mzab
	flag_definition = {
		coa = MZB
		priority = 1
	}
	flag_definition = {
		coa = MZB_red
		priority = 10
		trigger = {
			coa_def_MOR_ensign_trigger = yes
		}
	}
}

NAM = { # Namur
	flag_definition = {
		coa = NAM
		priority = 1
	}
	flag_definition = {
		coa = NAM_crowned
		priority = 5
		trigger = {
			coa_def_duchy_or_higher_trigger = yes
		}
	}
	flag_definition = {
		coa = NAM_no_bend
		priority = 10
		trigger = {
			coa_def_kingdom_or_higher_trigger = yes
		}
	}		
	flag_definition = {
		coa = NAM_bend
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}		
	flag_definition = {
		coa = NAM_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

NAP = { # Naples
	flag_definition = {
		coa = NAP_civic
		priority = 1
	}
	flag_definition = {
		coa = NAP_hauteville
		priority = 2
		trigger = {
			coa_def_monarchy_trigger = yes
		}
	}
	flag_definition = {
		coa = NAP_simple
		priority = 5
		trigger = {
			OR = {
				coa_def_iberian_trigger = yes
				coa_def_italian_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = NAP
		priority = 10
		trigger = {
			OR = {
				coa_def_french_trigger = yes
				coa_def_french_ruler_trigger = yes
				coa_def_FRA_ensign_trigger = yes
				coa_def_capetian_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = NAP_anjou_hungary
		priority = 20
		trigger = {
			OR = {
				coa_def_hungarian_trigger = yes
				coa_def_hungarian_ruler_trigger = yes
				coa_def_HUN_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = NAP_aragonese
		priority = 21
		trigger = {
			OR = {
				coa_def_ARA_ensign_trigger = yes
				coa_def_aragon_dynasty_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = NAP_habsburg
		priority = 22
		trigger = {
			OR = {
				coa_def_HAB_ensign_trigger = yes
				coa_def_habsburg_dynasty_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = NAP_civic
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}		
	flag_definition = {
		coa = NAP_civic_orle
		priority = 101
		trigger = {
			coa_def_republic_trigger = yes
			coa_def_date_after_1600 = yes
		}
	}	
	flag_definition = {
		coa = NAP_revolutionary_republic
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = NAP_horse
		priority = 201
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
			coa_def_FRA_ensign_trigger = yes
		}
	}	
}

NAV = { # Navarre          
	# NAV - Navarre
	# NAV_capetian - Per pale France & Navarre
	# NAV_aragon - Per saltire Aragon & Navarre

	flag_definition = {
		coa = NAV
		priority = 1
	}
	flag_definition = {
		coa = NAV_capetian
		priority = 20
		trigger = {
			coa_def_capetian_navarre_trigger = yes
		}
	}
	flag_definition = {
		coa = NAV_aragon
		priority = 21
		trigger = {
			coa_def_aragon_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = NAV_republic
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
}

NED = { # Netherlands
	# NED - Tricolor Prinsenvlag (Orange version)
	# NED_republic - Tricolor Prinsenvlag (Red)
	# NED_seven_stripes - 7 stripes Prinsenvlag
	# NED_lion_holland - Batavian lion 16th/17th c. colors OG
	# NED_lion - Same w/ modern tinctures GO

	# Batavian lion (early monarchy)
	flag_definition = { # Default monarchy
		coa = NED_lion
		priority = 1
	}
	flag_definition = {
		coa = NED_lion_holland
		priority = 10
		trigger = {
			OR = {
				coa_def_NED_hainaut_trigger = yes
				coa_def_NED_holland_trigger = yes
				coa_def_NED_zeeland_trigger = yes
				coa_def_avesnes_dynasty_trigger = yes
			}
		}
	}

	# Prinsenvlag
	flag_definition = {
		coa = NED_seven_stripes
		priority = 20
		trigger = {
			coa_def_reformation_age_4_trigger = yes
		}
	}
	flag_definition = {
		coa = NED
		priority = 21
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
		}
	}

	# Statenvlag
	flag_definition = {
		coa = NED_seven_stripes_republic
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = NED_republic
		priority = 101
		trigger = {
			coa_def_republic_trigger = yes
			coa_def_absolutism_age_5_trigger = yes
		}
	}
	flag_definition = {
		coa = NED_republic
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes # with dutch maiden in canton
		}
	}	
}

NEV = { # Nevers
	flag_definition = {
		coa = NEV
		priority = 1
	}
	flag_definition = {
		coa = NEV_flanders
		priority = 10
		trigger = {
			coa_def_dampierre_flanders_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = FCB_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}	
}

NOL = { # Northumbria
	flag_definition = {
		coa = NOL_ancient
		priority = 1
	}
	flag_definition = {
		coa = NOL_ancient_purple
		priority = 2
		trigger = {
			coa_def_kingdom_or_higher_trigger = yes
		}
	}	
	flag_definition = {
		coa = NOL_monarchy
		priority = 10
		trigger = {
			coa_def_percy_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = NOL_kingdom
		priority = 11
		trigger = {
			coa_def_percy_dynasty_trigger = yes
			coa_def_kingdom_or_higher_trigger = yes
		}
	}	

	flag_definition = {
		coa = NOL
		priority = 100
		trigger = {			
			coa_def_republic_trigger = yes
		}
	}
}

NOR = { # Norway
	flag_definition = {
		coa = NOR
		subject_canton = NOR
		priority = 1
	}
	flag_definition = {
		coa = NOR_late
		subject_canton = NOR_late
		priority = 2
		trigger = {
			coa_def_discovery_age_3_trigger = yes
		}		
	}	
	flag_definition = {
		coa = NOR_bjalbo
		subject_canton = NOR
		priority = 10
		trigger = {
			coa_def_bjalbo_dynasty_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}
	flag_definition = {
		coa = NOR_cross_lion
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = NOR_cross
		allow_overlord_canton = yes
		priority = 110
		trigger = {
			coa_def_monarchy_trigger = no
			coa_def_christian_trigger = yes
			coa_def_absolutism_age_5_trigger = yes
		}
	}	
}

NOV = { # Novgorod
	flag_definition = {
		coa = NOV_panther
		priority = 1
	}
	flag_definition = {
		coa = NOV
		priority = 50
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = NOV_LIT
		priority = 60
		trigger = {
			OR = {
				coa_def_LIT_ensign_trigger = yes
				coa_def_PLC_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = NOV_stripe
		priority = 100
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

NRB = { # Narbonne
	flag_definition = {
		coa = NRB
		priority = 1
	}
	flag_definition = {
		coa = NRB_capetian
		priority = 50
		trigger = {
			coa_def_capetian_trigger = yes
		}
	}
	flag_definition = {
		coa = NRB_france
		priority = 51
		trigger = {
			coa_def_capetian_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}
	flag_definition = {
		coa = NRB_aragon
		priority = 55
		trigger = {
			OR = {
				coa_def_aragon_dynasty_trigger = yes
				coa_def_ARA_ensign_trigger = yes
			}
		}
	}
}

NSA = { # Nassau
	flag_definition = {
		coa = NSA
		priority = 1
	}
	flag_definition = {
		coa = FCB_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}		
	flag_definition = {
		coa = NSA_duchy
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

NSE = { # North Sea Empire
	flag_definition = {
		coa = NSE
		subject_canton = NSE
		priority = 1
	}
	flag_definition = {
		coa = NSE_green
		subject_canton = NSE_green
		priority = 2
		trigger = {
			coa_def_irish_trigger = yes
		}		
	}
	flag_definition = {
		coa = NORSE
		subject_canton = NORSE
		priority = 200
		trigger = {
			coa_def_norse_trigger = yes
		}		
	}	
	# TODO republic & variants
}

NSH = { # Nassau-Hadamar
	flag_definition = {
		coa = NSH
		priority = 1
	}
	flag_definition = {
		coa = FCB_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}		
}

NSI = { # Nassau-Idstein
	flag_definition = {
		coa = NSI
		priority = 1
	}
	flag_definition = {
		coa = FCB_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}		
}

NSS = { # Nassau-Siegen
	flag_definition = {
		coa = NSS
		priority = 1
	}
	flag_definition = {
		coa = FCB_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}		
}

NSW = { # Nassau-Weilburg
	flag_definition = {
		coa = NSW
		priority = 1
	}
	flag_definition = {
		coa = FCB_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}		
}

NUS = { # Nusantara
	flag_definition = {
		coa = NUS
		priority = 1
	}
	flag_definition = {
		coa = NUS_bicolor
		priority = 2
		trigger = {
			coa_def_dharmic_trigger = no
		}
	}
}

OGL = { # Ouargla
	flag_definition = {
		coa = OGL
		priority = 1
	}
	flag_definition = {
		coa = OGL_red
		priority = 10
		trigger = {
			coa_def_MOR_ensign_trigger = yes
		}
	}
}

OLD = { # Oldenburg
	flag_definition = {
		coa = OLD
		priority = 1
	}
	flag_definition = {
		coa = OLD_delmenhorst
		priority = 5
		trigger = {
			coa_def_duchy_or_higher_trigger = yes
		}
	}
	flag_definition = {
		coa = OLD_cross
		priority = 10
		trigger = {
			coa_def_duchy_or_higher_trigger = yes
			coa_def_revolutions_age_6_trigger = yes
		}
	}
	flag_definition = {
		coa = OLD_merchant
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}	
}

OPV = { # Opava/Troppau
	flag_definition = {
		coa = OPV
		priority = 1
	}
	flag_definition = {
		coa = OPV_quarterly
		priority = 10
		trigger = {
			coa_def_premyslid_dynasty_trigger = yes
		}
	}
}

ORA = { # Orange
	flag_definition = {
		coa = ORA
		priority = 1
	}
	flag_definition = {
		coa = ORA_baux
		priority = 2
		trigger = {
			coa_def_renaissance_age_2_trigger = yes
			coa_def_baux_dynasty_trigger = yes
		}
	}
}

ORL = { # Orléans
	flag_definition = {
		coa = ORL
		priority = 1
	}
	flag_definition = {
		coa = ORL_three_fleurs
		priority = 3
		trigger = {
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

PAD = { # Padua
	flag_definition = {
		coa = PAD
		priority = 1
	}
	flag_definition = {
		coa = PAD_ghibellines
		priority = 2
		trigger = {
			coa_def_ghibellines_trigger = yes
		}
	}
}

PAL = { # Palatinate of the Rhine
	flag_definition = {
		coa = PAL
		priority = 1
	}
	flag_definition = {
		coa = PAL_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}		
}

PAP = { # Rome/Papal States
	flag_definition = {
		coa = PAP
		priority = 1
	}
	flag_definition = {
		coa = PAP_white
		priority = 2
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
		}
	}
	flag_definition = {
		coa = PAP_bicolor
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}	
	flag_definition = {
		coa = PAP_revolutionary_republic
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

PAR = { # Parma
	flag_definition = {
		coa = PAR
		priority = 1
	}
	flag_definition = {
		coa = PAR_milanese
		priority = 2
		trigger = {
			OR = {
				coa_def_MLO_ensign_trigger = yes
				coa_def_visconti_dynasty_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = PAR_revolutionary
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

PAV = { # Pavia
	flag_definition = {
		coa = PAV
		priority = 1
	}
	flag_definition = {
		coa = PAV_milanese
		priority = 2
		trigger = {
			OR = {
				coa_def_MLO_ensign_trigger = yes
				coa_def_visconti_dynasty_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = PAV_revolutionary
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

PEA = { # Perugia
	flag_definition = {
		coa = PEA
		priority = 1
	}
	flag_definition = {
		coa = PEA_modern
		priority = 2
		trigger = {
			coa_def_reformation_age_4_trigger = yes
		}
	}
}

PES = { # Pesaro
	flag_definition = {
		coa = PES
		priority = 1
	}
	flag_definition = {
		coa = PES_guelphs
		priority = 2
		trigger = {
			coa_def_guelphs_trigger = yes
		}
	}
	flag_definition = {
		coa = PES_ghibellines
		priority = 3
		trigger = {
			coa_def_ghibellines_trigger = yes
		}
	}
}

PIC = { # Picardie
	# PIC - Three lions without quartering
	# PIC_semy - French quarters adapted to early design
	# PIC_three_fleurs - Historical arms as design c 1600

	flag_definition = {
		coa = PIC
		priority = 1
	}
	flag_definition = {
		coa = PIC_semy
		priority = 2
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = PIC_three_fleurs
		priority = 3
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

PIE = { # Piedmont
	flag_definition = {
		coa = PIE
		priority = 1
	}
	flag_definition = {
		coa = PIE_label
		priority = 10
		trigger = {
			coa_def_discovery_age_3_trigger = yes
		}
	}
	flag_definition = {
		coa = PIE_revolutionary
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

PLC = { # Polish-Lithuanian Commonwealth   
	flag_definition = {
		coa = PLC
		subject_canton = PLC
		priority = 1
	}
	flag_definition = {
		coa = PLC_lithuania
		subject_canton = PLC_lithuania
		priority = 2
		trigger = {
			coa_def_lithuanian_trigger = yes
		}
	}
	# Hadiach Union embowed
	flag_definition = {
		coa = PLC_ruthenia
		priority = 10
		trigger = {
			coa_def_kiev_ownership_trigger = yes
			coa_def_volhynia_ownership_trigger = yes
			coa_def_halych_ownership_trigger = yes	
		}
	}
	flag_definition = {
		coa = PLC_lithuania_ruthenia
		priority = 11
		trigger = {
			coa_def_lithuanian_trigger = yes
			coa_def_kiev_ownership_trigger = yes
			coa_def_volhynia_ownership_trigger = yes
			coa_def_halych_ownership_trigger = yes	
		}
	}
	
	# Additional quartered designs - Polish
	flag_definition = {
		coa = PLC_pomerania
		priority = 20
		trigger = {
			coa_def_pomerania_ownership_trigger = yes
		}
	}		
	flag_definition = {
		coa = PLC_bohemia
		priority = 21
		trigger = {
			coa_def_bohemia_ownership_trigger = yes
		}
	}		
	flag_definition = {
		coa = PLC_ruthenia_pomerania
		priority = 23
		trigger = {
			coa_def_kiev_ownership_trigger = yes
			coa_def_volhynia_ownership_trigger = yes
			coa_def_halych_ownership_trigger = yes
			coa_def_pomerania_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = PLC_ruthenia_bohemia
		priority = 24            
		trigger = {  
			coa_def_kiev_ownership_trigger = yes
			coa_def_volhynia_ownership_trigger = yes
			coa_def_halych_ownership_trigger = yes
			coa_def_bohemia_ownership_trigger = yes
		}
	}         
	flag_definition = {
		coa = PLC_bohemia_pomerania
		priority = 25
		trigger = {
			coa_def_bohemia_ownership_trigger = yes
			coa_def_pomerania_ownership_trigger = yes
		}
	}
	
	# Lithuanian
	flag_definition = {
		coa = PLC_lithuania_novgorod
		priority = 30
		trigger = {
			coa_def_lithuanian_trigger = yes
			coa_def_novgorod_ownership_trigger = yes
		}
	}
	flag_definition = { 
		coa = PLC_lithuania_ruthenia_novgorod
		priority = 31
		trigger = {
			coa_def_lithuanian_trigger = yes
			coa_def_kiev_ownership_trigger = yes
			coa_def_volhynia_ownership_trigger = yes
			coa_def_halych_ownership_trigger = yes
			coa_def_novgorod_ownership_trigger = yes
		}
	}
	
	# Absolute monarchy
	flag_definition = {
		coa = PLC_coa
		subject_canton = PLC
		priority = 50
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
		}		
	}	
	flag_definition = {
		coa = PLC_lithuania_coa
		subject_canton = PLC_lithuania
		priority = 51
		trigger = {
			coa_def_lithuanian_trigger = yes
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
		}		
	}
	flag_definition = {
		coa = PLC_ruthenia_coa
		subject_canton = PLC_ruthenia
		priority = 52
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
			coa_def_kiev_ownership_trigger = yes
			coa_def_volhynia_ownership_trigger = yes
			coa_def_halych_ownership_trigger = yes			
		}		
	}	
	flag_definition = {
		coa = PLC_lithuania_ruthenia_coa
		subject_canton = PLC_lithuania_ruthenia
		priority = 53
		trigger = {
			coa_def_lithuanian_trigger = yes
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
			coa_def_kiev_ownership_trigger = yes
			coa_def_volhynia_ownership_trigger = yes
			coa_def_halych_ownership_trigger = yes			
		}		
	}		
}

PLK = { # Plock
	flag_definition = {
		coa = PLK
		priority = 1
	}
	flag_definition = {
		coa = PLK_TEU
		priority = 90
		trigger = {
			coa_def_teutonic_order_trigger = yes
		}
	}
}

PMS = { # Pomesania
	flag_definition = {
		coa = PMS
		priority = 1
	}
	flag_definition = {
		coa = PMS_TEU
		priority = 90
		trigger = {
			coa_def_teutonic_order_trigger = yes
		}
	}
}

POI = { # Poitiers
	# POI - AG lion rampant - Counts of Poitiers ancient
	# POI_semy - France (semy), per pale GO semy of castles - Capetian arms of Alphonse de Poitiers (semy variant)
	# POI_three_fleurs - France (modern), per pale GO 5 castles Poitiers (modern) - Modern adaptation impaling both modern designs

	flag_definition = {
		coa = POI
		priority = 1
	}
	flag_definition = {
		coa = POI_semy
		priority = 2
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = POI_three_fleurs
		priority = 3
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

POK = { # Polotsk
	flag_definition = {
		coa = POK
		priority = 1
	}
	flag_definition = {
		coa = POK_lithuanian
		priority = 10
		trigger = {
			OR = {
				coa_def_gediminid_dynasty_trigger = yes
				coa_def_LIT_ensign_trigger = yes
				coa_def_PLC_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = POK_jagiellon
		priority = 11
		trigger = {
			coa_def_christian_trigger = yes
			coa_def_jagiellon_dynasty_trigger = yes
		}
	}	
}

POR = { # Portugal
	# POR - 14th c. Portugal : escutcheons ch. roundels in cross AB & border ch. castles GO, both without number
	# POR_renaissance - 1385 design : same as POR with fleurs de lis V in the border
	# POR_late - 16th c. coa : escutcheons are palewise, with 5 roundels in saltire, border simplified (8 castles only, 7 on shields)
	# POR_white - 17th c. flag : coa & crown (centered variant)
	# POR_merchant - Early naval/colonial flag : five roundels in saltire AB & border of castles (many variants in color for this one)
	#x POR_order_christ_green - Order of christ flag : cross V GA
	#x POR_order_christ_gironny	 - Order of christ flag : variant with gironny field VA GO

	flag_definition = {
		coa = POR
		priority = 1
	}
	flag_definition = {
		coa = POR_renaissance
		priority = 2
		trigger = {
			coa_def_avis_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = POR_late
		priority = 3
		trigger = {
			coa_def_discovery_age_3_trigger = yes
		}
	}
	flag_definition = {
		coa = POR_white_blue
		priority = 4
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
		}
	}
	# Absolutist
	flag_definition = {
		coa = POR_white
		priority = 20
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
		}
	}
	flag_definition = {
		coa = POR_white_late
		priority = 25
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
			coa_def_american_colonies_trigger = yes
			coa_def_african_colonies_trigger = yes
		}
	}
	flag_definition = {
		coa = POR_order_christ_green	
		priority = 90
		trigger = {
			coa_def_theocracy_trigger = yes
		}
	}
	# Republican
	flag_definition = {
		coa = POR_merchant
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = POR_colonial_merchant
		priority = 105
		trigger = {
			coa_def_republic_trigger = yes
			OR = {
				coa_def_american_colonies_trigger = yes
				coa_def_african_colonies_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = POR_republic
		priority = 110
		trigger = {
			coa_def_republic_trigger = yes
			OR = {
				coa_def_american_colonies_trigger = yes
				coa_def_african_colonies_trigger = yes
			}
			coa_def_absolutism_age_5_trigger = yes
		}
	}
	flag_definition = {
		coa = POR_order_christ_green
		priority = 120
		trigger = {
			coa_def_theocracy_trigger = yes
		}
	}
	flag_definition = {
		coa = POR_order_christ_gironny
		priority = 121
		trigger = {
			coa_def_theocracy_trigger = yes
			OR = {
				coa_def_american_colonies_trigger = yes
				coa_def_african_colonies_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = POR_gironny
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

PRA = { # Prato
	flag_definition = {
		coa = PRA
		priority = 1
	}
	flag_definition = {
		coa = PRA_angevine
		priority = 2
		trigger = {
			OR = {
				coa_def_angevine_trigger = yes
				coa_def_guelphs_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = FAE_ghibellines
		priority = 3
		trigger = {
			coa_def_ghibellines_trigger = yes
		}
	}
}

PRC = { # Perche
	flag_definition = {
		coa = PRC_ancient
		priority = 1
	}
	flag_definition = {
		coa = PRC
		priority = 2
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = PRC_three_fleurs
		priority = 3
		trigger = {
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

PRM = { # Perm
	flag_definition = {
		coa = PRM
		priority = 1
	}
	flag_definition = {
		coa = PRM_komi
		priority = 50
		trigger = {
			coa_def_pagan_trigger = yes
		}
	}
}

PRO = { # Provence
	flag_definition = {
		coa = PRO
		priority = 1
	}
	flag_definition = {
		coa = PRO_county
		priority = 10
		trigger = {
			OR = {
				coa_def_aragon_dynasty_trigger = yes
				coa_def_ARA_ensign_trigger = yes
			}
		}
	}
}

PRU = { # Prussia
	flag_definition = {
		coa = PRU
		priority = 1
	}
	flag_definition = {
		coa = PRU_late
		priority = 50
		trigger = {
			coa_def_revolutions_age_6_trigger = yes
		}
	}
	flag_definition = {
		coa = PRU_merchant
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = PRU_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

RAW = { # Rawa
	flag_definition = {
		coa = RAW
		priority = 1
	}
	flag_definition = {
		coa = RAW_TEU
		priority = 50
		trigger = {
			coa_def_teutonic_order_trigger = yes
		}
	}
}

REG = { # Regensburg
	flag_definition = {
		coa = REG
		priority = 1
	}
	flag_definition = {
		coa = REG_principality
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

RET = { # Rethel
	flag_definition = {
		coa = RET
		priority = 1
	}
	flag_definition = {
		coa = RET_ancient
		priority = 50
		trigger = {
			coa_def_duchy_or_higher_trigger = yes
		}
	}
}

RIG = { # Riga
	flag_definition = {
		coa = RIG
		priority = 1
	}
	flag_definition = { # Starting
		coa = RIG_TEU
		priority = 90
		trigger = {
			coa_def_teutonic_order_trigger = yes
		}
	}
	flag_definition = {
		coa = RIG_hansa
		priority = 100
		trigger = {
			coa_def_HSA_ensign_trigger = yes
		}
	}	
}

RIM = { # Rimini
	flag_definition = {
		coa = RIM
		priority = 1
	}
	flag_definition = {
		coa = RIM_PAP
		priority = 10
		trigger = {
			coa_def_PAP_ensign_trigger = yes
		}
	}		
}

ROS = { # Ross
	flag_definition = {
		coa = ROS_early
		subject_canton = ROS_early
		priority = 1
	}
	flag_definition = {
		coa = ROS
		subject_canton = ROS_early
		priority = 2
		trigger = {
			coa_def_SCO_ensign_trigger = yes
		}
	}
}

RST = { # Rostock
	flag_definition = {
		coa = RST
		priority = 1
	}
	flag_definition = {
		coa = RST_rampant
		priority = 10
		trigger = {
			coa_def_reformation_age_4_trigger = yes
		}
	}
	flag_definition = {
		coa = RST_hansa
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
			coa_def_HSA_ensign_trigger = yes
		}
	}	
}

RUS = { # Russia
	# RUS - Tsar flag 18th c. : eagle OS
	# RUS_tricolor - 18th c. tricolor ABG
	# RUS_tsar - 18th c. Saltire Tsar flag w cross : cross GA & saltire overall B
	# RUS_saltire - Naval flag : Saltire AB

	flag_definition = {
		coa = RUS
		priority = 1
	}
	flag_definition = {
		coa = RUS_beloozero
		priority = 10
		trigger = {
			coa_def_RUS_beloozero_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_bryansk
		priority = 10
		trigger = {
			coa_def_RUS_bryansk_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_chernihiv
		priority = 10
		trigger = {
			coa_def_RUS_chernihiv_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_dmitrov
		priority = 10
		trigger = {
			coa_def_RUS_dmitrov_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_fomin
		priority = 10
		trigger = {
			coa_def_RUS_fomin_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_galich_mersky
		priority = 10
		trigger = {
			coa_def_RUS_galich_mersky_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_gorodets
		priority = 10
		trigger = {
			coa_def_RUS_gorodets_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_karachev
		priority = 10
		trigger = {
			coa_def_RUS_karachev_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_kashin
		priority = 10
		trigger = {
			coa_def_RUS_kashin_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_klin
		priority = 10
		trigger = {
			coa_def_RUS_klin_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_kostroma
		priority = 10
		trigger = {
			coa_def_RUS_kostroma_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_kozelsk
		priority = 10
		trigger = {
			coa_def_RUS_kozelsk_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_mologa
		priority = 10
		trigger = {
			coa_def_RUS_mologa_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_mstislavl
		priority = 10
		trigger = {
			coa_def_RUS_mstislavl_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_murom
		priority = 10
		trigger = {
			coa_def_RUS_murom_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_nizhny
		priority = 10
		trigger = {
			coa_def_RUS_nizhny_novgorod_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_novgorod
		priority = 200
		trigger = {
			coa_def_RUS_novgorod_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_novgorod_seversk
		priority = 10
		trigger = {
			coa_def_RUS_novgorod_seversk_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_novosil
		priority = 10
		trigger = {
			coa_def_RUS_novosil_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_oreshek
		priority = 10
		trigger = {
			coa_def_RUS_oreshek_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_perm
		priority = 10
		trigger = {
			coa_def_RUS_perm_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_pronsk
		priority = 10
		trigger = {
			coa_def_RUS_pronsk_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_pskov
		priority = 10
		trigger = {
			coa_def_RUS_pskov_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_rostov
		priority = 10
		trigger = {
			coa_def_RUS_rostov_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_ryazan
		priority = 10
		trigger = {
			coa_def_RUS_ryazan_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_rylsk
		priority = 10
		trigger = {
			coa_def_RUS_rylsk_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_rzhev
		priority = 10
		trigger = {
			coa_def_RUS_rzhev_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_smolensk
		priority = 10
		trigger = {
			coa_def_RUS_smolensk_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_starodub_klyazma
		priority = 10
		trigger = {
			coa_def_RUS_starodub_klyazma_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_starodub_siverskyi
		priority = 10
		trigger = {
			coa_def_RUS_starodub_siverskyi_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_suzdal
		priority = 10
		trigger = {
			coa_def_RUS_suzdal_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_tarusa
		priority = 10
		trigger = {
			coa_def_RUS_tarusa_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_toropets
		priority = 10
		trigger = {
			coa_def_RUS_toropets_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_trubchevsk
		priority = 10
		trigger = {
			coa_def_RUS_trubchevsk_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_tver
		priority = 10
		trigger = {
			coa_def_RUS_tver_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_uglich
		priority = 10
		trigger = {
			coa_def_RUS_uglich_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_vladimir
		priority = 10
		trigger = {
			coa_def_RUS_vladimir_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_vyatka
		priority = 10
		trigger = {
			coa_def_RUS_vyatka_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_vyazma
		priority = 10
		trigger = {
			coa_def_RUS_vyazma_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_yaroslavl
		priority = 10
		trigger = {
			coa_def_RUS_yaroslavl_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_yuryev_polsky
		priority = 10
		trigger = {
			coa_def_RUS_yuryev_polsky_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_zubtsov
		priority = 10
		trigger = {
			coa_def_RUS_zubtsov_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_tricolor
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
}

SAL = { # Saluzzo
	flag_definition = {
		coa = SAL
		priority = 1
	}
	flag_definition = {
		coa = SAL_civic
		priority = 50
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
}

SAR = { # Sardinia
	flag_definition = {
		coa = SAR
		priority = 1
	}
	flag_definition = {
		coa = SAR_piedmont
		priority = 50
		trigger = {
			coa_def_savoy_dynasty_trigger = yes
		}
	}
}

SAV = { # Savoy
	flag_definition = {
		coa = SAV
		priority = 1
	}
	flag_definition = {
		coa = SAV_merchant
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
}

SAX = { # Saxony
	flag_definition = {
		coa = SAX
		priority = 1
	}
	flag_definition = {
		coa = SAX_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}		
	flag_definition = {
		coa = SAX_bicolor
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = SAX_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

SCB = { # Schauenburg/Schaumburg
	flag_definition = {
		coa = SCB
		priority = 1
	}
	flag_definition = {
		coa = SCB_lippe
		priority = 5
		trigger = {
			coa_def_lippe_ownership_trigger = yes
		}
	}
}

SCO = { # Scotland
	# NB: all subject cantons need to be defined for this tag
	# And uses saltire as canton in every case (colonial ensigns)
	flag_definition = {
		coa = SCO_monarchy
		subject_canton = SCO_saltire
		priority = 1
		trigger = {
			coa_def_monarchy_trigger = yes
			coa_def_absolutism_age_5_trigger = no # mid 16th c.
		}
	}
	flag_definition = {
		coa = SCO_monarchy_balliol
		subject_canton = SCO_saltire
		priority = 2
		trigger = {
			coa_def_monarchy_trigger = yes
			coa_def_absolutism_age_5_trigger = no
			coa_def_balliol_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = SCO_per_pale_capetian
		subject_canton = SCO_saltire
		priority = 20
		trigger = {
			coa_def_monarchy_trigger = yes
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = SCO_per_pale_capetian_modern
		subject_canton = SCO_saltire
		priority = 21
		trigger = {
			coa_def_monarchy_trigger = yes
			coa_def_discovery_age_3_trigger = yes
			OR = {
				coa_def_capetian_trigger = yes
				coa_def_FRA_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = SCO_per_pale_plantagenet
		subject_canton = SCO_saltire
		priority = 22
		trigger = {
			coa_def_monarchy_trigger = yes
			OR = {
				coa_def_plantagenet_trigger = yes
				coa_def_ENG_ensign_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = SCO_saltire
		subject_canton = SCO_saltire
		priority = 100
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
		}
	}
	flag_definition = {
		coa = SCO_saltire_inescutcheon
		subject_canton = SCO_saltire
		priority = 150
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
		}
	}
}

SDZ = { # Sieradz
	flag_definition = {
		coa = SDZ
		priority = 1
	}
	flag_definition = {
		coa = SDZ_TEU
		priority = 50
		trigger = {
			coa_def_teutonic_order_trigger = yes
		}
	}
}

SER = { # Serbia
	flag_definition = {
		coa = SER
		priority = 1
	}
	flag_definition = {
		coa = SER_firesteels
		priority = 10
		trigger = {
			coa_def_BYZ_ensign_trigger = yes
		}
	}
	flag_definition = {
		coa = SER_empire
		priority = 50
		trigger = {
			coa_def_empire_trigger = yes
		}
	}
}

SGT = { # Siguntur
	flag_definition = {
		coa = SGT
		priority = 1
	}
	flag_definition = {
		coa = SGT_stripes
		priority = 50
		trigger = {
			coa_def_muslim_trigger = yes # TODO
		}
	}
}

SIC = { # Sicily
	# SIC_ancient : Hohenstaufen eagle
	# SIC : Aragon-Sicily per saltire of Aragon & Sicily (eagle)
	# SIC_angevine : per pale of Anjou & Sicily (eagle)
	# SIC_revolutionary_republic : Triskelion design (Ancient Trinacria & Napoleonic state)

	flag_definition = {
		coa = SIC_ancient
		priority = 1
	}
	flag_definition = {
		coa = SIC
		priority = 10
		trigger = {
			coa_def_aragon_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = SIC_angevine
		priority = 10
		trigger = {
			coa_def_angevine_trigger = yes
		}
	}
	flag_definition = {
		coa = SIC_republic
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}	
	flag_definition = {
		coa = SIC_revolutionary_republic
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

SIE = { # Siena
	flag_definition = {
		coa = SIE
		priority = 1
	}
	flag_definition = {
		coa = SIE_PAP
		priority = 10
		trigger = {
			coa_def_PAP_ensign_trigger = yes
		}
	}		
}

SLO = { # Slovakia
	flag_definition = {
		coa = SLO
		priority = 1
	}
	flag_definition = {
		coa = SLO_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

SMB = { # Sambas
	flag_definition = {
		coa = SMB
		priority = 1
	}
	flag_definition = {
		coa = SMB_sultanate
		priority = 50
		trigger = {
			coa_def_muslim_trigger = yes
		}
	}
}

SMO = { # Smolensk
	flag_definition = {
		coa = SMO
		priority = 1
	}
	flag_definition = {
		coa = SMO_polish
		priority = 2
		trigger = {
			OR = {
				coa_def_POL_ensign_trigger = yes
				coa_def_PLC_ensign_trigger = yes
			}
		}
	}		
}

SPA = { # Spain
	# SPA - Cross of Burgundy, stylized form : saltire embattled & counter embattled AG
	# SPA_republic - Naval ensign 18th c./1st rep. : tricolor GAG & coa (round shield per pale of Castile & León, crowned)
	# SPA_white - 17th/18th c. white coa flag : lesser arms (without Bourbon escutcheon) w collar & crown
	# SPA_greater - 17th/18th c. white coa flag : greater arms w collar, crown & ribbons
	# SPA_merchant - 18th c. Merchant flag : O 2 horizontal stripes G

	flag_definition = {
		coa = SPA_base	# default version (Q1 Aragon, Q2 Castile, Q3 Leon, Q4 Portugal)
		priority = 1
	}

	### Castile ###
	
	# TODO better default for Castile

	# With just Navarre    

	flag_definition = {
		coa = SPA_castile_navarre # Castile Q1-Q4, Navarre Q2-Q3
		priority = 5
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_aragon_ownership_trigger = no
			coa_def_portugal_ownership_trigger = no
		}
	}
	flag_definition = {
		coa = SPA_castile_navarre_granada # Castile Q1-Q4, Navarre Q2-Q3, Granada Q5
		priority = 6
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_aragon_ownership_trigger = no
			coa_def_portugal_ownership_trigger = no
			coa_def_granada_ownership_trigger = yes
		}
	}

	# With Aragon, no Portugal

	flag_definition = {
		coa = SPA_castile # Castile Q1-Q4, Aragon Q2-Q3
		priority = 10
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = no
		}
	}
	flag_definition = {
		coa = SPA_castile_granada # Castile Q1-Q4, Aragon Q2-Q3, Granada Q5
		priority = 11
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_portugal_ownership_trigger = no
			coa_def_aragon_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_castile_sicily # Castile Q1-Q4, Aragon-Sicily Q2-Q3
		priority = 12
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_portugal_ownership_trigger = no
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_castile_granada_sicily # Castile Q1-Q4, Aragon-Sicily Q2-Q3, Granada Q5
		priority = 13
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_portugal_ownership_trigger = no
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_castile_aragon_navarre # Castile Q1-Q4, Aragon Q2, Navarre Q3
		priority = 14
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_portugal_ownership_trigger = no
			coa_def_aragon_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_castile_aragon_navarre_granada # Castile Q1-Q4, Aragon Q2, Navarre Q3, Granada Q5
		priority = 15
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_portugal_ownership_trigger = no
			coa_def_aragon_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_castile_aragon_sicily_navarre # Castile Q1-Q4, Aragon-Sicily Q2, Navarre Q3
		priority = 16
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_portugal_ownership_trigger = no
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_castile_aragon_sicily_navarre_granada # Castile Q1-Q4, Aragon-Sicily Q2, Navarre Q3, Granada Q5
		priority = 17
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_portugal_ownership_trigger = no
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}

	# With Portugal, no Aragon

	flag_definition = {
		coa = SPA_castile_portugal_no_aragon # Castile Q1-Q4, Portugal Q2-Q3
		priority = 20
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_aragon_ownership_trigger = no
			coa_def_portugal_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_castile_portugal_granada_no_aragon # Castile Q1-Q4, Portugal Q2-Q3, Granada Q5
		priority = 21
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_aragon_ownership_trigger = no
			coa_def_portugal_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_castile_portugal_navarre_no_aragon # Castile Q1-Q4, Portugal Q2, Navarre Q3
		priority = 22
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_aragon_ownership_trigger = no
			coa_def_portugal_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_castile_portugal_navarre_granada_no_aragon # Castile Q1-Q4, Portugal Q2, Navarre Q3, Granada Q5
		priority = 23
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_aragon_ownership_trigger = no
			coa_def_portugal_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_castile_portugal_granada_navarre # Castile Q1-Q4, Navarre Q2, Portugal Q3, Granada Q5
		priority = 24
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_aragon_ownership_trigger = no
			coa_def_navarre_ownership_full_trigger = yes
			coa_def_granada_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
		}
	}

	# With Portugal & Aragon

	flag_definition = {
		coa = SPA_castile_aragon_portugal # Castile Q1-Q4, Aragon Q2, Portugal Q3
		priority = 30
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_aragon_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_castile_aragon_portugal_granada # Castile Q1-Q4, Aragon Q2, Portugal Q3, Granada Q5
		priority = 31
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
			coa_def_aragon_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_castile_aragon_portugal_sicily # Castile Q1-Q4, Aragon-Sicily Q2, Portugal Q3
		priority = 32
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_castile_aragon_portugal_granada_sicily # Castile Q1-Q4, Aragon-Sicily Q2, Portugal Q3, Granada Q5
		priority = 33
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_sicily_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_castile_iberia # Castile Q1, Aragon Q2, Portugal Q3, Navarre Q4, Granada Q5
		priority = 35
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = no
			coa_def_granada_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_castile_iberia_sicily # Castile Q1, Aragon-Sicily Q2, Portugal Q3, Navarre Q4, Granada Q5
		priority = 36
		trigger = {
			coa_def_SPA_castile_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
		}
	}

	### Aragon ###

	flag_definition = { # Base designs for Aragon
		coa = SPA_aragon_simple # Aragon Q1-Q4, Castile Q2, Leon Q3
		priority = 10
		trigger = {
			coa_def_SPA_aragon_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_aragon # Aragon Q1-Q4, Castile Leon Q2-Q3
		priority = 11
		trigger = {
			coa_def_SPA_aragon_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}
	flag_definition = { # Design at game start
		coa = SPA_aragon_sicily # Aragon-Sicily Q1-Q4, Castile Leon Q2-Q3
		priority = 15
		trigger = {
			coa_def_SPA_aragon_trigger = yes
			OR = {
				coa_def_sicily_ownership_trigger = yes
				coa_def_aragonese_sicily_trigger = yes
			}
		}
	}

	# No Sicily (including dynasty not being on throne anymore)

	flag_definition = {
		coa = SPA_aragon_navarre # Aragon Q1-Q4, Castile Leon Q2, Navarre Q3
		priority = 20
		trigger = {
			coa_def_SPA_aragon_trigger = yes
			coa_def_sicily_ownership_trigger = no
			coa_def_aragonese_sicily_trigger = no
			coa_def_navarre_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_aragon_portugal # Aragon Q1-Q4, Castile Leon Q2, Portugal Q3
		priority = 21
		trigger = {
			coa_def_SPA_aragon_trigger = yes
			coa_def_sicily_ownership_trigger = no
			coa_def_aragonese_sicily_trigger = no
			coa_def_portugal_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_aragon_granada # Aragon Q1-Q4, Castile Leon Q2, Granada Q3
		priority = 22
		trigger = {
			coa_def_SPA_aragon_trigger = yes
			coa_def_sicily_ownership_trigger = no
			coa_def_aragonese_sicily_trigger = no
			coa_def_granada_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_aragon_navarre_portugal # Aragon Q1, Castile Leon Q2, Portugal Q3; Navarre Q4
		priority = 23
		trigger = {
			coa_def_SPA_aragon_trigger = yes
			coa_def_sicily_ownership_trigger = no
			coa_def_aragonese_sicily_trigger = no
			coa_def_navarre_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_aragon_navarre_portugal_granada # Aragon Q1, Castile Leon Q2, Portugal Q3; Navarre Q4, Granada Q5
		priority = 24
		trigger = {
			coa_def_SPA_aragon_trigger = yes
			coa_def_sicily_ownership_trigger = no
			coa_def_aragonese_sicily_trigger = no
			coa_def_navarre_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}

	# Aragon-Sicily

	flag_definition = {
		coa = SPA_aragon_navarre_sicily # Aragon-Sicily Q1-Q4, Castile-Leon Q2, Navarre Q3
		priority = 30
		trigger = {
			coa_def_SPA_aragon_trigger = yes
			OR = {
				coa_def_sicily_ownership_trigger = yes
				coa_def_aragonese_sicily_trigger = yes
			}
			coa_def_navarre_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_aragon_portugal_sicily # Aragon-Sicily Q1-Q4, Castile-Leon Q2, Portugal Q3
		priority = 31
		trigger = {
			coa_def_SPA_aragon_trigger = yes
			OR = {
				coa_def_sicily_ownership_trigger = yes
				coa_def_aragonese_sicily_trigger = yes
			}
			coa_def_portugal_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_aragon_granada_sicily # Aragon-Sicily Q1-Q4, Castile-Leon Q2-Q3, Granada Q5
		priority = 32
		trigger = {
			coa_def_SPA_aragon_trigger = yes
			OR = {
				coa_def_sicily_ownership_trigger = yes
				coa_def_aragonese_sicily_trigger = yes
			}
			coa_def_granada_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_aragon_navarre_granada_sicily # Aragon-Sicily Q1-Q4, Castile-Leon Q2, Navarre Q3, Granada Q5
		priority = 33
		trigger = {
			coa_def_SPA_aragon_trigger = yes
			OR = {
				coa_def_sicily_ownership_trigger = yes
				coa_def_aragonese_sicily_trigger = yes
			}
			coa_def_navarre_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_aragon_portugal_granada_sicily # Aragon-Sicily Q1-Q4, Castile-Leon Q2, Portugal Q3, Granada Q5
		priority = 34
		trigger = {
			coa_def_SPA_aragon_trigger = yes
			OR = {
				coa_def_sicily_ownership_trigger = yes
				coa_def_aragonese_sicily_trigger = yes
			}
			coa_def_portugal_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_aragon_navarre_portugal_sicily # Aragon-Sicily Q1, Castile-Leon Q2, Portugal Q3, Navarre Q4
		priority = 35
		trigger = {
			coa_def_SPA_aragon_trigger = yes
			OR = {
				coa_def_sicily_ownership_trigger = yes
				coa_def_aragonese_sicily_trigger = yes
			}
			coa_def_navarre_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_aragon_navarre_portugal_granada_sicily # Aragon-Sicily Q1, Castile-Leon Q2, Portugal Q3, Navarre Q4, Granada Q5
		priority = 36
		trigger = {
			coa_def_SPA_aragon_trigger = yes
			OR = {
				coa_def_sicily_ownership_trigger = yes
				coa_def_aragonese_sicily_trigger = yes
			}
			coa_def_navarre_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}

	### Navarre ###

	flag_definition = {
		coa = SPA_navarre # Navarre Q1-Q4, Castile Q2, Leon Q3
		priority = 10
		trigger = {
			coa_def_SPA_navarre_trigger = yes
		}
	}
	flag_definition = { # Evreux-Navarre variant
		coa = SPA_navarre_capetian # Navarre-France Q1-Q4, Castile-Leon Q2-Q3
		priority = 11
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_capetian_navarre_trigger = yes
		}
	}

	# With Aragon

	flag_definition = {
		coa = SPA_navarre_aragon # Navarre Q1-Q4, Castile-Leon Q2, Aragon Q3
		priority = 12
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_aragon_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_navarre_aragon_capetian # Navarre-France Q1-Q4, Castile-Leon Q2, Aragon Q3
		priority = 13
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_capetian_navarre_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_navarre_aragon_sicily # Navarre Q1-Q4, Castile-Leon Q2, Aragon-Sicily Q3
		priority = 14
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_navarre_aragon_sicily_capetian # Navarre-France Q1-Q4, Castile-Leon Q2, Aragon-Sicily Q3
		priority = 15
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_capetian_navarre_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
		}
	}

	# With Portugal

	flag_definition = {
		coa = SPA_navarre_portugal # Navarre Q1, Castile-Leon Q2-Q3, Portugal Q4
		priority = 20
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_portugal_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_navarre_portugal_capetian # Navarre Q1, Castile-Leon Q2-Q3, Portugal Q4
		priority = 21
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_capetian_navarre_trigger = yes
			coa_def_portugal_ownership_trigger = yes
		}
	}

	# With Aragon & Portugal

	flag_definition = {
		coa = SPA_navarre_aragon_portugal # Navarre Q1, Castile-Leon Q2, Aragon Q3, Portugal Q4
		priority = 25
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_navarre_aragon_portugal_capetian # Navarre-France Q1, Castile-Leon Q2, Aragon Q3, Portugal Q4
		priority = 26
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_capetian_navarre_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_navarre_aragon_sicily_portugal # Navarre Q1, Castile-Leon Q2, Aragon-Sicily Q3, Portugal Q4
		priority = 27
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_navarre_aragon_sicily_portugal_capetian # Navarre-France Q1, Castile-Leon Q2, Aragon-Sicily Q3, Portugal Q4
		priority = 28
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
			coa_def_capetian_navarre_trigger = yes
		}
	}

	# With Granada

	flag_definition = {
		coa = SPA_navarre_aragon_portugal_granada
		priority = 30
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_navarre_aragon_sicily_portugal_granada
		priority = 31
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_navarre_aragon_portugal_granada_capetian
		priority = 32
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_capetian_navarre_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_navarre_aragon_sicily_portugal_granada_capetian
		priority = 33
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
			coa_def_capetian_navarre_trigger = yes
		}
	}

	### Portugal ###

	flag_definition = { # Default for Portugal (Early)
		coa = SPA_portugal # Q1-Q4 Portugal, Q2-Q3 Castile-Leon
		priority = 10
		trigger = {
			coa_def_SPA_portugal_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_portugal_late # Q1-Q4 Portugal (Late), Q2-Q3 Castile-Leon
		priority = 11
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}
	
	# With Galicia

	flag_definition = {
		coa = SPA_portugal_galicia
		priority = 12
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_galicia_ownership_trigger = yes
		}
	}	

	# With Aragon

	flag_definition = {
		coa = SPA_portugal_aragon # Q1-Q4 Portugal,  Q2 Castile-Leon, Q3 Aragon
		priority = 20
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_aragon_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_portugal_aragon_sicily # Q1-Q4 Portugal,  Q2 Castile-Leon, Q3 Aragon-Sicily
		priority = 21
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_portugal_galicia_aragon # Q1 Portugal, Q2 Castile-Leon, Q3 Aragon, Q4 Galicia
		priority = 22
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_galicia_ownership_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = no
		}
	}		
	flag_definition = {
		coa = SPA_portugal_galicia_aragon_sicily # Q1 Portugal, Q2 Castile-Leon, Q3 Aragon-Sicily, Q4 Galicia
		priority = 23
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_galicia_ownership_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
		}
	}		
	flag_definition = {
		coa = SPA_portugal_aragon_granada # Q1-Q4 Portugal,  Q2 Castile-Leon, Q3 Aragon, Q5 Granada
		priority = 24
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = no
			coa_def_granada_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_portugal_aragon_granada_sicily # Q1-Q4 Portugal,  Q2 Castile-Leon, Q3 Aragon-Sicily, Q5 Granada
		priority = 25
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_portugal_galicia_aragon_granada # Q1 Portugal,  Q2 Castile-Leon, Q3 Aragon, Q5 Granada
		priority = 26
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_galicia_ownership_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = no
			coa_def_granada_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_portugal_galicia_aragon_sicily_granada # Q1 Portugal,  Q2 Castile-Leon, Q3 Aragon-Sicily, Q5 Granada
		priority = 27
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_galicia_ownership_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}	

	# With Navarre

	flag_definition = {
		coa = SPA_portugal_navarre # Q1 Portugal, Q2-Q3 Castile-Leon, Q4 Navarre
		priority = 30
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_navarre_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_portugal_galicia_navarre # Q1 Portugal, Q2 Castile-Leon, Q3 Galicia, Q4 Navarre
		priority = 31
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_galicia_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
		}
	}	
	flag_definition = {
		coa = SPA_portugal_navarre_granada # Q1 Portugal, Q2-Q3 Castile-Leon, Q4 Navarre, Q5 Granada
		priority = 32
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_portugal_galicia_navarre_granada # Q1 Portugal, Q2 Castile-Leon, Q3 Galicia, Q4 Navarre, Q5 Granada
		priority = 33
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_galicia_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}

	# With Navarre & Aragon

	flag_definition = {
		coa = SPA_portugal_navarre_aragon # Q1 Portugal, Q2 Castile-Leon, Q3 Aragon, Q4 Navarre
		priority = 34
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_aragon_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_portugal_navarre_aragon_sicily # Q1 Portugal, Q2 Castile-Leon, Q3 Aragon-Sicily, Q4 Navarre
		priority = 35
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_portugal_navarre_aragon_granada # Q1 Portugal, Q2 Castile-Leon, Q3 Aragon, Q4 Navarre, Q5 Granada
		priority = 36
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_portugal_navarre_aragon_sicily_granada # Q1 Portugal, Q2 Castile-Leon, Q3 Aragon-Sicily, Q4 Navarre, Q5 Granada
		priority = 37
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}
	# Galicia replacing Granada at this point
	flag_definition = {
		coa = SPA_portugal_galicia_navarre_aragon # Q1 Portugal, Q2 Castile-Leon, Q3 Aragon, Q4 Navarre, Q5 Galicia
		priority = 38
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_galicia_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_aragon_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_portugal_galicia_navarre_aragon_sicily # Q1 Portugal, Q2 Castile-Leon, Q3 Aragon-Sicily, Q4 Navarre, Q5 Galicia
		priority = 39
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_galicia_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
		}
	}

	### Minors ###

	# Leon
	flag_definition = { # Default (Aragon)
		coa = SPA_leon_simple_aragon # Q1-Q4 Leon-Castile, Q2-Q3 Aragon
		priority = 50
		trigger = {
			coa_def_SPA_leon_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_leon_simple_portugal # Q1-Q4 Leon-Castile, Q2-Q3 Portugal
		priority = 51
		trigger = {
			coa_def_SPA_leon_trigger = yes
			coa_def_portugal_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_leon_aragon_portugal # Q1-Q4 Leon-Castile, Q2 Aragon, Q3 Portugal
		priority = 52
		trigger = {
			coa_def_SPA_leon_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_aragon_ownership_trigger = yes
		}
	}
	flag_definition = { # Complete with Granada
		coa = SPA_leon # Q1-Q4 Leon-Castile, Q2 Aragon-Sicily, Q3 Portugal, Q5 Granada
		priority = 55
		trigger = {
			coa_def_SPA_leon_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}

	# Andorra
	flag_definition = { # Default (Aragon)
		coa = SPA_andorra_simple_aragon # Q1 Andorra, Q2-Q3 Aragon, Q4 Castile
		priority = 50
		trigger = {
			coa_def_SPA_andorra_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_andorra_aragon_navarre # Q1 Andorra, Q2 Castile, Q3 Aragon, Q4 Navarre
		priority = 51
		trigger = {
			coa_def_SPA_andorra_trigger = yes
			coa_def_navarre_ownership_trigger = yes
		}
	}
	flag_definition = { # Complete with Granada
		coa = SPA_andorra # Q1 Andorra, Q2 Castile, Q3 Aragon-Sicily, Q4 Navarre, Q5 Granada
		priority = 55
		trigger = {
			coa_def_SPA_andorra_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}

	# Mallorca
	flag_definition = { # Default (Aragon)
		coa = SPA_mallorca_simple_aragon # Q1 Mallorca, Q2 & Q3 Aragon, Q4 Castile
		priority = 50
		trigger = {
			coa_def_SPA_mallorca_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_mallorca_aragon_navarre # Q1 Mallorca-Aragon, Q2 & Q3 Castile, Q4 Navarre
		priority = 51
		trigger = {
			coa_def_SPA_mallorca_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_mallorca_aragon_sicily_navarre # Q1 Mallorca, Q2 Aragon-Sicily, Q3 Castile, Q4 Navarre
		priority = 52
		trigger = {
			coa_def_SPA_mallorca_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
		}
	}
	flag_definition = { # Complete with Granada
		coa = SPA_mallorca # Q1 Mallorca, Q2 Aragon-Sicily, Q3 Castile, Q4 Navarre, Q5 Granada
		priority = 55
		trigger = {
			coa_def_SPA_mallorca_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}

	# Valencia
	flag_definition = { # Default (Aragon)
		coa = SPA_valencia_simple_aragon # Q1 Valencia, Q2-Q3 Castile, Q4 Aragon
		priority = 50
		trigger = {
			coa_def_SPA_valencia_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_valencia_aragon_sicily # Q1 Valencia, Q2-Q3 Castile, Q4 Aragon-Sicily
		priority = 51
		trigger = {
			coa_def_SPA_valencia_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_valencia_aragon_navarre # Q1 Valencia, Q2 Castile, Q3 Aragon, Q4 Navarre
		priority = 52
		trigger = {
			coa_def_SPA_valencia_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_valencia_aragon_sicily_navarre # Q1 Valencia, Q2 Castile, Q3 Aragon-Sicily, Q4 Navarre
		priority = 53
		trigger = {
			coa_def_SPA_valencia_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
		}
	}
	flag_definition = { # Complete with Granada
		coa = SPA_valencia # Q1 Valencia, Q2 Castile, Q3 Aragon-Sicily, Q4 Navarre, Q5 Granada
		priority = 55
		trigger = {
			coa_def_SPA_valencia_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}

	# Catalonia
	flag_definition = { # Default (Aragon)
		coa = SPA_catalonia_simple_aragon # Q1 Catalonia, Q2-Q3 Castile, Q4 Aragon
		priority = 50
		trigger = {
			coa_def_SPA_catalonia_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_catalonia_aragon_sicily # Q1 Catalonia, Q2-Q3 Castile, Q4 Aragon-Sicily
		priority = 51
		trigger = {
			coa_def_SPA_catalonia_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_catalonia_aragon_navarre # Q1 Catalonia, Q2 Castile, Q3 Navarre, Q4 Aragon
		priority = 52
		trigger = {
			coa_def_SPA_catalonia_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_catalonia_aragon_sicily_navarre # Q1 Catalonia, Q2 Castile, Q3 Navarre, Q4 Aragon-Sicily
		priority = 53
		trigger = {
			coa_def_SPA_catalonia_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_catalonia # Q1 Catalonia, Q2 Castile, Q3 Navarre, Q4 Aragon-Sicily, Q5 Granada
		priority = 55
		trigger = {
			coa_def_SPA_catalonia_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_sicily_ownership_trigger = yes
			coa_def_navarre_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}

	# Galicia
	flag_definition = { # Default
		coa = SPA_galicia_simple # Q1-Q4 Galicia, Q2-Q3 Castile-Leon
		priority = 50
		trigger = {
			coa_def_SPA_galicia_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_galicia_portugal # Q1 Galicia, Q2-Q3 Castile-Leon, Q4 Portugal
		priority = 51
		trigger = {
			coa_def_SPA_galicia_trigger = yes
			coa_def_portugal_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_galicia_portugal_aragon # Q1 Galicia, Q2 Castile-Leon, Q3 Aragon-Sicily, Q4 Portugal
		priority = 52
		trigger = {
			coa_def_SPA_galicia_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_galicia # Q1 Galicia, Q2 Castile-Leon, Q3 Aragon-Sicily, Q4 Portugal, Q5 Granada
		priority = 55
		trigger = {
			coa_def_SPA_galicia_trigger = yes
			coa_def_aragon_ownership_trigger = yes
			coa_def_portugal_ownership_trigger = yes
			coa_def_granada_ownership_trigger = yes
		}
	}

	### Government/Rank ###

	flag_definition = {
		coa = SPA_republic
		priority = 80
		trigger = {
			coa_def_republic_trigger = yes
		}
	}

	# Colonial empire (Cross of Burgundy)
	flag_definition = {
		coa = SPA
		priority = 100
		trigger = {
			coa_def_american_colonies_trigger = yes
			coa_def_reformation_age_4_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_portugal_cross
		priority = 101
		trigger = {
			coa_def_SPA_portugal_trigger = yes
			coa_def_american_colonies_trigger = yes
			coa_def_reformation_age_4_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_navarre_cross
		priority = 102
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_american_colonies_trigger = yes
			coa_def_reformation_age_4_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_aragon_cross
		priority = 103
		trigger = {
			coa_def_SPA_aragon_trigger = yes
			coa_def_american_colonies_trigger = yes
			coa_def_reformation_age_4_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_leon_cross
		priority = 104
		trigger = {
			coa_def_SPA_leon_trigger = yes
			coa_def_american_colonies_trigger = yes
			coa_def_reformation_age_4_trigger = yes
		}
	}

	# Absolute monarchy (Origin tag or ruling dynasty)
	flag_definition = {
		coa = SPA_white
		priority = 110
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_white_portugal
		priority = 111
		trigger = {
			OR = {
				coa_def_SPA_portugal_trigger = yes
				coa_def_burgundy_portugal_trigger = yes
			}
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_white_aragon
		priority = 112
		trigger = {
			OR = {
				coa_def_SPA_aragon_trigger = yes
				coa_def_aragon_dynasty_trigger = yes
			}
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_white_navarre
		priority = 113
		trigger = {
			coa_def_SPA_navarre_trigger = yes
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
		}
	}

	# Revolutionary
	flag_definition = {
		coa = SPA_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_tricolor_purple
		priority = 201
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
			OR = {
				coa_def_castilian_trigger = yes
				coa_def_leonese_primary_trigger = yes
			}
		}
	}
}

STE = { # Stettin
	flag_definition = {
		coa = STE
		priority = 1
	}
	flag_definition = {
		coa = STE_hansa
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
			coa_def_HSA_ensign_trigger = yes
		}
	}
}

STP = { # Saint-Pol
	# STP - BO 5 garbs in cross - Ancient
	# STP_chatillon - Châtillon & label B 5p

	flag_definition = {
		coa = STP
		priority = 1
	}
	flag_definition = {
		coa = STP_chatillon
		priority = 2
		trigger = {
			coa_def_chatillon_dynasty_trigger = yes
		}
	}
}

SWB = { # Saxe-Wittemberg
	flag_definition = {
		coa = SWB
		priority = 1
	}
	flag_definition = {
		coa = SAX_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}		
	# TODO
}

SWE = { # Sweden
	flag_definition = {
		coa = SWE
		priority = 1
	}
	flag_definition = {
		coa = SWE_quarterly
		subject_canton = SWE
		priority = 10
		trigger = {
			coa_def_bjalbo_dynasty_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}
	flag_definition = {
		coa = SWE_quarterly_late
		subject_canton = SWE
		priority = 11
		trigger = {
			coa_def_bjalbo_dynasty_trigger = no
			coa_def_discovery_age_3_trigger = yes
		}
	}
	flag_definition = {
		coa = SWE_quarterly_mecklenburg
		subject_canton = SWE
		priority = 12
		trigger = {
			coa_def_mecklenburg_dynasty_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}	
	flag_definition = {
		coa = SWE_cross
		priority = 50
		trigger = {
			OR = {
				coa_def_reformation_age_4_trigger = yes
				coa_def_republic_trigger = yes
			}
			coa_def_absolute_monarchy_trigger = no # keeping quarterly designs for absolute
		}
	}
}

SXM = { # Samogitia
	flag_definition = {
		coa = SXM
		priority = 1
	}
	flag_definition = {
		coa = SXM_russian
		priority = 2
		trigger = {
			coa_def_RUS_ensign_trigger = yes
		}
	}
	flag_definition = {
		coa = SXM_polish
		priority = 3
		trigger = {
			OR = {
				coa_def_POL_ensign_trigger = yes
				coa_def_PLC_ensign_trigger = yes
			}
		}
	}	
	flag_definition = {
		coa = SXM_teutonic
		priority = 4
		trigger = {
			coa_def_teutonic_order_trigger = yes
		}
	}		
}

TEU = { # Teutonic Order
	flag_definition = {
		coa = TEU_simple
		priority = 1
	}
	flag_definition = {
		coa = TEU
		priority = 10 # Starting
		trigger = {
			coa_def_theocracy_trigger = yes
			coa_def_duchy_or_higher_trigger = yes
		}
	}
	flag_definition = {
		coa = TEU_marienburg
		priority = 20
		trigger = {
			coa_def_theocracy_trigger = no
		}
	}
	flag_definition = {
		coa = TEU_merchant
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}	
	flag_definition = {
		coa = TEU_merchant_late
		priority = 101
		trigger = {
			coa_def_republic_trigger = yes
			coa_def_reformation_age_4_trigger = yes # or protestant
		}
	}	
	flag_definition = {
		coa = TEU_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

THE = { # Thessalonika
	flag_definition = {
		coa = THE
		priority = 1
	}
	flag_definition = {
		coa = THE_BYZ
		priority = 10
		trigger = {
			coa_def_BYZ_ensign_trigger = yes
		}
	}
}

TIR = { # Tyrol
	flag_definition = {
		coa = TIR
		priority = 1
	}
	flag_definition = {
		coa = TIR_crown
		priority = 2
		trigger = {
			coa_def_duchy_or_higher_trigger = yes
		}
	}
	flag_definition = {
		coa = BRA_emperor
		priority = 0 # Commented out for now (update to DH if restored)
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}		
	flag_definition = {
		coa = TIR_bicolor
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}	
	flag_definition = {
		coa = TIR_bicolor_escutcheon
		priority = 101
		trigger = {
			coa_def_republic_trigger = yes
			coa_def_discovery_age_3_trigger = yes # or higher rank
		}
	}
	flag_definition = {
		coa = TIR_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

TRE = { # Trebizond
	flag_definition = {
		coa = TRE
		priority = 1
	}
	flag_definition = {
		coa = TRE_BYZ
		priority = 10
		trigger = {
			coa_def_BYZ_ensign_trigger = yes
		}
	}
}

TLE = { # Tlemcen
	flag_definition = {
		coa = TLE
		priority = 1
	}
	flag_definition = {
		coa = TLE_red
		priority = 10
		trigger = {
			coa_def_MOR_ensign_trigger = yes
		}
	}
	flag_definition = {
		coa = TLE_marinid
		priority = 20
		trigger = {
			coa_def_marinid_dynasty_trigger = yes
		}
	}
}

TRI = { # Trier
	flag_definition = {
		coa = TRI_cross
		priority = 1
	}
	flag_definition = {
		coa = TRI
		priority = 20 # Starting
		trigger = {
			coa_def_theocracy_trigger = yes
			coa_def_hre_archbishop_elector_trigger = yes
		}
	}		
}

TTE = { # Trieste
	flag_definition = {
		coa = TTE
		priority = 1
	}
	flag_definition = {
		coa = TTE_FIC
		priority = 100
		trigger = {
			coa_def_hre_free_imperial_city_trigger = yes
		}
	}
}

TUN = { # Tunis
	flag_definition = {
		coa = TUN
		priority = 1
	}
	flag_definition = {
		coa = TUN_morocco
		priority = 10
		trigger = {
			coa_def_MOR_ensign_trigger = yes
		}
	}
	flag_definition = {
		coa = TUN_marinid
		priority = 20
		trigger = {
			coa_def_marinid_dynasty_trigger = yes
		}
	}
}

TUR = { # Ottomans
	flag_definition = {
		coa = TUR
		priority = 1
	}
	flag_definition = {
		coa = TUR_crescents
		priority = 2
		trigger = {
			coa_def_discovery_age_3_trigger = yes
		}
	}
	flag_definition = {
		coa = TUR_crescents_roundel
		priority = 3
		trigger = {
			coa_def_reformation_age_4_trigger = yes
		}
	}
}

TUS = { # Tuscany
	flag_definition = {
		coa = TUS_merchant
		priority = 1
	}
	flag_definition = {
		coa = TUS_order
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = TUS_cross
		priority = 110
		trigger = {
			coa_def_revolutionary_republic_trigger= yes
		}
	}
	flag_definition = {
		coa = TUS
		priority = 150
		trigger = {
			coa_def_medici_dynasty_trigger = yes
		}
	}
}

TWS = { # Two Sicilies
	flag_definition = {
		coa = TWS_angevine
		priority = 1
	}
	flag_definition = {
		coa = TWS_aragonese
		priority = 5
		trigger = {
			coa_def_aragon_dynasty_trigger = yes
		}
	}
	flag_definition = {
		coa = TWS_revolutionary
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}	
}

UBV = { # Upper Bavaria
	flag_definition = {
		coa = UBV
		priority = 1
	}
	flag_definition = {
		coa = BAV_emperor
		priority = 0 # Commented out for now
		trigger = {
			coa_def_hre_emperor_trigger = yes
		}
	}
}

ULA = { # Nara Ula
	flag_definition = {
		coa = ULA
		priority = 1
	}
	flag_definition = {
		coa = ULA_blue_banner
		priority = 10
		trigger = {
			coa_def_CHI_ensign_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

ULS = { # Ulster
	flag_definition = {
		coa = ULS
		priority = 1
	}
	flag_definition = {
		coa = ULS_escutcheon
		priority = 10
		trigger = {
			OR = {
				coa_def_celtic_group_trigger = yes
				coa_def_oneill_dynasty_trigger = yes
			}
		}
	}
}

USA = { # United States
	flag_definition = {
		coa = USA # 13 stars
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 9999 # Weight needed to override default random definitions
	}
	flag_definition = {
		coa = USA
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 10000
		trigger = {
			coa_def_colonial_nation_trigger = yes
			OR = {
				coa_def_GBR_ensign_trigger = yes
				coa_def_ENG_ensign_trigger = yes
				coa_def_SCO_ensign_trigger = yes		
			}
		}
	}
	flag_definition = {
		coa = USA_14
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 10014
		trigger = {
			coa_def_USA_stars_14 = yes
		}
	}
	flag_definition = {
		coa = USA_15
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11015
		trigger = {
			coa_def_USA_stars_15 = yes
		}
	}	
	flag_definition = {
		coa = USA_16
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11016
		trigger = {
			coa_def_USA_stars_16 = yes
		}
	}		
	flag_definition = {
		coa = USA_17
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11017
		trigger = {
			coa_def_USA_stars_17 = yes
		}
	}
	flag_definition = {
		coa = USA_18
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11018
		trigger = {
			coa_def_USA_stars_18 = yes
		}
	}
	flag_definition = {
		coa = USA_19
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11019
		trigger = {
			coa_def_USA_stars_19 = yes
		}
	}
	flag_definition = {
		coa = USA_20
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11020
		trigger = {
			coa_def_USA_stars_20 = yes
		}
	}
	flag_definition = {
		coa = USA_21
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11021
		trigger = {
			coa_def_USA_stars_21 = yes
		}
	}
	flag_definition = {
		coa = USA_22
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11022
		trigger = {
			coa_def_USA_stars_22 = yes
		}
	}
	flag_definition = {
		coa = USA_23
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11023
		trigger = {
			coa_def_USA_stars_23 = yes
		}
	}
	flag_definition = {
		coa = USA_24
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11024
		trigger = {
			coa_def_USA_stars_24 = yes
		}
	}
	flag_definition = {
		coa = USA_25
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11025
		trigger = {
			coa_def_USA_stars_25 = yes
		}
	}
	flag_definition = {
		coa = USA_26
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11026
		trigger = {
			coa_def_USA_stars_26 = yes
		}
	}
	flag_definition = {
		coa = USA_27
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11027
		trigger = {
			coa_def_USA_stars_27 = yes
		}
	}
	flag_definition = {
		coa = USA_28
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11028
		trigger = {
			coa_def_USA_stars_28 = yes
		}
	}
	flag_definition = {
		coa = USA_29
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11029
		trigger = {
			coa_def_USA_stars_29 = yes
		}
	}
	flag_definition = {
		coa = USA_30
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11030
		trigger = {
			coa_def_USA_stars_30 = yes
		}
	}
	flag_definition = {
		coa = USA_31
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11031
		trigger = {
			coa_def_USA_stars_31 = yes
		}
	}
	flag_definition = {
		coa = USA_32
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11032
		trigger = {
			coa_def_USA_stars_32 = yes
		}
	}
	flag_definition = {
		coa = USA_33
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11033
		trigger = {
			coa_def_USA_stars_33 = yes
		}
	}
	flag_definition = {
		coa = USA_34
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11034
		trigger = {
			coa_def_USA_stars_34 = yes
		}
	}
	flag_definition = {
		coa = USA_35
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11035
		trigger = {
			coa_def_USA_stars_35 = yes
		}
	}
	flag_definition = {
		coa = USA_36
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11036
		trigger = {
			coa_def_USA_stars_36 = yes
		}
	}
	flag_definition = {
		coa = USA_37
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11037
		trigger = {
			coa_def_USA_stars_37 = yes
		}
	}
	flag_definition = {
		coa = USA_38
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11038
		trigger = {
			coa_def_USA_stars_38 = yes
		}
	}
	flag_definition = {
		coa = USA_39
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11039
		trigger = {
			coa_def_USA_stars_39 = yes
		}
	}
	flag_definition = {
		coa = USA_40
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11040
		trigger = {
			coa_def_USA_stars_40 = yes
		}
	}
	flag_definition = {
		coa = USA_41
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11041
		trigger = {
			coa_def_USA_stars_41 = yes
		}
	}
	flag_definition = {
		coa = USA_42
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11042
		trigger = {
			coa_def_USA_stars_42 = yes
		}
	}
	flag_definition = {
		coa = USA_43
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11043
		trigger = {
			coa_def_USA_stars_43 = yes
		}
	}
	flag_definition = {
		coa = USA_44
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11044
		trigger = {
			coa_def_USA_stars_44 = yes
		}
	}
	flag_definition = {
		coa = USA_45
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11045
		trigger = {
			coa_def_USA_stars_45 = yes
		}
	}
	flag_definition = {
		coa = USA_46
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11046
		trigger = {
			coa_def_USA_stars_46 = yes
		}
	}
	flag_definition = {
		coa = USA_47
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11047
		trigger = {
			coa_def_USA_stars_47 = yes
		}
	}
	flag_definition = {
		coa = USA_48
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11048
		trigger = {
			coa_def_USA_stars_48 = yes
		}
	}
	flag_definition = {
		coa = USA_49
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11049
		trigger = {
			coa_def_USA_stars_49 = yes
		}
	}
	flag_definition = {
		coa = USA_50
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11050
		trigger = {
			coa_def_USA_stars_50 = yes
		}
	}
	flag_definition = {
		coa = USA_51
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11051
		trigger = {
			coa_def_USA_stars_51 = yes
		}
	}
	flag_definition = {
		coa = USA_52
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11052
		trigger = {
			coa_def_USA_stars_52 = yes
		}
	}
	flag_definition = {
		coa = USA_53
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11053
		trigger = {
			coa_def_USA_stars_53 = yes
		}
	}
	flag_definition = {
		coa = USA_54
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11054
		trigger = {
			coa_def_USA_stars_54 = yes
		}
	}
	flag_definition = {
		coa = USA_55
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11055
		trigger = {
			coa_def_USA_stars_55 = yes
		}
	}
	flag_definition = {
		coa = USA_56
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11056
		trigger = {
			coa_def_USA_stars_56 = yes
		}
	}
	flag_definition = {
		coa = USA_57
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11057
		trigger = {
			coa_def_USA_stars_57 = yes
		}
	}
	flag_definition = {
		coa = USA_58
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11058
		trigger = {
			coa_def_USA_stars_58 = yes
		}
	}
	flag_definition = {
		coa = USA_59
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11059
		trigger = {
			coa_def_USA_stars_59 = yes
		}
	}
	flag_definition = {
		coa = USA_60
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11060
		trigger = {
			coa_def_USA_stars_60 = yes
		}
	}
	flag_definition = {
		coa = USA_61
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11061
		trigger = {
			coa_def_USA_stars_61 = yes
		}
	}
	flag_definition = {
		coa = USA_62
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11062
		trigger = {
			coa_def_USA_stars_62 = yes
		}
	}
	flag_definition = {
		coa = USA_63
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11063
		trigger = {
			coa_def_USA_stars_63 = yes
		}
	}
	flag_definition = {
		coa = USA_64
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11064
		trigger = {
			coa_def_USA_stars_64 = yes
		}
	}
	flag_definition = {
		coa = USA_65
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11065
		trigger = {
			coa_def_USA_stars_65 = yes
		}
	}
	flag_definition = {
		coa = USA_66
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11066
		trigger = {
			coa_def_USA_stars_66 = yes
		}
	}
	flag_definition = {
		coa = USA_67
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11067
		trigger = {
			coa_def_USA_stars_67 = yes
		}
	}
	flag_definition = {
		coa = USA_68
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11068
		trigger = {
			coa_def_USA_stars_68 = yes
		}
	}
	flag_definition = {
		coa = USA_69
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11069
		trigger = {
			coa_def_USA_stars_69 = yes
		}
	}
	flag_definition = {
		coa = USA_70
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11070
		trigger = {
			coa_def_USA_stars_70 = yes
		}
	}
	flag_definition = {
		coa = USA_71
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11071
		trigger = {
			coa_def_USA_stars_71 = yes
		}
	}
	flag_definition = {
		coa = USA_72
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11072
		trigger = {
			coa_def_USA_stars_72 = yes
		}
	}
	flag_definition = {
		coa = USA_73
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11073
		trigger = {
			coa_def_USA_stars_73 = yes
		}
	}
	flag_definition = {
		coa = USA_74
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11074
		trigger = {
			coa_def_USA_stars_74 = yes
		}
	}
	flag_definition = {
		coa = USA_75
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11075
		trigger = {
			coa_def_USA_stars_75 = yes
		}
	}
	flag_definition = {
		coa = USA_76
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11076
		trigger = {
			coa_def_USA_stars_76 = yes
		}
	}
	flag_definition = {
		coa = USA_77
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11077
		trigger = {
			coa_def_USA_stars_77 = yes
		}
	}
	flag_definition = {
		coa = USA_78
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11078
		trigger = {
			coa_def_USA_stars_78 = yes
		}
	}
	flag_definition = {
		coa = USA_79
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11079
		trigger = {
			coa_def_USA_stars_79 = yes
		}
	}
	flag_definition = {
		coa = USA_80
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11080
		trigger = {
			coa_def_USA_stars_80 = yes
		}
	}
	flag_definition = {
		coa = USA_81
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11081
		trigger = {
			coa_def_USA_stars_81 = yes
		}
	}
	flag_definition = {
		coa = USA_82
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11082
		trigger = {
			coa_def_USA_stars_82 = yes
		}
	}
	flag_definition = {
		coa = USA_83
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11083
		trigger = {
			coa_def_USA_stars_83 = yes
		}
	}
	flag_definition = {
		coa = USA_84
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11084
		trigger = {
			coa_def_USA_stars_84 = yes
		}
	}
	flag_definition = {
		coa = USA_85
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11085
		trigger = {
			coa_def_USA_stars_85 = yes
		}
	}
	flag_definition = {
		coa = USA_86
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11086
		trigger = {
			coa_def_USA_stars_86 = yes
		}
	}
	flag_definition = {
		coa = USA_87
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11087
		trigger = {
			coa_def_USA_stars_87 = yes
		}
	}
	flag_definition = {
		coa = USA_88
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11088
		trigger = {
			coa_def_USA_stars_88 = yes
		}
	}
	flag_definition = {
		coa = USA_89
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11089
		trigger = {
			coa_def_USA_stars_89 = yes
		}
	}
	flag_definition = {
		coa = USA_90
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11090
		trigger = {
			coa_def_USA_stars_90 = yes
		}
	}
	flag_definition = {
		coa = USA_91
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11091
		trigger = {
			coa_def_USA_stars_91 = yes
		}
	}
	flag_definition = {
		coa = USA_92
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11092
		trigger = {
			coa_def_USA_stars_92 = yes
		}
	}
	flag_definition = {
		coa = USA_93
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11093
		trigger = {
			coa_def_USA_stars_93 = yes
		}
	}
	flag_definition = {
		coa = USA_94
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11094
		trigger = {
			coa_def_USA_stars_94 = yes
		}
	}
	flag_definition = {
		coa = USA_95
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11095
		trigger = {
			coa_def_USA_stars_95 = yes
		}
	}
	flag_definition = {
		coa = USA_96
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11096
		trigger = {
			coa_def_USA_stars_96 = yes
		}
	}
	flag_definition = {
		coa = USA_97
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11097
		trigger = {
			coa_def_USA_stars_97 = yes
		}
	}
	flag_definition = {
		coa = USA_98
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11098
		trigger = {
			coa_def_USA_stars_98 = yes
		}
	}
	flag_definition = {
		coa = USA_99
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11099
		trigger = {
			coa_def_USA_stars_99 = yes
		}
	}
	flag_definition = {
		coa = USA_100
		allow_overlord_canton = yes
		overlord_canton_scale = { @usa_canton_width @usa_canton_height }
		priority = 11100
		trigger = {
			coa_def_USA_stars_100 = yes
		}
	}
}

UTR = { # Utrecht
	flag_definition = {
		coa = UTR # ancient arms
		priority = 1
	}
	flag_definition = {
		coa = UTR_bishopric
		priority = 2
		trigger = {
			coa_def_theocracy_trigger = yes
		}
	}
	flag_definition = {
		coa = UTR_holland
		priority = 10
		trigger = {
			coa_def_theocracy_trigger = yes
			coa_def_HOL_ensign_trigger = yes
		}
	}	
	flag_definition = {
		coa = UTR_civic
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}	
}

VBK = { # Vitebsk
	flag_definition = {
		coa = VBK
		priority = 1
	}
	flag_definition = { # Starting
		coa = VBK_gediminas
		priority = 10
		trigger = {
			coa_def_gediminid_dynasty_trigger = yes
			OR = {
				coa_def_christian_trigger = no
				coa_def_LIT_ensign_trigger = yes
				coa_def_PLC_ensign_trigger = yes
			}
		}
	}	
}

VEN = { # Venice
	flag_definition = {
		coa = VEN_peace
		priority = 1
	}
	flag_definition = {
		coa = VEN
		priority = 5
		trigger = {
			coa_def_at_war_trigger = yes # TODO not refreshing
		}
	}
	flag_definition = {
		coa = VEN_eagle
		priority = 10
		trigger = {
			coa_def_ghibellines_trigger = yes
		}
	}	
	flag_definition = {
		coa = VEN_eagle_sword
		priority = 11
		trigger = {
			coa_def_ghibellines_trigger = yes
			coa_def_at_war_trigger = yes # TODO not refreshing
		}
	}	
}

VER = { # Verona
	flag_definition = {
		coa = VER
		priority = 1
	}
	flag_definition = {
		coa = VER_scaglieri
		priority = 10
		trigger = {
			OR = {
				coa_def_scaglieri_dynasty_trigger = yes
				coa_def_ghibellines_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = VER_revolutionary
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}		
	}	
}

VLS = { # Valois
	flag_definition = {
		coa = VLS
		priority = 1
	}
	flag_definition = {
		coa = VLS_three_fleurs
		priority = 2
		trigger = {
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

VYT = { # Vyatka
	flag_definition = {
		coa = VYT
		priority = 1
	}
	flag_definition = {
		coa = VYT_komi
		priority = 50
		trigger = {
			coa_def_pagan_trigger = yes
		}
	}
}

WAL = { # Wallachia
	flag_definition = {
		coa = WAL
		priority = 1
	}
	flag_definition = {
		coa = WAL_BYZ
		priority = 10
		trigger = {
			coa_def_BYZ_ensign_trigger = yes
		}
	}
}

WBG = { # Würzburg
	flag_definition = {
		coa = WBG
		priority = 1
	}
	flag_definition = {
		coa = WBG_grand_duchy
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

WES = { # Westphalia
	flag_definition = {
		coa = WES
		priority = 1
	}
	flag_definition = {
		coa = WES_late
		priority = 2
		trigger = {
			coa_def_reformation_age_4_trigger = yes
		}
	}
	flag_definition = {
		coa = WES_bicolor_escutcheon
		priority = 3
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			coa_def_absolute_monarchy_trigger = yes
		}
	}
	flag_definition = {
		coa = WES_bicolor
		priority = 100
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

WLS = { # Wales
	flag_definition = {
		coa = WLS
		subject_canton = WLS_cross
		priority = 1
	}
	flag_definition = {
		coa = WLS_lions_rampant
		subject_canton = WLS_cross
		priority = 10
		trigger = {
			is_subject = yes
			coa_def_celtic_group_trigger = yes
		}
	}
	flag_definition = {
		coa = WLS_glyndwr
		subject_canton = WLS_cross
		priority = 20
		trigger = {
			is_subject = no
			coa_def_celtic_group_trigger = yes
		}
	}
	flag_definition = {
		coa = WLS_cross
		subject_canton = WLS_cross
		priority = 50
		trigger = {
			coa_def_date_after_1600 = yes
		}
	}
	flag_definition = {
		coa = WLS_plantagenet
		subject_canton = WLS_cross
		priority = 80
		trigger = {
			coa_def_ENG_ensign_trigger = yes
			coa_def_appanage_trigger = yes
			coa_def_plantagenet_trigger = yes
		}
	}
	flag_definition = {
		coa = WLS_black_prince
		subject_canton = WLS_cross
		priority = 81
		trigger = {
			coa_def_ENG_ensign_trigger = yes
			coa_def_appanage_trigger = yes
			# TODO : and ENG quartering france
			coa_def_plantagenet_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}	
	flag_definition = {
		coa = WLS_dragon
		subject_canton = WLS_cross
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
	flag_definition = {
		coa = WLS_cross_neith
		subject_canton = WLS_cross
		priority = 150
		trigger = {
			coa_def_theocracy_trigger = yes
		}
	}		
	flag_definition = {
		coa = WLS_tricolor
		subject_canton = WLS_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}
}

WOL = { # Wolgast
	flag_definition = {
		coa = WOL
		priority = 1
	}
	flag_definition = {
		coa = WOL_republic
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}
}

WUR = { # Wurttemberg
	flag_definition = {
		coa = WUR
		priority = 1
	}
	flag_definition = {
		coa = WUR_late
		priority = 10
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
		}
	}
	flag_definition = {
		coa = WUR_late_kingdom
		priority = 11
		trigger = {
			coa_def_absolutism_age_5_trigger = yes
			coa_def_kingdom_or_higher_trigger = yes
		}
	}
	flag_definition = {
		coa = WUR_lozengy
		priority = 100
		trigger = {
			coa_def_republic_trigger = yes
		}
	}	
	flag_definition = {
		coa = WUR_tricolor
		priority = 200
		trigger = {
			coa_def_revolutionary_republic_trigger = yes
		}
	}		
}

YEH = { # Nara Yehe
	flag_definition = {
		coa = YEH
		priority = 1
	}
	flag_definition = {
		coa = YEH_blue_banner
		priority = 10
		trigger = {
			coa_def_CHI_ensign_trigger = yes
			coa_def_discovery_age_3_trigger = yes
		}
	}
}

YEM = { # Yemen
	flag_definition = {
		coa = YEM
		priority = 1
	}
	flag_definition = {
		coa = YEM_rasulid
		priority = 10
		trigger = {
			coa_def_rasulid_dynasty_trigger = yes
		}
	}
}

## China specific

YUA = { # China
	flag_definition = {
		coa = CHI # Qing
		allow_overlord_canton = no
		priority = 1
	}
	flag_definition = {
		coa = CHI_Yuan
		priority = 100
		trigger = {
			coa_def_mongolian_trigger = yes
		}
	}
}

CHI_Ming = { # Ming China
	flag_definition = {
		coa = CHI_Ming
		priority = 1
	}
	flag_definition = {
		coa = CHI_Ming_dragon
		priority = 100
		trigger = {
			coa_def_empire_trigger = yes
		}
	}
} 

CTW = { # Tianwan
	flag_definition = {
		coa = CTW
		priority = 1
	}
	flag_definition = {
		coa = CTW_dragon
		priority = 100
		trigger = {
			coa_def_empire_trigger = yes
		}
	}
} 

CHE = { # Chen
	flag_definition = {
		coa = CHE
		priority = 1
	}
	flag_definition = {
		coa = CHE_dragon
		priority = 100
		trigger = {
			coa_def_empire_trigger = yes
		}
	}
}

WUU = { # Wu
	flag_definition = {
		coa = WUU
		priority = 1
	}
	flag_definition = {
		coa = WUU_dragon
		priority = 100
		trigger = {
			coa_def_empire_trigger = yes
		}
	}
}

CFN = { # Fang
	flag_definition = {
		coa = CFN
		priority = 1
	}
	flag_definition = {
		coa = CFN_dragon
		priority = 100
		trigger = {
			coa_def_empire_trigger = yes
		}
	}
}

CMO = { # Mao Gui
	flag_definition = {
		coa = CMO
		priority = 1
	}
	flag_definition = {
		coa = CMO_dragon
		priority = 100
		trigger = {
			coa_def_empire_trigger = yes
		}
	}
}

CXI = { # Great Xia
	flag_definition = {
		coa = CXI
		priority = 1
	}
	flag_definition = {
		coa = CXI_dragon
		priority = 100
		trigger = {
			coa_def_empire_trigger = yes
		}
	}
}

CGU = { # Guo
	flag_definition = {
		coa = CGU
		priority = 1
	}
	flag_definition = {
		coa = CGU_dragon
		priority = 100
		trigger = {
			coa_def_empire_trigger = yes
		}
	}
}

CSO = { # Great Song
	flag_definition = {
		coa = CSO
		priority = 1
	}
	flag_definition = {
		coa = CSO_dragon
		priority = 100
		trigger = {
			coa_def_empire_trigger = yes
		}
	}
}

CKO = { # Koke Temur
	flag_definition = {
		coa = CKO
		priority = 1
	}
	flag_definition = {
		coa = CHI_Yuan
		priority = 100
		trigger = {
			coa_def_empire_trigger = yes
		}
	}
}